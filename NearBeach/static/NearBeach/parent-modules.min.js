"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7262],{5759:(e,t,i)=>{i.r(t),i.d(t,{default:()=>hl});var s=i(6252);const l={class:"card"},n={class:"card-body"},o={class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},a={key:0,class:"nav-item",role:"presentation"},r=[(0,s._)("button",{class:"nav-link active",id:"group-and-user-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Groups and Users ",-1)],d={key:1,class:"nav-item",role:"presentation"},c=[(0,s._)("button",{class:"nav-link",id:"requirement-item-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-items",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Item ",-1)],u={key:2,class:"nav-item",role:"presentation"},m=[(0,s._)("button",{class:"nav-link",id:"requirement-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Links ",-1)],b={key:3,class:"nav-item",role:"presentation"},k=[(0,s._)("button",{class:"nav-link",id:"requirement-item-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-item-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Links ",-1)],h=(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"documents-tab","data-bs-toggle":"tab","data-bs-target":"#documents",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Documents ")],-1),p={key:4,class:"nav-item",role:"presentation"},_=[(0,s._)("button",{class:"nav-link",id:"object-link-tabs","data-bs-toggle":"tab","data-bs-target":"#object-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Linked Objects ",-1)],g={key:5,class:"nav-item",role:"presentation"},v=[(0,s._)("button",{class:"nav-link",id:"customer-tab","data-bs-toggle":"tab","data-bs-target":"#customers",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Customers ",-1)],y={key:6,class:"nav-item",role:"presentation"},L=[(0,s._)("button",{class:"nav-link",id:"bug-tab","data-bs-toggle":"tab","data-bs-target":"#bugs",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Bugs ",-1)],f=(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"misc-tab","data-bs-toggle":"tab","data-bs-target":"#misc",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Misc ")],-1),w=(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#notes",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Notes ")],-1),j=(0,s._)("hr",null,null,-1),q={class:"tab-content",id:"misc_module_content"},I={key:0,class:"tab-pane fade show active",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},S={key:1,class:"tab-pane fade",id:"requirement-items",role:"tabpanel","aria-labelledby":"home-tab"},D={key:2,class:"tab-pane fade",id:"requirement-links",role:"tabpanel","aria-labelledby":"profile-tab"},R={key:3,class:"tab-pane fade",id:"requirement-item-links",role:"tabpanel","aria-labelledby":"profile-tab"},M={class:"tab-pane fade",id:"documents",role:"tabpanel","aria-labelledby":"contact-tab"},C={class:"tab-pane fade",id:"object-links",role:"tabpanel","aria-labelledby":"contact-tab"},T={class:"tab-pane fade",id:"customers",role:"tabpanel","aria-labelledby":"contact-tab"},U={class:"tab-pane fade",id:"bugs",role:"tabpanel","aria-labelledby":"contact-tab"},O={class:"tab-pane fade",id:"misc",role:"tabpanel","aria-labelledby":"contact-tab"},$={class:"tab-pane fade",id:"notes",role:"tabpanel","aria-labelledby":"contact-tab"};var B=i(3626);const x=(0,s._)("p",{class:"text-instructions"}," Requirements should be broken down into smaller components called Requirement Items. ",-1),E={key:0,class:"requirement-item-spacer"},N=[(0,s._)("div",{class:"alert alert-dark"}," Sorry - there are no Items for this requirement. ",-1)],W={key:1},Z={key:2},P={key:3,class:"row submit-row"},A={class:"col-md-12"};var F=i(3138),K=i(6542),H=i(9669),z=i.n(H),J=i(9963);const V={class:"modal fade",id:"newItemModal",tabindex:"-1","aria-labelledby":"requirementItemModal","aria-hidden":"true"},G={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Y={class:"modal-content"},Q={class:"modal-header"},X=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementItemCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),ee={class:"modal-body"},te={class:"row"},ie=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Description"),(0,s._)("p",{class:"text-instructions"}," Place in a detailed description of this requirement item. This particular item can be then connected to Project or Tasks. ")],-1),se={class:"col-md-8"},le={for:"id_requirement_item_title"},ne=(0,s._)("br",null,null,-1),oe=(0,s._)("br",null,null,-1),ae=(0,s._)("hr",null,null,-1),re={class:"row"},de=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Status"),(0,s._)("p",{class:"text-instructions"}," Set the Requirement Status and Type here. ")],-1),ce={class:"col-md-4"},ue={class:"form-group"},me={class:"col-md-4"},be={class:"form-group"},ke={class:"modal-footer"},he=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var pe=i(2001),_e=i(7267),ge=i(3058),ve=i(5808),ye=i(5705),Le=i(760),fe=i(7939),we=i(989);const je={name:"NewRequirementItemWizard",setup:()=>({v$:(0,ye.ZP)()}),inject:["nextTick"],components:{editor:_e.Z,Icon:K.JO,NSelect:pe.Z,ValidationRendering:fe.Z},mixins:[ge.Z,ve.Z],data:()=>({requirementItemScopeModel:"",requirementItemTitleModel:"",statusItemFixList:[],statusItemModel:"",typeItemFixList:[],typeItemModel:""}),computed:{...(0,we.Se)({contentCss:"getContentCss",locationId:"getLocationId",rootUrl:"getRootUrl",skin:"getSkin"})},validations:{requirementItemScopeModel:{required:Le.C1,maxLength:(0,Le.BS)(63e4)},requirementItemTitleModel:{required:Le.C1},statusItemModel:{required:Le.C1},typeItemModel:{required:Le.C1}},methods:{saveItem(){if(this.v$.$touch(),this.v$.$invalid)return;const e=new FormData;e.set("requirement_item_title",this.requirementItemTitleModel),e.set("requirement_item_scope",this.requirementItemScopeModel),e.set("requirement_item_status",this.statusItemModel),e.set("requirement_item_type",this.typeItemModel),z().post(`${this.rootUrl}new_requirement_item/save/${this.locationId}/`,e).then((e=>{this.requirementItemScopeModel="",this.requirementItemTitleModel="",this.statusItemModel="",this.typeItemModel="",this.$emit("new_item_added",e.data),document.getElementById("requirementItemCloseButton").click()})).catch((e=>{this.showErrorModal(e,this.destination)}))},updateStatusList(){z().post(`${this.rootUrl}requirement_information/data/list_of_item_status_values/`).then((e=>{this.statusItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_status})))}))},updateTypeList(){z().post(`${this.rootUrl}requirement_information/data/list_of_item_type_values/`).then((e=>{this.typeItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_type})))}))}},mounted(){this.$nextTick((()=>{this.updateStatusList(),this.updateTypeList()}))}};var qe=i(3744);const Ie=(0,qe.Z)(je,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("validation-rendering"),d=(0,s.up)("editor"),c=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("div",G,[(0,s._)("div",Y,[(0,s._)("div",Q,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.clipboardIcon},null,8,["icon"]),(0,s.Uk)(" New Requirement Item Wizard ")]),X]),(0,s._)("div",ee,[(0,s._)("div",te,[ie,(0,s._)("div",se,[(0,s._)("label",le,[(0,s.Uk)("Requirement Item Title: "),(0,s.Wm)(r,{"error-list":l.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,s.wy)((0,s._)("input",{id:"id_requirement_item_title",class:"form-control",name:"requirement_item_title",type:"text",required:"true",maxlength:"255","onUpdate:modelValue":t[0]||(t[0]=e=>n.requirementItemTitleModel=e)},null,512),[[J.vModelText,n.requirementItemTitleModel]]),ne,(0,s._)("label",null,[(0,s.Uk)(" Requirement Item Scope: "),(0,s.Wm)(r,{"error-list":l.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),oe,(0,s.Wm)(d,{init:{height:500,menubar:!1,plugins:["lists","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | codesample"],skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:n.requirementItemScopeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>n.requirementItemScopeModel=e)},null,8,["init","modelValue"])])]),(0,s.kq)(" Status "),ae,(0,s._)("div",re,[de,(0,s._)("div",ce,[(0,s._)("div",ue,[(0,s._)("label",null,[(0,s.Uk)("Requirement Status "),(0,s.Wm)(r,{"error-list":l.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,s.Wm)(c,{options:n.statusItemFixList,label:"status",value:n.statusItemModel,"onUpdate:value":t[2]||(t[2]=e=>n.statusItemModel=e)},null,8,["options","value"])])]),(0,s._)("div",me,[(0,s._)("div",be,[(0,s._)("label",null,[(0,s.Uk)("Requirement Type "),(0,s.Wm)(r,{"error-list":l.v$.typeItemModel.$errors},null,8,["error-list"])]),(0,s.Wm)(c,{options:n.typeItemFixList,label:"type",value:n.typeItemModel,"onUpdate:value":t[3]||(t[3]=e=>n.typeItemModel=e)},null,8,["options","value"])])])])]),(0,s.kq)(" FOOTERS "),(0,s._)("div",ke,[he,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>o.saveItem&&o.saveItem(...e))}," Save Requirement Item ")])])])])}]]),Se={name:"RequirementItemsModule",components:{RenderObjectCard:i(7819).Z,Icon:K.JO,NewRequirementItemWizard:Ie},mixins:[ve.Z],data:()=>({requirementItemVariables:{header:"Requirement Items",prefix:"RI-",id:"requirement_item_id",title:"requirement_item_title",status:"requirement_item_status_text",end_date:""},itemResults:[],itemStatusList:[],itemTypeList:[]}),computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{createNewItem(){new F.u_(document.getElementById("newItemModal")).show()},newItemAdded(e){this.itemResults=e},updateItemResults(){z().post("data/items/").then((e=>{this.itemResults=e.data}))}},mounted(){this.updateItemResults()}},De=(0,qe.Z)(Se,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("render-object-card"),d=(0,s.up)("new-requirement-item-wizard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.clipboardIcon},null,8,["icon"]),(0,s.Uk)(" Requirement Items ")]),x,(0,s.kq)(" TABLE OF REQUIREMENT ITEMS "),0===n.itemResults.length?((0,s.wg)(),(0,s.iD)("div",E,N)):((0,s.wg)(),(0,s.iD)("div",W,[(0,s.Wm)(r,{"import-variables":n.requirementItemVariables,destination:"requirement_item","search-results":n.itemResults},null,8,["import-variables","search-results"])])),(0,s.kq)(" Submit Button "),(0,s.kq)(" TO DO - limit it to certain users "),e.userLevel>1?((0,s.wg)(),(0,s.iD)("hr",Z)):(0,s.kq)("v-if",!0),e.userLevel>1?((0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("div",A,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>o.createNewItem&&o.createNewItem(...e)),class:"btn btn-primary save-changes"}," Create new Requirement Item ")])])):(0,s.kq)("v-if",!0),(0,s.kq)(" NEW REQUIREMENT ITEM MODAL "),(0,s.Wm)(d,{"item-status-list":n.itemStatusList,"item-type-list":n.itemTypeList,"location-id":e.locationId,onNew_item_added:t[1]||(t[1]=e=>o.newItemAdded(e))},null,8,["item-status-list","item-type-list","location-id"])])}]]),Re=(0,s._)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1),Me={key:0},Ce=[(0,s._)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)],Te={key:1},Ue={key:2},Oe={key:3,class:"row submit-row"},$e={class:"col-md-12"};var Be=i(3577);const xe={class:"modal fade",id:"newRequirementLinkModal",tabindex:"-1","aria-labelledby":"requirementLinkModal","aria-hidden":"true"},Ee={class:"modal-dialog modal-lg"},Ne={class:"modal-content"},We={class:"modal-header"},Ze=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),Pe={class:"modal-body"},Ae={class:"row"},Fe=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Object Selector"),(0,s._)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),Ke={class:"col-md-8"},He={class:"form-group"},ze=(0,s._)("label",null,"Object Selection",-1),Je=(0,s._)("hr",null,null,-1),Ve={class:"row"},Ge=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Select Links"),(0,s._)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),Ye={class:"col-md-8"},Qe={key:0,id:"link_wizard_results"},Xe=["src"],et={key:1,class:"alert alert-warning"},tt={key:2,class:"form-group"},it=(0,s._)("label",null,"Search Terms",-1),st=(0,s._)("br",null,null,-1),lt={key:3,class:"table"},nt=(0,s._)("td",null,"Status",-1),ot={class:"form-check"},at=["value","id"],rt=["for"],dt=(0,s._)("div",{class:"spacer"},null,-1),ct={class:"small-text"},ut={class:"modal-footer"},mt=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),bt=["disabled"],kt={name:"NewRequirementLinkWizard",components:{Icon:K.JO,NSelect:pe.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,we.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[ge.Z,ve.Z],data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),z().post(`${this.rootUrl}${this.destination}_information/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_module",e.data),document.getElementById("requirementLinkCloseButton").click(),this.objectModel=null}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,z().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.$store.dispatch("newToast",{header:"Error retrieving links",message:"We are currently having issues obtaining data",delay:0,extra_classes:"bg-danger"})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let t="";return t=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),t.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},ht=(0,qe.Z)(kt,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",xe,[(0,s._)("div",Ee,[(0,s._)("div",Ne,[(0,s._)("div",We,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.linkOut},null,8,["icon"]),(0,s.Uk)(" New Requirement Link Wizard ")]),Ze]),(0,s._)("div",Pe,[(0,s.kq)(" CHOOSING A OBJECT TYPE "),(0,s._)("div",Ae,[Fe,(0,s._)("div",Ke,[(0,s._)("div",He,[ze,(0,s.Wm)(r,{options:n.objectSelection,value:n.objectModel,"onUpdate:value":t[0]||(t[0]=e=>n.objectModel=e),class:"object-selection"},null,8,["options","value"])])])]),Je,(0,s.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,s._)("div",Ve,[Ge,(0,s._)("div",Ye,[(0,s.kq)(" LOADING PLACEHOLDER "),n.isSearching||null==n.objectModel?((0,s.wg)(),(0,s.iD)("div",Qe,[(0,s._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,Xe)])):(0,s.kq)("v-if",!0),0===n.objectResults.length&&null!=n.objectModel?((0,s.wg)(),(0,s.iD)("div",et," Sorry - there are no results. ")):(0,s.kq)("v-if",!0),(0,s.kq)(" SEARCH RESULTS "),!n.isSearching&&n.objectResults.length>0&&null!=n.objectModel?((0,s.wg)(),(0,s.iD)("div",tt,[it,(0,s.wy)((0,s._)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchTermModel=e),type:"text"},null,512),[[J.vModelText,n.searchTermModel]])])):(0,s.kq)("v-if",!0),st,(0,s.kq)(" TABLE CONTAINING RESULTS "),!n.isSearching&&n.objectResults.length>0&&null!=n.objectModel?((0,s.wg)(),(0,s.iD)("table",lt,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,(0,Be.toDisplayString)(n.objectModel)+" Description",1),nt])]),(0,s.kq)(" PROJECTS "),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.objectFilteredResults,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,[(0,s._)("div",ot,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:`checkbox_${n.objectModel.toLowerCase()}_${e.id}`,"onUpdate:modelValue":t[2]||(t[2]=e=>n.linkModel=e)},null,8,at),[[J.vModelCheckbox,n.linkModel]]),(0,s._)("label",{class:"form-check-label",for:`checkbox_${n.objectModel.toLowerCase()}_${e.id}`},(0,Be.toDisplayString)(e.description),9,rt)]),dt,(0,s._)("p",ct,(0,Be.toDisplayString)(n.objectModel)+" "+(0,Be.toDisplayString)(e.id),1)]),(0,s._)("td",null,(0,Be.toDisplayString)(e.status),1)])))),128))])])):(0,s.kq)("v-if",!0)])])]),(0,s._)("div",ut,[mt,(0,s._)("button",{type:"button",class:"btn btn-primary",disabled:0==n.linkModel.length,onClick:t[3]||(t[3]=(...e)=>o.saveLinks&&o.saveLinks(...e))}," Save changes ",8,bt)])])])])}]]),pt={class:"modal fade",id:"confirmLinkDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},_t={class:"modal-dialog"},gt={class:"modal-content"},vt=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"confirmLinkDelete"}," Please confirm Link Deletion "),(0,s.kq)(" TASK INFORMATION "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmLinkDeleteButton"})],-1),yt=(0,s._)("div",{class:"modal-body"}," Are you sure you want to delete the link? ",-1),Lt={class:"modal-footer"},ft=i(9669),wt={name:"ConfirmLinkDelete",props:{},computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",objectLink:"getObjectLink",rootUrl:"getRootUrl"})},methods:{deleteLink(){const e=new FormData;e.set("link_id",this.objectLink.object_id),e.set("link_connection",this.objectLink.object_type===this.destination?"meta_object":this.objectLink.object_type),ft.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_link/`,e).then((()=>{this.$emit("update_link_results",{})})),this.closeModal()},closeModal(){document.getElementById("confirmLinkDeleteButton").click()}}},jt=(0,qe.Z)(wt,[["render",function(e,t,i,l,n,o){return(0,s.wg)(),(0,s.iD)("div",pt,[(0,s._)("div",_t,[(0,s._)("div",gt,[vt,yt,(0,s._)("div",Lt,[(0,s._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e))}," No "),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>o.deleteLink&&o.deleteLink(...e))}," Yes ")])])])])}]]);var qt=i(1626);const It={name:"RequirementItemLinksModule",components:{ConfirmLinkDelete:jt,Icon:K.JO,NewRequirementLinkWizard:ht,SubObjectLinks:qt.Z},mixins:[ve.Z],inject:["nextTick"],data:()=>({itemLinkProject:[],itemLinkTask:[]}),computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{updateLinkResults(){z().post(`${this.rootUrl}object_data/requirement_item/${this.locationId}/object_link_list/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type))}))},newRequirementItemLink(){new F.u_(document.getElementById("newRequirementLinkModal")).show()}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},St=(0,qe.Z)(It,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("sub-object-links"),d=(0,s.up)("new-requirement-link-wizard"),c=(0,s.up)("confirm-link-delete");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.linkIcon2},null,8,["icon"]),(0,s.Uk)(" Requirement Item Links ")]),Re,(0,s.kq)(" ITEM LINKS "),n.itemLinkProject.length+n.itemLinkTask.length===0?((0,s.wg)(),(0,s.iD)("div",Me,Ce)):((0,s.wg)(),(0,s.iD)("div",Te,[(0,s.kq)(" Project Links "),(0,s.Wm)(r,{title:"Project Links","link-results":n.itemLinkProject,onUpdate_link_results:t[0]||(t[0]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Task Links "),(0,s.Wm)(r,{title:"Task Links","link-results":n.itemLinkTask,onUpdate_link_results:t[1]||(t[1]=e=>o.updateLinkResults(e))},null,8,["link-results"])])),(0,s.kq)(" Submit Button "),e.userLevel>1?((0,s.wg)(),(0,s.iD)("hr",Ue)):(0,s.kq)("v-if",!0),e.userLevel>1?((0,s.wg)(),(0,s.iD)("div",Oe,[(0,s._)("div",$e,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>o.newRequirementItemLink&&o.newRequirementItemLink(...e))},"Create new Link")])])):(0,s.kq)("v-if",!0),(0,s.kq)(" LINKING MODAL "),(0,s.kq)(" need to build something that resets the requirement links when adding links "),(0,s.Wm)(d,{"location-id":e.locationId,destination:e.destination,onUpdate_module:t[3]||(t[3]=e=>o.updateLinkResults(e))},null,8,["location-id","destination"]),(0,s.kq)(" MODAL FOR CONFIRM DELETE LINK "),(0,s.Wm)(c,{onUpdate_link_results:t[4]||(t[4]=e=>o.updateLinkResults(e))})])}]]),Dt=(0,s._)("p",{class:"text-instructions"}," The following are links to other projects/tasks. You can link a Requirement to these other objects to symbolise a connection between the two. ",-1),Rt={key:0,class:"requirement-item-spacer"},Mt=[(0,s._)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)],Ct={key:1},Tt={key:2,class:"row submit-row"},Ut={class:"col-md-12"},Ot=(0,s._)("hr",null,null,-1),$t=(0,s._)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1),Bt={key:3},xt=[(0,s._)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)],Et={key:4},Nt={name:"RequirementLinksModule",components:{ConfirmLinkDelete:jt,SubObjectLinks:qt.Z,Icon:K.JO,NewRequirementLinkWizard:ht},mixins:[ve.Z],inject:["nextTick"],data:()=>({itemLinkProject:[],itemLinkTask:[],linkProject:[],linkTask:[],linkModel:[]}),computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{newRequirementLink(){new F.u_(document.getElementById("newRequirementLinkModal")).show()},updateLinkResults(){z().post(`${this.rootUrl}object_data/requirement/${this.locationId}/object_link_list/`).then((e=>{this.linkProject=e.data.filter((e=>"project"===e.object_type)),this.linkTask=e.data.filter((e=>"task"===e.object_type))})),z().post(`${this.rootUrl}requirement_information/${this.locationId}/data/item_links/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1}))),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1})))}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},Wt=(0,qe.Z)(Nt,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("sub-object-links"),d=(0,s.up)("new-requirement-link-wizard"),c=(0,s.up)("confirm-link-delete");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.linkIcon},null,8,["icon"]),(0,s.Uk)(" Requirement Links ")]),Dt,(0,s.kq)(" REQUIREMENT LINKS "),n.linkProject.length+n.linkTask.length===0?((0,s.wg)(),(0,s.iD)("div",Rt,Mt)):((0,s.wg)(),(0,s.iD)("div",Ct,[(0,s.kq)(" Project Links "),(0,s.Wm)(r,{title:"Project Links","link-results":n.linkProject,onUpdate_link_results:t[0]||(t[0]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Task Links "),(0,s.Wm)(r,{title:"Task Links","link-results":n.linkTask,onUpdate_link_results:t[1]||(t[1]=e=>o.updateLinkResults(e))},null,8,["link-results"])])),(0,s.kq)(" Submit Button "),e.userLevel>1?((0,s.wg)(),(0,s.iD)("div",Tt,[(0,s._)("div",Ut,[e.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>o.newRequirementLink&&o.newRequirementLink(...e))},"Create new Link")):(0,s.kq)("v-if",!0)])])):(0,s.kq)("v-if",!0),Ot,(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.linkIcon2},null,8,["icon"]),(0,s.Uk)(" Requirement Item Links ")]),$t,(0,s.kq)(" ITEM LINKS "),n.itemLinkProject.length+n.itemLinkTask.length===0?((0,s.wg)(),(0,s.iD)("div",Bt,xt)):((0,s.wg)(),(0,s.iD)("div",Et,[(0,s.kq)(" Project Links "),(0,s.Wm)(r,{title:"Project Links","link-results":n.itemLinkProject,"can-delete":!1},null,8,["link-results"]),(0,s.kq)(" Task Links "),(0,s.Wm)(r,{title:"Task Links","link-results":n.itemLinkTask,"can-delete":!1},null,8,["link-results"])])),(0,s.kq)(" LINKING MODAL "),(0,s.Wm)(d,{"location-id":e.locationId,destination:"requirement",onUpdate_module:o.updateLinkResults},null,8,["location-id","onUpdate_module"]),(0,s.kq)(" MODAL FOR CONFIRM DELETE LINK "),(0,s.Wm)(c,{onUpdate_link_results:o.updateLinkResults},null,8,["onUpdate_link_results"])])}]]);var Zt=i(3887);const Pt={class:"text-instructions"},At={key:0,class:"requirement-item-spacer"},Ft=[(0,s._)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)],Kt={key:1},Ht={class:"row submit-row"},zt={class:"col-md-12"},Jt=(0,s._)("hr",null,null,-1),Vt={class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"linkModal","aria-hidden":"true"},Gt={class:"modal-dialog modal-lg"},Yt={class:"modal-content"},Qt={class:"modal-header"},Xt=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"linkCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),ei={class:"modal-body"},ti={class:"row"},ii={class:"col-md-4"},si=(0,s._)("strong",null,"Object Selector",-1),li={class:"text-instructions"},ni={class:"col-md-8"},oi={key:1,class:"alert alert-success"},ai=(0,s._)("hr",null,null,-1),ri={class:"row"},di=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Relationship"),(0,s._)("p",{class:"text-instructions"},' Please select an appropriate relation for the objects. Default is "Relates" ')],-1),ci={class:"col-md-8"},ui=(0,s._)("br",null,null,-1),mi=(0,s._)("hr",null,null,-1),bi={class:"row"},ki={class:"col-md-4"},hi=(0,s._)("strong",null,"Select Links",-1),pi={class:"text-instructions"},_i={class:"col-md-8"},gi={key:0,id:"link_wizard_results"},vi=["src"],yi={key:1,class:"alert alert-warning"},Li={key:2,class:"table"},fi=(0,s._)("td",null,"Status",-1),wi={class:"form-check"},ji=["value","id"],qi=["for"],Ii=(0,s._)("div",{class:"spacer"},null,-1),Si={class:"small-text"},Di={class:"modal-footer"},Ri=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Mi=["disabled"],Ci={name:"NewLinkWizard",components:{Icon:K.JO,NSelect:pe.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,we.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[ge.Z,ve.Z],data:()=>({isSearching:!1,objectModel:null,objectRelation:[{value:"relates",label:"Relates To"},{value:"blocked_by",label:"Is Blocked By"},{value:"blocking",label:"Is Currently Blocking"},{value:"sub_object_of",label:"Is Sub Object Of"},{value:"parent_object_of",label:"Is Parent Object Of"},{value:"has_duplicate",label:"Has Duplicate Object Of"},{value:"duplicate_object",label:"Is Duplicate Object Of"}],objectRelationModel:"relates",objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Requirement_Item",label:"Requirement_Item"},{value:"Task",label:"Task"}],linkModel:[]}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),e.set("object_relation",this.objectRelationModel),z().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_link/`,e).then((()=>{this.$emit("update_link_results",{}),this.objectModel=null,document.getElementById("linkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,z().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.isSearching=!1})).catch((e=>{this.showErrorModal(e,this.destination)}))):this.isSearching=!1}}},Ti=(0,qe.Z)(Ci,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",Vt,[(0,s._)("div",Gt,[(0,s._)("div",Yt,[(0,s._)("div",Qt,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.linkOut},null,8,["icon"]),(0,s.Uk)(" New "+(0,Be.toDisplayString)(i.destination)+" Link Wizard ",1)]),Xt]),(0,s._)("div",ei,[(0,s.kq)(" CHOOSING A OBJECT TYPE "),(0,s._)("div",ti,[(0,s._)("div",ii,[si,(0,s._)("p",li," Please select which object you would like to link to this "+(0,Be.toDisplayString)(i.destination)+". ",1)]),(0,s._)("div",ni,[n.isSearching?((0,s.wg)(),(0,s.iD)("div",oi," Searching for "+(0,Be.toDisplayString)(n.objectModel)+"s ",1)):((0,s.wg)(),(0,s.j4)(r,{key:0,options:n.objectSelection,value:n.objectModel,"onUpdate:value":t[0]||(t[0]=e=>n.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),ai,(0,s.kq)(" CHOOSE RELATIONSHIP TYPE "),(0,s._)("div",ri,[di,(0,s._)("div",ci,[(0,s.Uk)(" Current object "),ui,(0,s.Wm)(r,{options:n.objectRelation,value:n.objectRelationModel,"onUpdate:value":t[1]||(t[1]=e=>n.objectRelationModel=e),class:"object-selection",disabled:null===n.objectModel},null,8,["options","value","disabled"])])]),mi,(0,s.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,s._)("div",bi,[(0,s._)("div",ki,[hi,(0,s._)("p",pi," Please select which of the objects you want to connect to this "+(0,Be.toDisplayString)(i.destination)+". ",1)]),(0,s._)("div",_i,[(0,s.kq)(" LOADING PLACEHOLDER "),n.isSearching||null==n.objectModel?((0,s.wg)(),(0,s.iD)("div",gi,[(0,s._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,vi)])):(0,s.kq)("v-if",!0),0===n.objectResults.length&&null!=n.objectModel?((0,s.wg)(),(0,s.iD)("div",yi," Sorry - there are no results. ")):(0,s.kq)("v-if",!0),(0,s.kq)(" TABLE CONTAINING RESULTS "),!n.isSearching&&n.objectResults.length>0&&null!=n.objectModel?((0,s.wg)(),(0,s.iD)("table",Li,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,(0,Be.toDisplayString)(n.objectModel)+" Description",1),fi])]),(0,s.kq)(" RENDER RESULTS "),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.objectResults,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,[(0,s._)("div",wi,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:`checkbox_${n.objectModel.toLowerCase()}_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>n.linkModel=e)},null,8,ji),[[J.vModelCheckbox,n.linkModel]]),(0,s._)("label",{class:"form-check-label",for:`checkbox_${n.objectModel.toLowerCase()}_${e.pk}`},(0,Be.toDisplayString)(e.description),9,qi)]),Ii,(0,s._)("p",Si,(0,Be.toDisplayString)(n.objectModel)+" "+(0,Be.toDisplayString)(e.id),1)]),(0,s._)("td",null,(0,Be.toDisplayString)(e.status),1)])))),128))])])):(0,s.kq)("v-if",!0)])])]),(0,s._)("div",Di,[Ri,(0,s._)("button",{type:"button",class:"btn btn-primary",disabled:0===n.linkModel.length,onClick:t[3]||(t[3]=(...e)=>o.saveLinks&&o.saveLinks(...e))}," Save changes ",8,Mi)])])])])}]]),Ui=i(9669),Oi={name:"ObjectLinks",components:{ConfirmLinkDelete:jt,Icon:K.JO,NewLinkWizard:Ti,SubObjectLinks:qt.Z},inject:["nextTick"],mixins:[ve.Z],data:()=>({hasDuplicateObjectOf:[],isBlockedBy:[],isCurrentlyBlocking:[],isDuplicateObjectOf:[],isParentOf:[],isSubObjectOf:[],kanbanCard:[],linkResults:[],relatesTo:[]}),computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{isLinkedObject(e){let t=!1;return null!==e.fields.project&&(t=!0),null!==e.fields.task&&(t=!0),null!==e.fields.requirement&&(t=!0),t},newLink(){new F.u_(document.getElementById("newLinkModal")).show()},updateLinkResults(){this.linkResults=[],Ui.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/object_link_list/`).then((e=>{this.linkResults=e.data,this.relatesTo=e.data.filter((e=>"Relate"===e.link_relationship||null===e.link_relationship)),this.isBlockedBy=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,i="Block"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||i})),this.kanbanCard=e.data.filter((e=>"Card"===e.link_relationship)),this.isCurrentlyBlocking=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,i="Block"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||i})),this.isSubObjectOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,i="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||i})),this.isParentOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,i="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||i})),this.hasDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,i="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||i})),this.isDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,i="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||i}))}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},$i=(0,qe.Z)(Oi,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("sub-object-links"),d=(0,s.up)("new-link-wizard"),c=(0,s.up)("confirm-link-delete");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.linkOut},null,8,["icon"]),(0,s.Uk)(" "+(0,Be.toDisplayString)(e.destination)+" Links ",1)]),(0,s._)("p",Pt," The following are links to other objects like projects/tasks/requirements. You can link a "+(0,Be.toDisplayString)(e.destination)+" to these other objects to symbolise a connection between the two. ",1),(0,s.kq)(" OBJECT LINKS "),0===n.linkResults.length?((0,s.wg)(),(0,s.iD)("div",At,Ft)):((0,s.wg)(),(0,s.iD)("div",Kt,[(0,s.kq)(" Relates To "),(0,s.Wm)(r,{title:"Relates To","link-results":n.relatesTo,onUpdate_link_results:t[0]||(t[0]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Kanban Cards "),(0,s.Wm)(r,{title:"Kanban Cards","link-results":n.kanbanCard,"can-delete":!1},null,8,["link-results"]),(0,s.kq)(" Is Blocked By "),(0,s.Wm)(r,{title:"Is Blocked By","link-results":n.isBlockedBy,onUpdate_link_results:t[1]||(t[1]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Is Currently Blocking "),(0,s.Wm)(r,{title:"Is Currently Blocking","link-results":n.isCurrentlyBlocking,onUpdate_link_results:t[2]||(t[2]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Is Sub Object Of "),(0,s.Wm)(r,{title:"Is Subobject Of","link-results":n.isSubObjectOf,onUpdate_link_results:t[3]||(t[3]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Is Parent Object Of "),(0,s.Wm)(r,{title:"Is Parent Object Of","link-results":n.isParentOf,onUpdate_link_results:t[4]||(t[4]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Has Duplicate Object Of "),(0,s.Wm)(r,{title:"Has Duplicate Object Of","link-results":n.hasDuplicateObjectOf,onUpdate_link_results:t[5]||(t[5]=e=>o.updateLinkResults(e))},null,8,["link-results"]),(0,s.kq)(" Is Duplicate Object Of "),(0,s.Wm)(r,{title:"Is Duplicate Object Of","link-results":n.isDuplicateObjectOf,onUpdate_link_results:t[6]||(t[6]=e=>o.updateLinkResults(e))},null,8,["link-results"])])),(0,s.kq)(" Submit Button "),(0,s._)("div",Ht,[(0,s._)("div",zt,[e.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>o.newLink&&o.newLink(...e))},"Create new Link")):(0,s.kq)("v-if",!0)])]),Jt,(0,s.kq)(" MODAL FOR NEW OBJECT LINKS "),(0,s.Wm)(d,{destination:e.destination,"location-id":e.locationId,onUpdate_link_results:o.updateLinkResults},null,8,["destination","location-id","onUpdate_link_results"]),(0,s.kq)(" MODAL FOR CONFIRM DELETE LINK "),(0,s.Wm)(c,{onUpdate_link_results:o.updateLinkResults},null,8,["onUpdate_link_results"])])}]]),Bi={class:"text-instructions"},xi={key:0},Ei=[(0,s._)("div",{class:"customers-module-spacer"},[(0,s._)("div",{class:"alert alert-dark"}," Sorry - there are no customers. Please add them by clicking on the button below ")],-1)],Ni={key:1},Wi=(0,s._)("hr",null,null,-1),Zi={class:"row submit-row"},Pi={class:"col-md-12"};var Ai=i(1624);const Fi={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ki={class:"modal-dialog modal-lg"},Hi={class:"modal-content"},zi={class:"modal-header"},Ji=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),Vi={class:"modal-body"},Gi={key:0,class:"row"},Yi={class:"col-md-4"},Qi=(0,s._)("strong",null,"Select Customer",-1),Xi={class:"text-instructions"},es={class:"col-md-8"},ts={key:1,class:"row"},is=(0,s._)("div",{class:"col-md-6"},[(0,s._)("strong",null,"Sorry - no results"),(0,s._)("p",{class:"text-instructions"}," This could be because "),(0,s._)("ul",{class:"text-instructions"},[(0,s._)("li",null,"There are no more customers left to add"),(0,s._)("li",null," There are no customers for this organisation ")])],-1),ss={class:"col-md-6 no-search"},ls=["src"],ns={class:"modal-footer"},os=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),as=["diabled"],rs=i(9669),ds={name:"AddCustomerWizard",components:{Icon:K.JO,NSelect:pe.Z},inject:["nextTick"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0},excludeCustomers:{type:Array,default:()=>[]}},computed:{...(0,we.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[ge.Z,ve.Z],data:()=>({customerModel:"",customerList:[],customerFixList:[]}),methods:{addCustomer(){const e=new FormData;e.set("customer",this.customerModel),rs.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_customer/`,e).then((e=>{this.$emit("update_customer_results",e.data),this.customerModel="",document.getElementById("addCustomerCloseButton").click()})).catch((e=>{this.showErrorModal(e,this.destination)}))},getCustomerList(){rs.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list_all/`).then((e=>{this.customerList=e.data,this.updateCustomerFixList()})).catch((e=>{this.showErrorModal(e,this.destination)}))},updateCustomerFixList(){if(0===this.customerList.length)return;const e=[];this.excludeCustomers.forEach((t=>{e.push(t.pk)})),this.customerFixList=this.customerList.filter((t=>!e.includes(t.pk))).map((e=>({value:e.pk,label:`${e.fields.customer_first_name} ${e.fields.customer_last_name}`})))}},mounted(){!["requirement_item"].indexOf(this.locationId)<0||this.$nextTick((()=>{this.getCustomerList()}))},watch:{excludeCustomers(){this.updateCustomerFixList()}}},cs=(0,qe.Z)(ds,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",Fi,[(0,s._)("div",Ki,[(0,s._)("div",Hi,[(0,s._)("div",zi,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.usersIcon},null,8,["icon"]),(0,s.Uk)(" Add Customers Wizard ")]),Ji]),(0,s._)("div",Vi,[n.customerFixList.length>0?((0,s.wg)(),(0,s.iD)("div",Gi,[(0,s._)("div",Yi,[Qi,(0,s._)("p",Xi," Search for a customer who has not been added to this "+(0,Be.toDisplayString)(i.destination)+". If the search is blank there are either no customers that match that search, or all customer have already been added to the "+(0,Be.toDisplayString)(i.destination)+". ",1)]),(0,s._)("div",es,[(0,s.Wm)(r,{options:n.customerFixList,label:"customerName",value:n.customerModel,"onUpdate:value":t[0]||(t[0]=e=>n.customerModel=e)},null,8,["options","value"])])])):((0,s.wg)(),(0,s.iD)("div",ts,[is,(0,s._)("div",ss,[(0,s._)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,ls)])]))]),(0,s._)("div",ns,[os,(0,s._)("button",{type:"button",class:"btn btn-primary",diabled:""==n.customerModel,onClick:t[1]||(t[1]=(...e)=>o.addCustomer&&o.addCustomer(...e))}," Save changes ",8,as)])])])])}]]),us=i(9669),ms={name:"CustomersModule",components:{AddCustomerWizard:cs,CustomersListModule:Ai.Z,Icon:K.JO},inject:["nextTick"],mixins:[ge.Z,ve.Z],data:()=>({customerResults:[]}),computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewCustomer(){new F.u_(document.getElementById("addCustomerModal")).show()},loadCustomerResults(){us.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list/`).then((e=>{this.customerResults=e.data})).catch((e=>{this.showErrorModal(e,this.destination)}))},removeCustomer(e){this.customerResults=this.customerResults.filter((t=>t.pk!==e))},updateCustomerResults(e){this.customerResults=e}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadCustomerResults()}))}},bs=(0,qe.Z)(ms,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("customers-list-module"),d=(0,s.up)("add-customer-wizard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.userIcon},null,8,["icon"]),(0,s.Uk)(" Customers ")]),(0,s._)("p",Bi," Below are a list of customers who are stakeholders to this "+(0,Be.toDisplayString)(e.destination)+". ",1),(0,s.kq)(" CUSTOMER RESULTS CARDS "),0==n.customerResults.length?((0,s.wg)(),(0,s.iD)("div",xi,Ei)):((0,s.wg)(),(0,s.iD)("div",Ni,[(0,s.Wm)(r,{"customer-results":n.customerResults,onRemove_customer:t[0]||(t[0]=e=>o.removeCustomer(e))},null,8,["customer-results"])])),(0,s.kq)(" ADD CUSTOMER BUTTON "),Wi,(0,s._)("div",Zi,[(0,s._)("div",Pi,[e.userLevel>1?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>o.addNewCustomer&&o.addNewCustomer(...e))}," Add Customer ")):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" MODALS "),(0,s.Wm)(d,{"location-id":e.locationId,destination:e.destination,"exclude-customers":n.customerResults,onUpdate_customer_results:t[2]||(t[2]=e=>o.updateCustomerResults(e))},null,8,["location-id","destination","exclude-customers"])])}]]);var ks=i(5329);const hs={class:"text-instructions"},ps={key:0,class:"spacer"},_s={class:"alert alert-dark"},gs={key:1},vs={class:"table"},ys=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,"Bug Description"),(0,s._)("td",null,"Status")])],-1),Ls=["href"],fs=(0,s._)("div",{class:"spacer"},null,-1),ws={class:"small-text"},js={key:0,class:"remove-link"},qs=(0,s._)("hr",null,null,-1),Is={class:"row submit-row"},Ss={class:"col-md-12"},Ds={class:"modal fade",id:"addBugModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Rs={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Ms={class:"modal-content"},Cs={class:"modal-header"},Ts=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addBugsCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),Us={class:"modal-body"},Os={class:"row"},$s={class:"col-md-4"},Bs=(0,s._)("strong",null,"Adding Bugs",-1),xs={class:"text-instructions"},Es={class:"col-md-8"},Ns={class:"form-group"},Ws=(0,s._)("label",null,"Bug Client",-1),Zs=(0,s._)("br",null,null,-1),Ps={class:"form-group"},As=(0,s._)("label",null,"Search Keywords",-1),Fs=["disabled"],Ks=(0,s._)("br",null,null,-1),Hs={key:0,class:"no-search"},zs=(0,s._)("strong",null,"Currently Searching for Bugs",-1),Js=(0,s._)("br",null,null,-1),Vs=["src"],Gs={key:1,class:"no-search"},Ys=(0,s._)("strong",null,"No Search Results Sorry",-1),Qs=(0,s._)("br",null,null,-1),Xs=["src"],el={key:2,id:"bug_results_div"},tl={class:"table"},il=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td"),(0,s._)("td",null,"Bug Description"),(0,s._)("td",null,"Bug Status")])],-1),sl=["id"],ll=["onClick"],nl=(0,s._)("div",{class:"spacer"},null,-1),ol={class:"small-text"},al={class:"small-text"},rl=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1),dl={name:"AddBugWizard",components:{Icon:K.JO,NSelect:pe.Z},inject:["nextTick"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,we.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[ge.Z,ve.Z],data:()=>({bugClientModel:"",bugClientList:[],bugResults:[],searchModel:"",searchOn:!1,searchTimer:""}),methods:{loadBugClientList(){z().post(`${this.rootUrl}object_data/bug_client_list/`).then((e=>{this.bugClientList=e.data.map((e=>({value:e.pk,label:e.fields.bug_client_name})))}))},startSearchTimer(){""!==this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.startSearch()}),700)},startSearch(){if(""===this.searchModel)return;this.searchOn=!0;const e=new FormData;e.set("bug_client_id",this.bugClientModel),e.set("search",this.searchModel),z().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/query_bug_client/`,e).then((e=>{this.bugResults=e.data,this.searchOn=!1})).catch((e=>{this.showErrorModal(e,this.destination)}))},submitBug(e){const t=document.getElementById(`bug_no_${e}`);t.innerHTML="Adding Bug";const i=this.bugResults.filter((t=>t.id==e)),s=new FormData;s.set("bug_client",this.bugClientModel),s.set("bug_id",e),s.set("bug_description",i[0].summary),s.set("bug_status",i[0].status),z().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_bug/`,s).then((e=>{this.$emit("append_bug_list",e.data),t.innerHTML="Done"})).catch((e=>{this.showErrorModal(e,this.destination)}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadBugClientList()}))}},cl={name:"BugsModule",components:{AddBugWizard:(0,qe.Z)(dl,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",Ds,[(0,s._)("div",Rs,[(0,s._)("div",Ms,[(0,s._)("div",Cs,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.usersIcon},null,8,["icon"]),(0,s.Uk)(" Add Bugs Wizard ")]),Ts]),(0,s._)("div",Us,[(0,s._)("div",Os,[(0,s._)("div",$s,[Bs,(0,s._)("p",xs," Select which bug client you want to search data from. Then use keywords or bug id to search for the required bugs. Once the search results appear, select those appropriate bugs that you want to link to the "+(0,Be.toDisplayString)(i.destination)+". ",1)]),(0,s._)("div",Es,[(0,s.kq)(" Bug Client List "),(0,s._)("div",Ns,[Ws,(0,s.Wm)(r,{options:n.bugClientList,label:"bug_client_name",option:"bug_client_id",value:n.bugClientModel,"onUpdate:value":t[0]||(t[0]=e=>n.bugClientModel=e)},null,8,["options","value"])]),Zs,(0,s.kq)(" Search Keywords "),(0,s._)("div",Ps,[As,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchModel=e),class:"form-control",disabled:""==n.bugClientModel,onKeydown:t[2]||(t[2]=(...e)=>o.startSearchTimer&&o.startSearchTimer(...e)),maxlength:"50"},null,40,Fs),[[J.vModelText,n.searchModel]])]),Ks,(0,s.kq)(" The Search Results "),n.searchOn?((0,s.wg)(),(0,s.iD)("div",Hs,[zs,Js,(0,s._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/online_connection.svg`,alt:"Placeholder Search Image"},null,8,Vs)])):0==n.bugResults.length?((0,s.wg)(),(0,s.iD)("div",Gs,[Ys,Qs,(0,s._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/road_to_knowledge.svg`,alt:"Placeholder Search Image"},null,8,Xs)])):((0,s.wg)(),(0,s.iD)("div",el,[(0,s._)("table",tl,[il,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.bugResults,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",{id:`bug_no_${e.id}`},[(0,s._)("a",{href:"javascript:void(0)",onClick:t=>o.submitBug(e.id)}," Add Bug ",8,ll)],8,sl),(0,s._)("td",null,[(0,s.Uk)((0,Be.toDisplayString)(e.summary)+" ",1),nl,(0,s._)("p",ol," Assigned to: "+(0,Be.toDisplayString)(e.assigned_to),1),(0,s._)("p",al," Bug No. "+(0,Be.toDisplayString)(e.id)+" | Priority. "+(0,Be.toDisplayString)(e.priority),1)]),(0,s._)("td",null,(0,Be.toDisplayString)(e.status),1)])))),128))])])]))])])]),rl])])])}]]),Icon:K.JO},inject:["nextTick"],mixins:[ge.Z,ve.Z],data:()=>({bugList:[]}),computed:{...(0,we.Se)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewBug(){new F.u_(document.getElementById("addBugModal")).show()},appendBugList(e){let t=e[0].fields;t.bug_id=e[0].pk,this.bugList.push(t)},getBugHyperLink:e=>"Bugzilla"===e.bug_client__list_of_bug_client__bug_client_name?`${e.bug_client__bug_client_url}/show_bug.cgi?id=${e.bug_code}`:"javascript:void(0)",getBugList(){"requirement_item"!==this.destination&&z().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/bug_list/`).then((e=>{this.bugList=[],e.data.forEach((e=>{this.bugList.push(e)}))})).catch((e=>{this.showErrorModal(e,this.destination)}))},removeBug(e){const t=new FormData;t.set("bug_id",e),z().post(`${this.rootUrl}object_data/delete_bug/`,t).then((()=>{this.bugList=this.bugList.filter((t=>t.bug_id!==e))}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.getBugList()}))}},ul=(0,qe.Z)(cl,[["render",function(e,t,i,l,n,o){const a=(0,s.up)("Icon"),r=(0,s.up)("add-bug-wizard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(a,{icon:e.icons.bugIcon},null,8,["icon"]),(0,s.Uk)(" Bugs List ")]),(0,s._)("p",hs," The following is a list of bugs associated with this "+(0,Be.toDisplayString)(e.destination),1),(0,s.kq)(" TABLE OF BUGS "),0===n.bugList.length?((0,s.wg)(),(0,s.iD)("div",ps,[(0,s._)("div",_s," Sorry - there are no bugs associated with this "+(0,Be.toDisplayString)(e.destination),1)])):((0,s.wg)(),(0,s.iD)("div",gs,[(0,s._)("table",vs,[ys,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.bugList,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.pk},[(0,s._)("td",null,[(0,s._)("a",{href:o.getBugHyperLink(t),rel:"noopener noreferrer",target:"_blank"},[(0,s._)("p",null,(0,Be.toDisplayString)(t.bug_description),1),fs,(0,s._)("p",ws," Bug No. "+(0,Be.toDisplayString)(t.bug_code)+" - "+(0,Be.toDisplayString)(t.bug_client__bug_client_name),1)],8,Ls)]),(0,s._)("td",null,[(0,s.Uk)((0,Be.toDisplayString)(t.bug_status)+" ",1),e.userLevel>=2?((0,s.wg)(),(0,s.iD)("span",js,[(0,s.Wm)(a,{icon:e.icons.trashCan,onClick:e=>o.removeBug(t.bug_id)},null,8,["icon","onClick"])])):(0,s.kq)("v-if",!0)])])))),128))])])])),(0,s.kq)(" Add Bug Button "),(0,s.kq)(" TO DO - limit it to certain users "),qs,(0,s._)("div",Is,[(0,s._)("div",Ss,[e.userLevel>1?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>o.addNewBug&&o.addNewBug(...e))}," Add Bug ")):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" Modals "),(0,s.Wm)(r,{destination:e.destination,"location-id":e.locationId,onAppend_bug_list:t[1]||(t[1]=e=>o.appendBugList(e))},null,8,["destination","location-id"])])}]]);var ml=i(1398),bl=i(624);const kl={name:"ParentModules",components:{BugsModule:ul,CustomersModule:bs,DocumentsModule:Zt.Z,GroupsAndUsersModule:B.Z,ListTagsModule:ks.Z,NotesModule:ml.Z,ObjectLinks:$i,RequirementItemLinksModule:St,RequirementItemsModule:De,RequirementLinksModule:Wt},mixins:[bl.Z],props:{destination:{type:String,default:""},locationId:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userLevel:{type:Number,default:0}},data:()=>({}),methods:{},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},hl=(0,qe.Z)(kl,[["render",function(e,t,i,B,x,E){const N=(0,s.up)("groups-and-users-module"),W=(0,s.up)("requirement-items-module"),Z=(0,s.up)("requirement-links-module"),P=(0,s.up)("requirement-item-links-module"),A=(0,s.up)("documents-module"),F=(0,s.up)("object-links"),K=(0,s.up)("customers-module"),H=(0,s.up)("bugs-module"),z=(0,s.up)("list-tags-module"),J=(0,s.up)("notes-module"),V=(0,s.up)("n-config-provider");return(0,s.wg)(),(0,s.j4)(V,{theme:e.getTheme(i.theme)},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",n,[(0,s._)("ul",o,[(0,s.kq)(" GROUPS AND USERS "),(0,s.kq)(" Don't need to show to requirement items - as permissions are gained from parent requirement "),"requirement_item"!==i.destination?((0,s.wg)(),(0,s.iD)("li",a,r)):(0,s.kq)("v-if",!0),(0,s.kq)(" REQUIREMENT ITEMS "),"requirement"===i.destination?((0,s.wg)(),(0,s.iD)("li",d,c)):(0,s.kq)("v-if",!0),(0,s.kq)(" REQUIREMENT LINKS "),"requirement"===i.destination?((0,s.wg)(),(0,s.iD)("li",u,m)):(0,s.kq)("v-if",!0),(0,s.kq)(" REQUIREMENT ITEM LINKS "),"requirement_item"===i.destination?((0,s.wg)(),(0,s.iD)("li",b,k)):(0,s.kq)("v-if",!0),(0,s.kq)(" DOCUMENTS "),h,(0,s.kq)(" LINKED OBJECTS "),"requirement"!==i.destination&&"requirement_item"!==i.destination?((0,s.wg)(),(0,s.iD)("li",p,_)):(0,s.kq)("v-if",!0),(0,s.kq)(" CUSTOMERS "),(0,s.kq)(" Customers are not needed by requirement items as the parent requirements take care of this "),"requirement_item"!==i.destination?((0,s.wg)(),(0,s.iD)("li",g,v)):(0,s.kq)("v-if",!0),(0,s.kq)(" BUGS "),(0,s.kq)(" This module will only appear for project, task, and requirement "),["project","task","requirement"].includes(i.destination)?((0,s.wg)(),(0,s.iD)("li",y,L)):(0,s.kq)("v-if",!0),(0,s.kq)(" MISC "),f,(0,s.kq)(" Notes "),w]),j,(0,s._)("div",q,["requirement_item"!==i.destination?((0,s.wg)(),(0,s.iD)("div",I,[(0,s.Wm)(N)])):(0,s.kq)("v-if",!0),"requirement"===i.destination?((0,s.wg)(),(0,s.iD)("div",S,[(0,s.Wm)(W)])):(0,s.kq)("v-if",!0),"requirement"===i.destination?((0,s.wg)(),(0,s.iD)("div",D,[(0,s.Wm)(Z)])):"requirement_item"===i.destination?((0,s.wg)(),(0,s.iD)("div",R,[(0,s.Wm)(P)])):(0,s.kq)("v-if",!0),(0,s._)("div",M,[(0,s.Wm)(A)]),(0,s._)("div",C,[(0,s.Wm)(F)]),(0,s._)("div",T,[(0,s.Wm)(K)]),(0,s._)("div",U,[(0,s.Wm)(H)]),(0,s._)("div",O,[(0,s.Wm)(z)]),(0,s._)("div",$,[(0,s.Wm)(J)])])])])])),_:1},8,["theme"])}]])},1626:(e,t,i)=>{i.d(t,{Z:()=>v});var s=i(6252),l=i(3577);const n={key:0},o={class:"col-md-10 object-link--details"},a=["href"],r={class:"object-link--link"},d={class:"object-link--title"},c={class:"col-md-2 object-link--status"},u=(0,s._)("span",null,"Object Status: ",-1),m={key:0,class:"object-link--remove"},b={key:1,class:"spacer-extra"};var k=i(989),h=i(6542),p=i(3138),_=i(5808);i(9669);const g={name:"SubObjectLinks",components:{Icon:h.JO},emits:["update_link_results"],mixins:[_.Z],props:{canDelete:{type:Boolean,default:!0},linkResults:{type:Array,default:()=>[]},title:{type:String,default:"Relates"}},computed:{...(0,k.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{confirmRemoveLink(e){this.$store.commit("updateObjectLink",{objectLink:e}),new p.u_(document.getElementById("confirmLinkDeleteModal")).show()}}},v=(0,i(3744).Z)(g,[["render",function(e,t,i,k,h,p){const _=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)(s.HY,null,[i.linkResults.length>0?((0,s.wg)(),(0,s.iD)("h3",n,(0,l.toDisplayString)(i.title),1)):(0,s.kq)("v-if",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.linkResults,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.pk,class:"row object-link"},[(0,s.kq)(" Object ID + Title "),(0,s._)("div",o,[(0,s._)("a",{href:`${this.rootUrl}${t.object_type}_information/${t.object_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,s._)("div",r,(0,l.toDisplayString)(t.object_type)+" - "+(0,l.toDisplayString)(t.object_id),1),(0,s._)("div",d,(0,l.toDisplayString)(t.object_title),1)],8,a)]),(0,s.kq)(" Object Status "),(0,s._)("div",c,[u,(0,s._)("span",null,(0,l.toDisplayString)(t.object_status),1)]),(0,s.kq)(" Object Delete "),e.userLevel>=2&&!0===i.canDelete?((0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)(_,{icon:e.icons.trashCan,onClick:e=>p.confirmRemoveLink(t)},null,8,["icon","onClick"])])):(0,s.kq)("v-if",!0)])))),128)),i.linkResults.length>0?((0,s.wg)(),(0,s.iD)("div",b)):(0,s.kq)("v-if",!0)],64)}]])},7819:(e,t,i)=>{i.d(t,{Z:()=>p});var s=i(6252),l=i(3577);const n={class:"object-card-list"},o={class:"object-card--detail"},a=["href"],r={class:"object-card--detail--link"},d={class:"object-card--detail--description"},c={class:"object-card--status"},u={class:"object-card--status--status"},m={class:"small-text"};var b=i(431),k=i(989);const h={name:"RenderObjectCard",props:{destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},searchResults:{type:Array,default:()=>[]}},mixins:[b.Z],computed:{...(0,k.Se)({rootUrl:"getRootUrl"})}},p=(0,i(3744).Z)(h,[["render",function(e,t,i,b,k,h){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("h2",null,(0,l.toDisplayString)(i.importVariables.header),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.searchResults,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"object-card",key:t.pk},[(0,s._)("div",o,[(0,s._)("a",{href:`${e.rootUrl}${i.destination}_information/${t[i.importVariables.id]}/`},[(0,s._)("div",r,(0,l.toDisplayString)(i.importVariables.prefix)+(0,l.toDisplayString)(t[i.importVariables.id]),1),(0,s._)("div",d,(0,l.toDisplayString)(t[i.importVariables.title]),1)],8,a)]),(0,s._)("div",c,[(0,s._)("div",u,(0,l.toDisplayString)(t[i.importVariables.status]),1),(0,s._)("p",m,(0,l.toDisplayString)(e.getNiceDate(t[i.importVariables.end_date])),1)])])))),128))])}]])},431:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(7126);const l={methods:{getNiceDate:e=>""===e||null==e?"":s.ou.fromISO(e).toLocaleString(s.ou.DATETIME_MED),disableDate(e){const t=new Date;return t.setMilliseconds(0),t.setSeconds(0),t.setHours(0),e<=t.getTime()-36e5}}}}}]);