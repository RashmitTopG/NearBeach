"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8067],{3044:(e,t,s)=>{s.r(t),s.d(t,{default:()=>pl});var i=s(641);const l={class:"card"},a={class:"card-body"},n={class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},o={key:0,class:"nav-item",role:"presentation"},r=[(0,i.Lk)("button",{class:"nav-link active",id:"group-and-user-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Groups and Users ",-1)],d={key:1,class:"nav-item",role:"presentation"},c=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-item-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-items",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Item ",-1)],u={key:2,class:"nav-item",role:"presentation"},m=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Links ",-1)],k={key:3,class:"nav-item",role:"presentation"},b=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-item-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-item-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Links ",-1)],h=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"documents-tab","data-bs-toggle":"tab","data-bs-target":"#documents",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Documents ")],-1),p={key:4,class:"nav-item",role:"presentation"},L=[(0,i.Lk)("button",{class:"nav-link",id:"object-link-tabs","data-bs-toggle":"tab","data-bs-target":"#object-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Linked Objects ",-1)],g={key:5,class:"nav-item",role:"presentation"},v=[(0,i.Lk)("button",{class:"nav-link",id:"customer-tab","data-bs-toggle":"tab","data-bs-target":"#customers",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Customers ",-1)],_={key:6,class:"nav-item",role:"presentation"},y=[(0,i.Lk)("button",{class:"nav-link",id:"bug-tab","data-bs-toggle":"tab","data-bs-target":"#bugs",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Bugs ",-1)],f=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"misc-tab","data-bs-toggle":"tab","data-bs-target":"#misc",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Misc ")],-1),I=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#notes",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Notes ")],-1),C=(0,i.Lk)("hr",null,null,-1),w={class:"tab-content",id:"misc_module_content"},j={key:0,class:"tab-pane fade show active",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},R={key:1,class:"tab-pane fade",id:"requirement-items",role:"tabpanel","aria-labelledby":"home-tab"},S={key:2,class:"tab-pane fade",id:"requirement-links",role:"tabpanel","aria-labelledby":"profile-tab"},E={key:3,class:"tab-pane fade",id:"requirement-item-links",role:"tabpanel","aria-labelledby":"profile-tab"},$={class:"tab-pane fade",id:"documents",role:"tabpanel","aria-labelledby":"contact-tab"},M={class:"tab-pane fade",id:"object-links",role:"tabpanel","aria-labelledby":"contact-tab"},T={class:"tab-pane fade",id:"customers",role:"tabpanel","aria-labelledby":"contact-tab"},x={class:"tab-pane fade",id:"bugs",role:"tabpanel","aria-labelledby":"contact-tab"},U={class:"tab-pane fade",id:"misc",role:"tabpanel","aria-labelledby":"contact-tab"},q={class:"tab-pane fade",id:"notes",role:"tabpanel","aria-labelledby":"contact-tab"};var D=s(5675);const F=(0,i.Lk)("p",{class:"text-instructions"}," Requirements should be broken down into smaller components called Requirement Items. ",-1),O={key:0,class:"requirement-item-spacer"},B=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Items for this requirement. ",-1)],A={key:1},Q={key:2},N={key:3,class:"row submit-row"},X={class:"col-md-12"};var P=s(9336),W=s(2321),K=s(3751);const z={class:"modal fade",id:"newItemModal",tabindex:"-1","aria-labelledby":"requirementItemModal","aria-hidden":"true"},H={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},G={class:"modal-content"},V={class:"modal-header"},J=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementItemCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1),Y={class:"modal-body"},Z={class:"row"},ee=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Description"),(0,i.Lk)("p",{class:"text-instructions"}," Place in a detailed description of this requirement item. This particular item can be then connected to Project or Tasks. ")],-1),te={class:"col-md-8"},se={for:"id_requirement_item_title"},ie=(0,i.Lk)("br",null,null,-1),le=(0,i.Lk)("br",null,null,-1),ae=(0,i.Lk)("hr",null,null,-1),ne={class:"row"},oe=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("h2",null,"Status"),(0,i.Lk)("p",{class:"text-instructions"}," Set the Requirement Status and Type here. ")],-1),re={class:"col-md-4"},de={class:"form-group"},ce={class:"col-md-4"},ue={class:"form-group"},me={class:"modal-footer"},ke=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var be=s(1080),he=s(8838),pe=s(2243),Le=s(9639),ge=s(3855),ve=s(404),_e=s(2124);const ye={name:"NewRequirementItemWizard",setup:()=>({v$:(0,Le.Ay)()}),components:{editor:he.A,Icon:W.In,NSelect:be.A,ValidationRendering:ve.A},mixins:[pe.A],data:()=>({requirementItemScopeModel:"",requirementItemTitleModel:"",statusItemFixList:[],statusItemModel:"",typeItemFixList:[],typeItemModel:""}),computed:{...(0,_e.L8)({contentCss:"getContentCss",locationId:"getLocationId",rootUrl:"getRootUrl",skin:"getSkin"})},validations:{requirementItemScopeModel:{required:ge.mw,maxLength:(0,ge.Ru)(63e4)},requirementItemTitleModel:{required:ge.mw},statusItemModel:{required:ge.mw},typeItemModel:{required:ge.mw}},methods:{saveItem(){if(this.v$.$touch(),this.v$.$invalid)return;const e=new FormData;e.set("requirement_item_title",this.requirementItemTitleModel),e.set("requirement_item_scope",this.requirementItemScopeModel),e.set("requirement_item_status",this.statusItemModel),e.set("requirement_item_type",this.typeItemModel),this.axios.post(`${this.rootUrl}new_requirement_item/save/${this.locationId}/`,e).then((e=>{this.requirementItemScopeModel="",this.requirementItemTitleModel="",this.statusItemModel="",this.typeItemModel="",this.$emit("new_item_added",e.data),document.getElementById("requirementItemCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to save item",message:`Failed to save item. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateStatusList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_status_values/`).then((e=>{this.statusItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_status})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Status List",message:`There was an error updating the status list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateTypeList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_type_values/`).then((e=>{this.typeItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_type})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Type List",message:`There was an error updating the type list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateStatusList(),this.updateTypeList()}))}};var fe=s(6262);const Ie=(0,fe.A)(ye,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("validation-rendering"),d=(0,i.g2)("editor"),c=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",z,[(0,i.Lk)("div",H,[(0,i.Lk)("div",G,[(0,i.Lk)("div",V,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.clipboardIcon},null,8,["icon"]),(0,i.eW)(" New Requirement Item Wizard ")]),J]),(0,i.Lk)("div",Y,[(0,i.Lk)("div",Z,[ee,(0,i.Lk)("div",te,[(0,i.Lk)("label",se,[(0,i.eW)("Requirement Item Title: "),(0,i.bF)(r,{"error-list":l.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bo)((0,i.Lk)("input",{id:"id_requirement_item_title",class:"form-control",name:"requirement_item_title",type:"text",required:"true",maxlength:"255","onUpdate:modelValue":t[0]||(t[0]=e=>a.requirementItemTitleModel=e)},null,512),[[K.vModelText,a.requirementItemTitleModel]]),ie,(0,i.Lk)("label",null,[(0,i.eW)(" Requirement Item Scope: "),(0,i.bF)(r,{"error-list":l.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),le,(0,i.bF)(d,{init:{height:500,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:a.requirementItemScopeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>a.requirementItemScopeModel=e)},null,8,["init","modelValue"])])]),(0,i.Q3)(" Status "),ae,(0,i.Lk)("div",ne,[oe,(0,i.Lk)("div",re,[(0,i.Lk)("div",de,[(0,i.Lk)("label",null,[(0,i.eW)("Requirement Status "),(0,i.bF)(r,{"error-list":l.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bF)(c,{options:a.statusItemFixList,label:"status",value:a.statusItemModel,"onUpdate:value":t[2]||(t[2]=e=>a.statusItemModel=e)},null,8,["options","value"])])]),(0,i.Lk)("div",ce,[(0,i.Lk)("div",ue,[(0,i.Lk)("label",null,[(0,i.eW)("Requirement Type "),(0,i.bF)(r,{"error-list":l.v$.typeItemModel.$errors},null,8,["error-list"])]),(0,i.bF)(c,{options:a.typeItemFixList,label:"type",value:a.typeItemModel,"onUpdate:value":t[3]||(t[3]=e=>a.typeItemModel=e)},null,8,["options","value"])])])])]),(0,i.Q3)(" FOOTERS "),(0,i.Lk)("div",me,[ke,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>n.saveItem&&n.saveItem(...e))}," Save Requirement Item ")])])])])}]]),Ce={name:"RequirementItemsModule",components:{RenderObjectCard:s(1378).A,Icon:W.In,NewRequirementItemWizard:Ie},mixins:[pe.A],data:()=>({requirementItemVariables:{header:"Requirement Items",prefix:"RI-",id:"requirement_item_id",title:"requirement_item_title",status:"requirement_item_status_text",end_date:""},itemResults:[],itemStatusList:[],itemTypeList:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{createNewItem(){new P.aF(document.getElementById("newItemModal")).show()},newItemAdded(e){this.itemResults=e},updateItemResults(){this.axios.post("data/items/").then((e=>{this.itemResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Item Results",message:`We are having issues updating item results: Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.updateItemResults()}},we=(0,fe.A)(Ce,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("render-object-card"),d=(0,i.g2)("new-requirement-item-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.clipboardIcon},null,8,["icon"]),(0,i.eW)(" Requirement Items ")]),F,(0,i.Q3)(" TABLE OF REQUIREMENT ITEMS "),0===a.itemResults.length?((0,i.uX)(),(0,i.CE)("div",O,B)):((0,i.uX)(),(0,i.CE)("div",A,[(0,i.bF)(r,{"import-variables":a.requirementItemVariables,destination:"requirement_item","search-results":a.itemResults},null,8,["import-variables","search-results"])])),(0,i.Q3)(" Submit Button "),(0,i.Q3)(" TO DO - limit it to certain users "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",Q)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("div",X,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.createNewItem&&n.createNewItem(...e)),class:"btn btn-primary save-changes"}," Create new Requirement Item ")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" NEW REQUIREMENT ITEM MODAL "),(0,i.bF)(d,{"item-status-list":a.itemStatusList,"item-type-list":a.itemTypeList,"location-id":e.locationId,onNew_item_added:t[1]||(t[1]=e=>n.newItemAdded(e))},null,8,["item-status-list","item-type-list","location-id"])])}]]),je=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1),Re={key:0},Se=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)],Ee={key:1},$e={key:2},Me={key:3,class:"row submit-row"},Te={class:"col-md-12"};var xe=s(33);const Ue={class:"modal fade",id:"newRequirementLinkModal",tabindex:"-1","aria-labelledby":"requirementLinkModal","aria-hidden":"true"},qe={class:"modal-dialog modal-lg"},De={class:"modal-content"},Fe={class:"modal-header"},Oe=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1),Be={class:"modal-body"},Ae={class:"row"},Qe=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Object Selector"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),Ne={class:"col-md-8"},Xe={class:"form-group"},Pe=(0,i.Lk)("label",null,"Object Selection",-1),We=(0,i.Lk)("hr",null,null,-1),Ke={class:"row"},ze=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Select Links"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),He={class:"col-md-8"},Ge={key:0,id:"link_wizard_results"},Ve=["src"],Je={key:1,class:"alert alert-warning"},Ye={key:2,class:"form-group"},Ze=(0,i.Lk)("label",null,"Search Terms",-1),et=(0,i.Lk)("br",null,null,-1),tt={key:3,class:"table"},st=(0,i.Lk)("td",null,"Status",-1),it={class:"form-check"},lt=["value","id"],at=["for"],nt=(0,i.Lk)("div",{class:"spacer"},null,-1),ot={class:"small-text"},rt={class:"modal-footer"},dt=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ct=["disabled"],ut={name:"NewRequirementLinkWizard",components:{Icon:W.In,NSelect:be.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[pe.A],data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),this.axios.post(`${this.rootUrl}${this.destination}_information/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_module",e.data),document.getElementById("requirementLinkCloseButton").click(),this.objectModel=null}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.$store.dispatch("newToast",{header:"Error retrieving links",message:"We are currently having issues obtaining data",delay:0,extra_classes:"bg-danger"})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let t="";return t=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),t.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},mt=(0,fe.A)(ut,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Ue,[(0,i.Lk)("div",qe,[(0,i.Lk)("div",De,[(0,i.Lk)("div",Fe,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkOut},null,8,["icon"]),(0,i.eW)(" New Requirement Link Wizard ")]),Oe]),(0,i.Lk)("div",Be,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",Ae,[Qe,(0,i.Lk)("div",Ne,[(0,i.Lk)("div",Xe,[Pe,(0,i.bF)(r,{options:a.objectSelection,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),class:"object-selection"},null,8,["options","value"])])])]),We,(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",Ke,[ze,(0,i.Lk)("div",He,[(0,i.Q3)(" LOADING PLACEHOLDER "),a.isSearching||null==a.objectModel?((0,i.uX)(),(0,i.CE)("div",Ge,[(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,Ve)])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Je," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SEARCH RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Ye,[Ze,(0,i.bo)((0,i.Lk)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchTermModel=e),type:"text"},null,512),[[K.vModelText,a.searchTermModel]])])):(0,i.Q3)("v-if",!0),et,(0,i.Q3)(" TABLE CONTAINING RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("table",tt,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,(0,xe.toDisplayString)(a.objectModel)+" Description",1),st])]),(0,i.Q3)(" PROJECTS "),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectFilteredResults,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("div",it,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:`checkbox_${a.objectModel.toLowerCase()}_${e.id}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e)},null,8,lt),[[K.vModelCheckbox,a.linkModel]]),(0,i.Lk)("label",{class:"form-check-label",for:`checkbox_${a.objectModel.toLowerCase()}_${e.id}`},(0,xe.toDisplayString)(e.description),9,at)]),nt,(0,i.Lk)("p",ot,(0,xe.toDisplayString)(a.objectModel)+" "+(0,xe.toDisplayString)(e.id),1)]),(0,i.Lk)("td",null,(0,xe.toDisplayString)(e.status),1)])))),128))])])):(0,i.Q3)("v-if",!0)])])]),(0,i.Lk)("div",rt,[dt,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0==a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>n.saveLinks&&n.saveLinks(...e))}," Save changes ",8,ct)])])])])}]]),kt={class:"modal fade",id:"confirmLinkDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},bt={class:"modal-dialog"},ht={class:"modal-content"},pt=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmLinkDelete"}," Please confirm Link Deletion "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmLinkDeleteButton"})],-1),Lt=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the link? ",-1),gt={class:"modal-footer"},vt={name:"ConfirmLinkDelete",props:{},computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",objectLink:"getObjectLink",rootUrl:"getRootUrl"})},methods:{deleteLink(){const e=new FormData;e.set("link_id",this.objectLink.object_id),e.set("link_connection",this.objectLink.object_type===this.destination?"meta_object":this.objectLink.object_type),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_link/`,e).then((()=>{this.$emit("update_link_results",{})})),this.closeModal()},closeModal(){document.getElementById("confirmLinkDeleteButton").click()}}},_t=(0,fe.A)(vt,[["render",function(e,t,s,l,a,n){return(0,i.uX)(),(0,i.CE)("div",kt,[(0,i.Lk)("div",bt,[(0,i.Lk)("div",ht,[pt,Lt,(0,i.Lk)("div",gt,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>n.closeModal&&n.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.deleteLink&&n.deleteLink(...e))}," Yes ")])])])])}]]);var yt=s(8297);const ft={name:"RequirementItemLinksModule",components:{ConfirmLinkDelete:_t,Icon:W.In,NewRequirementLinkWizard:mt,SubObjectLinks:yt.A},mixins:[pe.A],data:()=>({itemLinkProject:[],itemLinkTask:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement_item/${this.locationId}/object_link_list/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},newRequirementItemLink(){new P.aF(document.getElementById("newRequirementLinkModal")).show()}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},It=(0,fe.A)(ft,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("sub-object-links"),d=(0,i.g2)("new-requirement-link-wizard"),c=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkIcon2},null,8,["icon"]),(0,i.eW)(" Requirement Item Links ")]),je,(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Re,Se)):((0,i.uX)(),(0,i.CE)("div",Ee,[(0,i.Q3)(" Project Links "),(0,i.bF)(r,{title:"Project Links","link-results":a.itemLinkProject,onUpdate_link_results:t[0]||(t[0]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(r,{title:"Task Links","link-results":a.itemLinkTask,onUpdate_link_results:t[1]||(t[1]=e=>n.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",$e)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",Me,[(0,i.Lk)("div",Te,[(0,i.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>n.newRequirementItemLink&&n.newRequirementItemLink(...e))},"Create new Link")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" LINKING MODAL "),(0,i.Q3)(" need to build something that resets the requirement links when adding links "),(0,i.bF)(d,{"location-id":e.locationId,destination:e.destination,onUpdate_module:t[3]||(t[3]=e=>n.updateLinkResults(e))},null,8,["location-id","destination"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(c,{onUpdate_link_results:t[4]||(t[4]=e=>n.updateLinkResults(e))})])}]]),Ct=(0,i.Lk)("p",{class:"text-instructions"}," The following are links to other projects/tasks. You can link a Requirement to these other objects to symbolise a connection between the two. ",-1),wt={key:0,class:"requirement-item-spacer"},jt=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)],Rt={key:1},St={key:2,class:"row submit-row"},Et={class:"col-md-12"},$t=(0,i.Lk)("hr",null,null,-1),Mt=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1),Tt={key:3},xt=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)],Ut={key:4},qt={name:"RequirementLinksModule",components:{ConfirmLinkDelete:_t,SubObjectLinks:yt.A,Icon:W.In,NewRequirementLinkWizard:mt},mixins:[pe.A],data:()=>({itemLinkProject:[],itemLinkTask:[],linkProject:[],linkTask:[],linkModel:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{newRequirementLink(){new P.aF(document.getElementById("newRequirementLinkModal")).show()},updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement/${this.locationId}/object_link_list/`).then((e=>{this.linkProject=e.data.filter((e=>"project"===e.object_type)),this.linkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})})),this.axios.post(`${this.rootUrl}requirement_information/${this.locationId}/data/item_links/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1}))),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},Dt=(0,fe.A)(qt,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("sub-object-links"),d=(0,i.g2)("new-requirement-link-wizard"),c=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkIcon},null,8,["icon"]),(0,i.eW)(" Requirement Links ")]),Ct,(0,i.Q3)(" REQUIREMENT LINKS "),a.linkProject.length+a.linkTask.length===0?((0,i.uX)(),(0,i.CE)("div",wt,jt)):((0,i.uX)(),(0,i.CE)("div",Rt,[(0,i.Q3)(" Project Links "),(0,i.bF)(r,{title:"Project Links","link-results":a.linkProject,onUpdate_link_results:t[0]||(t[0]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(r,{title:"Task Links","link-results":a.linkTask,onUpdate_link_results:t[1]||(t[1]=e=>n.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",St,[(0,i.Lk)("div",Et,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>n.newRequirementLink&&n.newRequirementLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])])):(0,i.Q3)("v-if",!0),$t,(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkIcon2},null,8,["icon"]),(0,i.eW)(" Requirement Item Links ")]),Mt,(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Tt,xt)):((0,i.uX)(),(0,i.CE)("div",Ut,[(0,i.Q3)(" Project Links "),(0,i.bF)(r,{title:"Project Links","link-results":a.itemLinkProject,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(r,{title:"Task Links","link-results":a.itemLinkTask,"can-delete":!1},null,8,["link-results"])])),(0,i.Q3)(" LINKING MODAL "),(0,i.bF)(d,{"location-id":e.locationId,destination:"requirement",onUpdate_module:n.updateLinkResults},null,8,["location-id","onUpdate_module"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(c,{onUpdate_link_results:n.updateLinkResults},null,8,["onUpdate_link_results"])])}]]);var Ft=s(8947);const Ot={class:"text-instructions"},Bt={key:0,class:"requirement-item-spacer"},At=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)],Qt={key:1},Nt={class:"row submit-row"},Xt={class:"col-md-12"},Pt=(0,i.Lk)("hr",null,null,-1),Wt={class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"linkModal","aria-hidden":"true"},Kt={class:"modal-dialog modal-lg"},zt={class:"modal-content"},Ht={class:"modal-header"},Gt=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"linkCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1),Vt={class:"modal-body"},Jt={class:"row"},Yt={class:"col-md-4"},Zt=(0,i.Lk)("strong",null,"Object Selector",-1),es={class:"text-instructions"},ts={class:"col-md-8"},ss={key:1,class:"alert alert-success"},is=(0,i.Lk)("hr",null,null,-1),ls={class:"row"},as=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Relationship"),(0,i.Lk)("p",{class:"text-instructions"},' Please select an appropriate relation for the objects. Default is "Relates" ')],-1),ns={class:"col-md-8"},os=(0,i.Lk)("br",null,null,-1),rs=(0,i.Lk)("hr",null,null,-1),ds={class:"row"},cs={class:"col-md-4"},us=(0,i.Lk)("strong",null,"Select Links",-1),ms={class:"text-instructions"},ks={class:"col-md-8"},bs={key:0,id:"link_wizard_results"},hs=["src"],ps={key:1,class:"alert alert-warning"},Ls={key:2,class:"table"},gs=(0,i.Lk)("td",null,"Status",-1),vs={class:"form-check"},_s=["value","id"],ys=["for"],fs=(0,i.Lk)("div",{class:"spacer"},null,-1),Is={class:"small-text"},Cs={class:"modal-footer"},ws=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),js=["disabled"],Rs={name:"NewLinkWizard",components:{Icon:W.In,NSelect:be.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[pe.A],data:()=>({isSearching:!1,objectModel:null,objectRelation:[{value:"relates",label:"Relates To"},{value:"blocked_by",label:"Is Blocked By"},{value:"blocking",label:"Is Currently Blocking"},{value:"sub_object_of",label:"Is Sub Object Of"},{value:"parent_object_of",label:"Is Parent Object Of"},{value:"has_duplicate",label:"Has Duplicate Object Of"},{value:"duplicate_object",label:"Is Duplicate Object Of"}],objectRelationModel:"relates",objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Requirement_Item",label:"Requirement_Item"},{value:"Task",label:"Task"}],linkModel:[]}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),e.set("object_relation",this.objectRelationModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_link/`,e).then((()=>{this.$emit("update_link_results",{}),this.objectModel=null,document.getElementById("linkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.isSearching=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Searching",message:`We got an error searching. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))):this.isSearching=!1}}},Ss=(0,fe.A)(Rs,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Wt,[(0,i.Lk)("div",Kt,[(0,i.Lk)("div",zt,[(0,i.Lk)("div",Ht,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkOut},null,8,["icon"]),(0,i.eW)(" New "+(0,xe.toDisplayString)(s.destination)+" Link Wizard ",1)]),Gt]),(0,i.Lk)("div",Vt,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",Jt,[(0,i.Lk)("div",Yt,[Zt,(0,i.Lk)("p",es," Please select which object you would like to link to this "+(0,xe.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",ts,[a.isSearching?((0,i.uX)(),(0,i.CE)("div",ss," Searching for "+(0,xe.toDisplayString)(a.objectModel)+"s ",1)):((0,i.uX)(),(0,i.Wv)(r,{key:0,options:a.objectSelection,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),is,(0,i.Q3)(" CHOOSE RELATIONSHIP TYPE "),(0,i.Lk)("div",ls,[as,(0,i.Lk)("div",ns,[(0,i.eW)(" Current object "),os,(0,i.bF)(r,{options:a.objectRelation,value:a.objectRelationModel,"onUpdate:value":t[1]||(t[1]=e=>a.objectRelationModel=e),class:"object-selection",disabled:null===a.objectModel},null,8,["options","value","disabled"])])]),rs,(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",ds,[(0,i.Lk)("div",cs,[us,(0,i.Lk)("p",ms," Please select which of the objects you want to connect to this "+(0,xe.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",ks,[(0,i.Q3)(" LOADING PLACEHOLDER "),a.isSearching||null==a.objectModel?((0,i.uX)(),(0,i.CE)("div",bs,[(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,hs)])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",ps," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" TABLE CONTAINING RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("table",Ls,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,(0,xe.toDisplayString)(a.objectModel)+" Description",1),gs])]),(0,i.Q3)(" RENDER RESULTS "),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectResults,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("div",vs,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:`checkbox_${a.objectModel.toLowerCase()}_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e)},null,8,_s),[[K.vModelCheckbox,a.linkModel]]),(0,i.Lk)("label",{class:"form-check-label",for:`checkbox_${a.objectModel.toLowerCase()}_${e.pk}`},(0,xe.toDisplayString)(e.description),9,ys)]),fs,(0,i.Lk)("p",Is,(0,xe.toDisplayString)(a.objectModel)+" "+(0,xe.toDisplayString)(e.id),1)]),(0,i.Lk)("td",null,(0,xe.toDisplayString)(e.status),1)])))),128))])])):(0,i.Q3)("v-if",!0)])])]),(0,i.Lk)("div",Cs,[ws,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>n.saveLinks&&n.saveLinks(...e))}," Save changes ",8,js)])])])])}]]),Es={name:"ObjectLinks",components:{ConfirmLinkDelete:_t,Icon:W.In,NewLinkWizard:Ss,SubObjectLinks:yt.A},mixins:[pe.A],data:()=>({hasDuplicateObjectOf:[],isBlockedBy:[],isCurrentlyBlocking:[],isDuplicateObjectOf:[],isParentOf:[],isSubObjectOf:[],kanbanCard:[],linkResults:[],relatesTo:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{isLinkedObject(e){let t=!1;return null!==e.fields.project&&(t=!0),null!==e.fields.task&&(t=!0),null!==e.fields.requirement&&(t=!0),t},newLink(){new P.aF(document.getElementById("newLinkModal")).show()},updateLinkResults(){this.linkResults=[],this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/object_link_list/`).then((e=>{this.linkResults=e.data,this.relatesTo=e.data.filter((e=>"Relate"===e.link_relationship||null===e.link_relationship)),this.isBlockedBy=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.kanbanCard=e.data.filter((e=>"Card"===e.link_relationship)),this.isCurrentlyBlocking=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isSubObjectOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.isParentOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.hasDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s}))})).catch((e=>{this.$store.dispatch("newToast",{heading:"Object Links failed to get data",message:`Failed to get data - Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},$s=(0,fe.A)(Es,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("sub-object-links"),d=(0,i.g2)("new-link-wizard"),c=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkOut},null,8,["icon"]),(0,i.eW)(" "+(0,xe.toDisplayString)(e.destination)+" Links ",1)]),(0,i.Lk)("p",Ot," The following are links to other objects like projects/tasks/requirements. You can link a "+(0,xe.toDisplayString)(e.destination)+" to these other objects to symbolise a connection between the two. ",1),(0,i.Q3)(" OBJECT LINKS "),0===a.linkResults.length?((0,i.uX)(),(0,i.CE)("div",Bt,At)):((0,i.uX)(),(0,i.CE)("div",Qt,[(0,i.Q3)(" Relates To "),(0,i.bF)(r,{title:"Relates To","link-results":a.relatesTo,onUpdate_link_results:t[0]||(t[0]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Kanban Cards "),(0,i.bF)(r,{title:"Kanban Cards","link-results":a.kanbanCard,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Is Blocked By "),(0,i.bF)(r,{title:"Is Blocked By","link-results":a.isBlockedBy,onUpdate_link_results:t[1]||(t[1]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Currently Blocking "),(0,i.bF)(r,{title:"Is Currently Blocking","link-results":a.isCurrentlyBlocking,onUpdate_link_results:t[2]||(t[2]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Sub Object Of "),(0,i.bF)(r,{title:"Is Subobject Of","link-results":a.isSubObjectOf,onUpdate_link_results:t[3]||(t[3]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Parent Object Of "),(0,i.bF)(r,{title:"Is Parent Object Of","link-results":a.isParentOf,onUpdate_link_results:t[4]||(t[4]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Has Duplicate Object Of "),(0,i.bF)(r,{title:"Has Duplicate Object Of","link-results":a.hasDuplicateObjectOf,onUpdate_link_results:t[5]||(t[5]=e=>n.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Duplicate Object Of "),(0,i.bF)(r,{title:"Is Duplicate Object Of","link-results":a.isDuplicateObjectOf,onUpdate_link_results:t[6]||(t[6]=e=>n.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),(0,i.Lk)("div",Nt,[(0,i.Lk)("div",Xt,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>n.newLink&&n.newLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])]),Pt,(0,i.Q3)(" MODAL FOR NEW OBJECT LINKS "),(0,i.bF)(d,{destination:e.destination,"location-id":e.locationId,onUpdate_link_results:n.updateLinkResults},null,8,["destination","location-id","onUpdate_link_results"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(c,{onUpdate_link_results:n.updateLinkResults},null,8,["onUpdate_link_results"])])}]]),Ms={class:"text-instructions"},Ts={key:0},xs=[(0,i.Lk)("div",{class:"customers-module-spacer"},[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no customers. Please add them by clicking on the button below ")],-1)],Us={key:1},qs=(0,i.Lk)("hr",null,null,-1),Ds={class:"row submit-row"},Fs={class:"col-md-12"};var Os=s(7023);const Bs={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},As={class:"modal-dialog modal-lg"},Qs={class:"modal-content"},Ns={class:"modal-header"},Xs=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1),Ps={class:"modal-body"},Ws={key:0,class:"row"},Ks={class:"col-md-4"},zs=(0,i.Lk)("strong",null,"Select Customer",-1),Hs={class:"text-instructions"},Gs={class:"col-md-8"},Vs={key:1,class:"row"},Js=(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("strong",null,"Sorry - no results"),(0,i.Lk)("p",{class:"text-instructions"}," This could be because "),(0,i.Lk)("ul",{class:"text-instructions"},[(0,i.Lk)("li",null,"There are no more customers left to add"),(0,i.Lk)("li",null," There are no customers for this organisation ")])],-1),Ys={class:"col-md-6 no-search"},Zs=["src"],ei={class:"modal-footer"},ti=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),si=["diabled"],ii={name:"AddCustomerWizard",components:{Icon:W.In,NSelect:be.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},excludeCustomers:{type:Array,default:()=>[]}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[pe.A],data:()=>({customerModel:"",customerList:[],customerFixList:[]}),methods:{addCustomer(){const e=new FormData;e.set("customer",this.customerModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_customer/`,e).then((e=>{this.$emit("update_customer_results",e.data),this.customerModel="",document.getElementById("addCustomerCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Customer",message:`We had an issue adding customers. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getCustomerList(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list_all/`).then((e=>{this.customerList=e.data,this.updateCustomerFixList()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Customer List",message:`We had an issue getting customer list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateCustomerFixList(){if(0===this.customerList.length)return;const e=[];this.excludeCustomers.forEach((t=>{e.push(t.pk)})),this.customerFixList=this.customerList.filter((t=>!e.includes(t.pk))).map((e=>({value:e.pk,label:`${e.fields.customer_first_name} ${e.fields.customer_last_name}`})))}},mounted(){!["requirement_item"].indexOf(this.locationId)<0||this.$nextTick((()=>{this.getCustomerList()}))},watch:{excludeCustomers(){this.updateCustomerFixList()}}},li={name:"CustomersModule",components:{AddCustomerWizard:(0,fe.A)(ii,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Bs,[(0,i.Lk)("div",As,[(0,i.Lk)("div",Qs,[(0,i.Lk)("div",Ns,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.usersIcon},null,8,["icon"]),(0,i.eW)(" Add Customers Wizard ")]),Xs]),(0,i.Lk)("div",Ps,[a.customerFixList.length>0?((0,i.uX)(),(0,i.CE)("div",Ws,[(0,i.Lk)("div",Ks,[zs,(0,i.Lk)("p",Hs," Search for a customer who has not been added to this "+(0,xe.toDisplayString)(s.destination)+". If the search is blank there are either no customers that match that search, or all customer have already been added to the "+(0,xe.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",Gs,[(0,i.bF)(r,{options:a.customerFixList,label:"customerName",value:a.customerModel,"onUpdate:value":t[0]||(t[0]=e=>a.customerModel=e)},null,8,["options","value"])])])):((0,i.uX)(),(0,i.CE)("div",Vs,[Js,(0,i.Lk)("div",Ys,[(0,i.Lk)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Zs)])]))]),(0,i.Lk)("div",ei,[ti,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",diabled:""==a.customerModel,onClick:t[1]||(t[1]=(...e)=>n.addCustomer&&n.addCustomer(...e))}," Save changes ",8,si)])])])])}]]),CustomersListModule:Os.A,Icon:W.In},mixins:[pe.A],data:()=>({customerResults:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewCustomer(){new P.aF(document.getElementById("addCustomerModal")).show()},loadCustomerResults(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list/`).then((e=>{this.customerResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Loading Customer Results",message:`We had an issue loading customer results. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},removeCustomer(e){this.customerResults=this.customerResults.filter((t=>t.pk!==e))},updateCustomerResults(e){this.customerResults=e}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadCustomerResults()}))}},ai=(0,fe.A)(li,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("customers-list-module"),d=(0,i.g2)("add-customer-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.userIcon},null,8,["icon"]),(0,i.eW)(" Customers ")]),(0,i.Lk)("p",Ms," Below are a list of customers who are stakeholders to this "+(0,xe.toDisplayString)(e.destination)+". ",1),(0,i.Q3)(" CUSTOMER RESULTS CARDS "),0==a.customerResults.length?((0,i.uX)(),(0,i.CE)("div",Ts,xs)):((0,i.uX)(),(0,i.CE)("div",Us,[(0,i.bF)(r,{"customer-results":a.customerResults,onRemove_customer:t[0]||(t[0]=e=>n.removeCustomer(e))},null,8,["customer-results"])])),(0,i.Q3)(" ADD CUSTOMER BUTTON "),qs,(0,i.Lk)("div",Ds,[(0,i.Lk)("div",Fs,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>n.addNewCustomer&&n.addNewCustomer(...e))}," Add Customer ")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODALS "),(0,i.bF)(d,{"location-id":e.locationId,destination:e.destination,"exclude-customers":a.customerResults,onUpdate_customer_results:t[2]||(t[2]=e=>n.updateCustomerResults(e))},null,8,["location-id","destination","exclude-customers"])])}]]),ni=(0,i.Lk)("hr",null,null,-1);var oi=s(2479),ri=s(2458);const di={name:"MiscModule",components:{ListPublicLinks:oi.A,ListTagsModule:ri.A}},ci=(0,fe.A)(di,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("list-tags-module"),r=(0,i.g2)("list-public-links");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(o),ni,(0,i.bF)(r)],64)}]]),ui={class:"text-instructions"},mi={key:0,class:"spacer"},ki={class:"alert alert-dark"},bi={key:1},hi={class:"table"},pi=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"Bug Description"),(0,i.Lk)("td",null,"Status")])],-1),Li=["href"],gi=(0,i.Lk)("div",{class:"spacer"},null,-1),vi={class:"small-text"},_i={key:0,class:"remove-link"},yi=(0,i.Lk)("hr",null,null,-1),fi={class:"row submit-row"},Ii={class:"col-md-12"},Ci={class:"modal fade",id:"addBugModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},wi={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},ji={class:"modal-content"},Ri={class:"modal-header"},Si=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addBugsCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1),Ei={class:"modal-body"},$i={class:"row"},Mi={class:"col-md-4"},Ti=(0,i.Lk)("strong",null,"Adding Bugs",-1),xi={class:"text-instructions"},Ui={class:"col-md-8"},qi={class:"form-group"},Di=(0,i.Lk)("label",null,"Bug Client",-1),Fi=(0,i.Lk)("br",null,null,-1),Oi={class:"form-group"},Bi=(0,i.Lk)("label",null,"Search Keywords",-1),Ai=["disabled"],Qi=(0,i.Lk)("br",null,null,-1),Ni={key:0,class:"no-search"},Xi=(0,i.Lk)("strong",null,"Currently Searching for Bugs",-1),Pi=(0,i.Lk)("br",null,null,-1),Wi=["src"],Ki={key:1,class:"no-search"},zi=(0,i.Lk)("strong",null,"No Search Results Sorry",-1),Hi=(0,i.Lk)("br",null,null,-1),Gi=["src"],Vi={key:2,id:"bug_results_div"},Ji={class:"table"},Yi=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td"),(0,i.Lk)("td",null,"Bug Description"),(0,i.Lk)("td",null,"Bug Status")])],-1),Zi=["id"],el=["onClick"],tl=(0,i.Lk)("div",{class:"spacer"},null,-1),sl={class:"small-text"},il={class:"small-text"},ll=(0,i.Lk)("div",{class:"modal-footer"},[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1),al={name:"AddBugWizard",components:{Icon:W.In,NSelect:be.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[pe.A],data:()=>({bugClientModel:"",bugClientList:[],bugResults:[],searchModel:"",searchOn:!1,searchTimer:""}),methods:{loadBugClientList(){this.axios.post(`${this.rootUrl}object_data/bug_client_list/`).then((e=>{this.bugClientList=e.data.map((e=>({value:e.pk,label:e.fields.bug_client_name})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error loading bug client list",message:`We had an issue loading the bug client list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},startSearchTimer(){""!==this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.startSearch()}),700)},startSearch(){if(""===this.searchModel)return;this.searchOn=!0;const e=new FormData;e.set("bug_client_id",this.bugClientModel),e.set("search",this.searchModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/query_bug_client/`,e).then((e=>{this.bugResults=e.data,this.searchOn=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Search Failed",message:`Sorry, the search for bug client has failed. Errors -> ${e}`,extra_classes:"bg-warning",delay:0})}))},submitBug(e){const t=document.getElementById(`bug_no_${e}`);t.innerHTML="Adding Bug";const s=this.bugResults.filter((t=>t.id==e)),i=new FormData;i.set("bug_client",this.bugClientModel),i.set("bug_id",e),i.set("bug_description",s[0].summary),i.set("bug_status",s[0].status),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_bug/`,i).then((e=>{this.$emit("append_bug_list",e.data),t.innerHTML="Done"})).catch((e=>{this.$store.dispatch("newToast",{header:"Submit Bug Failed",message:`Sorry, the submitting the bug failed. Errors -> ${e}`,extra_classes:"bg-warning",delay:0})}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadBugClientList()}))}},nl={name:"BugsModule",components:{AddBugWizard:(0,fe.A)(al,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Ci,[(0,i.Lk)("div",wi,[(0,i.Lk)("div",ji,[(0,i.Lk)("div",Ri,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.usersIcon},null,8,["icon"]),(0,i.eW)(" Add Bugs Wizard ")]),Si]),(0,i.Lk)("div",Ei,[(0,i.Lk)("div",$i,[(0,i.Lk)("div",Mi,[Ti,(0,i.Lk)("p",xi," Select which bug client you want to search data from. Then use keywords or bug id to search for the required bugs. Once the search results appear, select those appropriate bugs that you want to link to the "+(0,xe.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",Ui,[(0,i.Q3)(" Bug Client List "),(0,i.Lk)("div",qi,[Di,(0,i.bF)(r,{options:a.bugClientList,label:"bug_client_name",option:"bug_client_id",value:a.bugClientModel,"onUpdate:value":t[0]||(t[0]=e=>a.bugClientModel=e)},null,8,["options","value"])]),Fi,(0,i.Q3)(" Search Keywords "),(0,i.Lk)("div",Oi,[Bi,(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchModel=e),class:"form-control",disabled:""==a.bugClientModel,onKeydown:t[2]||(t[2]=(...e)=>n.startSearchTimer&&n.startSearchTimer(...e)),maxlength:"50"},null,40,Ai),[[K.vModelText,a.searchModel]])]),Qi,(0,i.Q3)(" The Search Results "),a.searchOn?((0,i.uX)(),(0,i.CE)("div",Ni,[Xi,Pi,(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/online_connection.svg`,alt:"Placeholder Search Image"},null,8,Wi)])):0==a.bugResults.length?((0,i.uX)(),(0,i.CE)("div",Ki,[zi,Hi,(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/road_to_knowledge.svg`,alt:"Placeholder Search Image"},null,8,Gi)])):((0,i.uX)(),(0,i.CE)("div",Vi,[(0,i.Lk)("table",Ji,[Yi,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.bugResults,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",{id:`bug_no_${e.id}`},[(0,i.Lk)("a",{href:"javascript:void(0)",onClick:t=>n.submitBug(e.id)}," Add Bug ",8,el)],8,Zi),(0,i.Lk)("td",null,[(0,i.eW)((0,xe.toDisplayString)(e.summary)+" ",1),tl,(0,i.Lk)("p",sl," Assigned to: "+(0,xe.toDisplayString)(e.assigned_to),1),(0,i.Lk)("p",il," Bug No. "+(0,xe.toDisplayString)(e.id)+" | Priority. "+(0,xe.toDisplayString)(e.priority),1)]),(0,i.Lk)("td",null,(0,xe.toDisplayString)(e.status),1)])))),128))])])]))])])]),ll])])])}]]),Icon:W.In},mixins:[pe.A],data:()=>({bugList:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewBug(){new P.aF(document.getElementById("addBugModal")).show()},appendBugList(e){let t=e[0].fields;t.bug_id=e[0].pk,this.bugList.push(t)},getBugHyperLink:e=>"Bugzilla"===e.bug_client__list_of_bug_client__bug_client_name?`${e.bug_client__bug_client_url}/show_bug.cgi?id=${e.bug_code}`:"javascript:void(0)",getBugList(){"requirement_item"!==this.destination&&this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/bug_list/`).then((e=>{this.bugList=[],e.data.forEach((e=>{this.bugList.push(e)}))})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to get bug list",message:`Failed to get bug list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},removeBug(e){const t=new FormData;t.set("bug_id",e),this.axios.post(`${this.rootUrl}object_data/delete_bug/`,t).then((()=>{this.bugList=this.bugList.filter((t=>t.bug_id!==e))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Removing Bug",message:`We had an issue removing the bug - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.getBugList()}))}},ol=(0,fe.A)(nl,[["render",function(e,t,s,l,a,n){const o=(0,i.g2)("Icon"),r=(0,i.g2)("add-bug-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.bugIcon},null,8,["icon"]),(0,i.eW)(" Bugs List ")]),(0,i.Lk)("p",ui," The following is a list of bugs associated with this "+(0,xe.toDisplayString)(e.destination),1),(0,i.Q3)(" TABLE OF BUGS "),0===a.bugList.length?((0,i.uX)(),(0,i.CE)("div",mi,[(0,i.Lk)("div",ki," Sorry - there are no bugs associated with this "+(0,xe.toDisplayString)(e.destination),1)])):((0,i.uX)(),(0,i.CE)("div",bi,[(0,i.Lk)("table",hi,[pi,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.bugList,(t=>((0,i.uX)(),(0,i.CE)("tr",{key:t.pk},[(0,i.Lk)("td",null,[(0,i.Lk)("a",{href:n.getBugHyperLink(t),rel:"noopener noreferrer",target:"_blank"},[(0,i.Lk)("p",null,(0,xe.toDisplayString)(t.bug_description),1),gi,(0,i.Lk)("p",vi," Bug No. "+(0,xe.toDisplayString)(t.bug_code)+" - "+(0,xe.toDisplayString)(t.bug_client__bug_client_name),1)],8,Li)]),(0,i.Lk)("td",null,[(0,i.eW)((0,xe.toDisplayString)(t.bug_status)+" ",1),e.userLevel>=2?((0,i.uX)(),(0,i.CE)("span",_i,[(0,i.bF)(o,{icon:e.icons.trashCan,onClick:e=>n.removeBug(t.bug_id)},null,8,["icon","onClick"])])):(0,i.Q3)("v-if",!0)])])))),128))])])])),(0,i.Q3)(" Add Bug Button "),(0,i.Q3)(" TO DO - limit it to certain users "),yi,(0,i.Lk)("div",fi,[(0,i.Lk)("div",Ii,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>n.addNewBug&&n.addNewBug(...e))}," Add Bug ")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" Modals "),(0,i.bF)(r,{destination:e.destination,"location-id":e.locationId,onAppend_bug_list:t[1]||(t[1]=e=>n.appendBugList(e))},null,8,["destination","location-id"])])}]]);var rl=s(8387),dl=s(148),cl=s(204),ul=s(7662),ml=s(3299),kl=s(1441),bl=s(9827);const hl={name:"ParentModules",components:{AddFolderWizard:kl.A,ConfirmFileDeleteVue:ul.A,AddLinkWizard:cl.A,BugsModule:ol,ConfirmFolderDelete:ml.A,CustomersModule:ai,DocumentsModule:Ft.A,GroupsAndUsersModule:D.A,NotesModule:rl.A,ObjectLinks:$s,RequirementItemLinksModule:It,RequirementItemsModule:we,RequirementLinksModule:Dt,UploadDocumentWizard:dl.A,MiscModule:ci},mixins:[bl.A],props:{destination:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userLevel:{type:Number,default:0}},data:()=>({}),methods:{},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.isReadOnly?this.$store.commit({type:"updateUserLevel",userLevel:1}):this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},pl=(0,fe.A)(hl,[["render",function(e,t,s,D,F,O){const B=(0,i.g2)("groups-and-users-module"),A=(0,i.g2)("requirement-items-module"),Q=(0,i.g2)("requirement-links-module"),N=(0,i.g2)("requirement-item-links-module"),X=(0,i.g2)("documents-module"),P=(0,i.g2)("upload-document-wizard"),W=(0,i.g2)("add-folder-wizard"),K=(0,i.g2)("add-link-wizard"),z=(0,i.g2)("confirm-file-delete-vue"),H=(0,i.g2)("confirm-folder-delete"),G=(0,i.g2)("object-links"),V=(0,i.g2)("customers-module"),J=(0,i.g2)("bugs-module"),Y=(0,i.g2)("misc-module"),Z=(0,i.g2)("notes-module"),ee=(0,i.g2)("n-config-provider");return(0,i.uX)(),(0,i.Wv)(ee,{theme:e.getTheme(s.theme)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",l,[(0,i.Lk)("div",a,[(0,i.Lk)("ul",n,[(0,i.Q3)(" GROUPS AND USERS "),(0,i.Q3)(" Don't need to show to requirement items - as permissions are gained from parent requirement "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",o,r)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEMS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",d,c)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT LINKS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",u,m)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEM LINKS "),"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("li",k,b)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" DOCUMENTS "),h,(0,i.Q3)(" LINKED OBJECTS "),"requirement"!==s.destination&&"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",p,L)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CUSTOMERS "),(0,i.Q3)(" Customers are not needed by requirement items as the parent requirements take care of this "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",g,v)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" BUGS "),(0,i.Q3)(" This module will only appear for project, task, and requirement "),["project","task","requirement"].includes(s.destination)?((0,i.uX)(),(0,i.CE)("li",_,y)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" MISC "),f,(0,i.Q3)(" Notes "),I]),C,(0,i.Lk)("div",w,["requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("div",j,[(0,i.bF)(B)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",R,[(0,i.bF)(A)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.bF)(Q)])):"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.bF)(N)])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",$,[(0,i.bF)(X),(0,i.bF)(P),(0,i.bF)(W,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(K,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(z),(0,i.bF)(H)]),(0,i.Lk)("div",M,[(0,i.bF)(G)]),(0,i.Lk)("div",T,[(0,i.bF)(V)]),(0,i.Lk)("div",x,[(0,i.bF)(J)]),(0,i.Lk)("div",U,[(0,i.bF)(Y)]),(0,i.Lk)("div",q,[(0,i.bF)(Z)])])])])])),_:1},8,["theme"])}]])},2479:(e,t,s)=>{s.d(t,{A:()=>C});var i=s(641),l=s(33);const a=(0,i.Lk)("h2",null,"Public Links",-1),n=(0,i.Lk)("p",{class:"text-instructions"}," The following will be public links you can send to clients. The links will contain certain information of the current object. i.e. it's status and description. Becareful who you send the links too! ",-1),o={key:0,class:"alert alert-info"},r={key:1,class:"alert alert-info"},d={key:2,class:"table table-striped"},c=(0,i.Lk)("td",null,"Public Link",-1),u=(0,i.Lk)("td",{style:{"text-align":"center",width:"100px"}},"Is Active",-1),m={key:0,style:{width:"10px"}},k=["onClick"],b={style:{"text-align":"center"}},h=["checked","data-public-link-id"],p={key:0},L={class:"remove-link"},g={key:3,class:"row submit-row"},v={class:"col-md-12"};var _=s(2124),y=s(2321),f=s(2243);const I={name:"ListPublicLinks",props:{isReadOnly:{type:Boolean,default:!1},overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},data:()=>({isFetchingData:!0,publicLinkResults:[]}),watch:{overrideLocationId(){this.getPublicLinks()}},components:{Icon:y.In},computed:{...(0,_.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mixins:[f.A],methods:{async copyPublicLink(e){const t=`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${e}/`;try{await navigator.clipboard.writeText(t),this.$store.dispatch("newToast",{header:"Public Link Copied",message:"Public Link has successfully copied to the clipboard",extra_classes:"bg-success"})}catch(e){this.$store.dispatch("newToast",{header:"Can not copy public link",message:"Sorry, we failed to copy the public link",extra_classes:"bg-danger",delay:0})}},createPublicLink(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait whilst we create the toast",extra_classes:"bg-warning",delay:0,unique_type:"create_public_link"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/create/`).then((e=>{this.$store.dispatch("newToast",{header:"Successful new Public Link",message:"We have been able to create a new public link",extra_classes:"bg-success",unique_type:"create_public_link"}),this.publicLinkResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new public link",message:`Sorry, we failed to create the new public link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_public_link"})}))},deletePublicLink(e){const t=new FormData;t.set("public_link_id",e),this.$store.dispatch("newToast",{header:"Deleting Public Link",message:"Deleting Public Link",extra_classes:"bg-warning",delay:0,unique_type:"public_link_delete"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/delete/`,t).then((()=>{this.publicLinkResults=this.publicLinkResults.filter((t=>t.public_link_id!==e)),this.$store.dispatch("newToast",{header:"Successfully Deleted Public Link",message:"Successfully Deleted Public Link",extra_classes:"bg-success",unique_type:"public_link_delete"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Public Link",message:`Error - could not delete link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"public_link_delete"})}))},formatUrl(e){if(""===e||void 0===e)return"Data error!";const t=e.slice(0,7);return`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${t}...`},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},getPublicLinks(){this.axios(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/get_links/`).then((e=>{this.publicLinkResults=e.data,this.isFetchingData=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Public Links",message:`We had an issue fetching the public links for this object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateIsActive(e){const t=e.target.dataset.publicLinkId;this.$store.dispatch("newToast",{header:"Updating Active Status for Private Link",message:"Please wait - we are updating the status",extra_classes:"bg-warning",delay:0,unique_type:`is_active-${t}`});let s="False";e.target.checked&&(s="True");const i=new FormData;i.set("public_link_id",t),i.set("public_link_is_active",s),this.axios.post(`${this.rootUrl}public_data/${this.destination}/${this.locationId}/update_link/`,i).then((()=>{this.$store.dispatch("newToast",{header:"Successfully Updated",message:"We have updated the is active status for the link",extra_classes:"bg-success",unique_type:`is_active-${t}`})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Active Status for Private Link",message:`We are sorry, something went wrong. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:`is_active-${t}`})}))}},mounted(){this.$nextTick((()=>{this.getPublicLinks()}))}},C=(0,s(6262).A)(I,[["render",function(e,t,s,_,y,f){const I=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)(i.FK,null,[a,n,y.isFetchingData?((0,i.uX)(),(0,i.CE)("div",o,"Currently loading data...")):(0,i.Q3)("v-if",!0),!1===y.isFetchingData&&0===y.publicLinkResults.length?((0,i.uX)(),(0,i.CE)("div",r," Sorry. There are no public links setup for this object. ")):((0,i.uX)(),(0,i.CE)("table",d,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[c,u,e.userLevel>1?((0,i.uX)(),(0,i.CE)("td",m)):(0,i.Q3)("v-if",!0)])]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(y.publicLinkResults,(s=>((0,i.uX)(),(0,i.CE)("tr",{key:s.public_link_id},[(0,i.Lk)("td",null,[(0,i.Lk)("button",{type:"button",class:"btn btn-link",onClick:e=>f.copyPublicLink(s.public_link_id)},(0,l.toDisplayString)(f.formatUrl(s.public_link_id)),9,k)]),(0,i.Lk)("td",b,[(0,i.Lk)("input",{class:"form-check-input",type:"checkbox",checked:s.public_link_is_active,"data-public-link-id":s.public_link_id,onChange:t[0]||(t[0]=(...e)=>f.updateIsActive&&f.updateIsActive(...e))},null,40,h)]),e.userLevel>1?((0,i.uX)(),(0,i.CE)("td",p,[(0,i.Lk)("span",L,[(0,i.bF)(I,{icon:e.icons.trashCan,onClick:e=>f.deletePublicLink(s.public_link_id)},null,8,["icon","onClick"])])])):(0,i.Q3)("v-if",!0)])))),128))])])),!1===s.isReadOnly&&e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("div",v,[(0,i.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>f.createPublicLink&&f.createPublicLink(...e))}," Create Public Link ")])])):(0,i.Q3)("v-if",!0)],64)}]])},8297:(e,t,s)=>{s.d(t,{A:()=>v});var i=s(641),l=s(33);const a={key:0},n={class:"col-md-10 object-link--details"},o=["href"],r={class:"object-link--link"},d={class:"object-link--title"},c={class:"col-md-2 object-link--status"},u=(0,i.Lk)("span",null,"Object Status: ",-1),m={key:0,class:"object-link--remove"},k={key:1,class:"spacer-extra"};var b=s(2124),h=s(2321),p=s(9336),L=s(2243);const g={name:"SubObjectLinks",components:{Icon:h.In},emits:["update_link_results"],mixins:[L.A],props:{canDelete:{type:Boolean,default:!0},linkResults:{type:Array,default:()=>[]},title:{type:String,default:"Relates"}},computed:{...(0,b.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{confirmRemoveLink(e){this.$store.commit("updateObjectLink",{objectLink:e}),new p.aF(document.getElementById("confirmLinkDeleteModal")).show()}}},v=(0,s(6262).A)(g,[["render",function(e,t,s,b,h,p){const L=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)(i.FK,null,[s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("h3",a,(0,l.toDisplayString)(s.title),1)):(0,i.Q3)("v-if",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.linkResults,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.pk,class:"row object-link"},[(0,i.Q3)(" Object ID + Title "),(0,i.Lk)("div",n,[(0,i.Lk)("a",{href:`${this.rootUrl}${t.object_type}_information/${t.object_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",r,(0,l.toDisplayString)(t.object_type)+" - "+(0,l.toDisplayString)(t.object_id),1),(0,i.Lk)("div",d,(0,l.toDisplayString)(t.object_title),1)],8,o)]),(0,i.Q3)(" Object Status "),(0,i.Lk)("div",c,[u,(0,i.Lk)("span",null,(0,l.toDisplayString)(t.object_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.bF)(L,{icon:e.icons.trashCan,onClick:e=>p.confirmRemoveLink(t)},null,8,["icon","onClick"])])):(0,i.Q3)("v-if",!0)])))),128)),s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("div",k)):(0,i.Q3)("v-if",!0)],64)}]])},3299:(e,t,s)=>{s.d(t,{A:()=>k});var i=s(641);const l={class:"modal fade",id:"confirmFolderDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFolderDelete","aria-hidden":"true"},a={class:"modal-dialog"},n={class:"modal-content"},o=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmFolderDelete"}," Please confirm Folder Deletion "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFolderDeleteButton"})],-1),r=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the folder? All files under this folder will be deleted also. ",-1),d={class:"modal-footer"};var c=s(2124),u=s(9336);const m={name:"ConfirmFolderDelete",computed:{...(0,c.L8)({destination:"getDestination",folderRemoveId:"getFolderRemoveId",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFolder(){if(""===this.folderRemoveId)return;const e=this.folderRemoveId,t=new FormData;t.set("folder_id",this.folderRemoveId),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove_folder/`,t).then((()=>{this.$store.dispatch("removeFolder",{folder_id:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing folder",message:`We could not remove your folder. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateFolderRemoveId",documentRemoveKey:""}),document.getElementById("confirmFolderDeleteButton").click();let e=document.getElementById("cardInformationModal");null!==e&&(e=new u.aF(e),e.show()),setTimeout((()=>{const e=document.getElementsByClassName("modal-backdrop fade show");e.length>1&&e[0].remove()}),200)}}},k=(0,s(6262).A)(m,[["render",function(e,t,s,c,u,m){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",a,[(0,i.Lk)("div",n,[o,r,(0,i.Lk)("div",d,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>m.closeModal&&m.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>m.deleteFolder&&m.deleteFolder(...e))}," Yes ")])])])])}]])}}]);