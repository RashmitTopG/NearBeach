"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1616],{6916:(e,t,a)=>{a.d(t,{Z:()=>D});var n=a(6252),s=a(2262),l=a(834),o=a(9960),i=a(5103),d=a(6135),r=a(9699),c=a(2366),u=a(3079),b=a(945),h=a(1263),p=a(2326),m=a(6810),k=a(5944),v=a(3910);const _={name:"Switch",common:a(8373).Z,self:e=>{const{primaryColor:t,opacityDisabled:a,borderRadius:n,textColor3:s}=e;return Object.assign(Object.assign({},v.Z),{iconColor:s,textColor:"white",loadingColor:t,opacityDisabled:a,railColor:"rgba(0, 0, 0, .14)",railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:n,railBorderRadiusMedium:n,railBorderRadiusLarge:n,buttonBorderRadiusSmall:n,buttonBorderRadiusMedium:n,buttonBorderRadiusLarge:n,boxShadowFocus:`0 0 0 2px ${(0,k.zX)(t,{alpha:.2})}`})}};var g=a(9197),f=a(9474);const y=(0,f.cB)("switch","\n height: var(--n-height);\n min-width: var(--n-width);\n vertical-align: middle;\n user-select: none;\n -webkit-user-select: none;\n display: inline-flex;\n outline: none;\n justify-content: center;\n align-items: center;\n",[(0,f.cE)("children-placeholder","\n height: var(--n-rail-height);\n display: flex;\n flex-direction: column;\n overflow: hidden;\n pointer-events: none;\n visibility: hidden;\n "),(0,f.cE)("rail-placeholder","\n display: flex;\n flex-wrap: none;\n "),(0,f.cE)("button-placeholder","\n width: calc(1.75 * var(--n-rail-height));\n height: var(--n-rail-height);\n "),(0,f.cB)("base-loading","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n font-size: calc(var(--n-button-width) - 4px);\n color: var(--n-loading-color);\n transition: color .3s var(--n-bezier);\n ",[(0,g.c)({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),(0,f.cE)("checked, unchecked","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n box-sizing: border-box;\n position: absolute;\n white-space: nowrap;\n top: 0;\n bottom: 0;\n display: flex;\n align-items: center;\n line-height: 1;\n "),(0,f.cE)("checked","\n right: 0;\n padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),(0,f.cE)("unchecked","\n left: 0;\n justify-content: flex-end;\n padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),(0,f.c)("&:focus",[(0,f.cE)("rail","\n box-shadow: var(--n-box-shadow-focus);\n ")]),(0,f.cM)("round",[(0,f.cE)("rail","border-radius: calc(var(--n-rail-height) / 2);",[(0,f.cE)("button","border-radius: calc(var(--n-button-height) / 2);")])]),(0,f.u4)("disabled",[(0,f.u4)("icon",[(0,f.cM)("rubber-band",[(0,f.cM)("pressed",[(0,f.cE)("rail",[(0,f.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,f.cE)("rail",[(0,f.c)("&:active",[(0,f.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,f.cM)("active",[(0,f.cM)("pressed",[(0,f.cE)("rail",[(0,f.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),(0,f.cE)("rail",[(0,f.c)("&:active",[(0,f.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),(0,f.cM)("active",[(0,f.cE)("rail",[(0,f.cE)("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),(0,f.cE)("rail","\n overflow: hidden;\n height: var(--n-rail-height);\n min-width: var(--n-rail-width);\n border-radius: var(--n-rail-border-radius);\n cursor: pointer;\n position: relative;\n transition:\n opacity .3s var(--n-bezier),\n background .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-rail-color);\n ",[(0,f.cE)("button-icon","\n color: var(--n-icon-color);\n transition: color .3s var(--n-bezier);\n font-size: calc(var(--n-button-height) - 4px);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n display: flex;\n justify-content: center;\n align-items: center;\n line-height: 1;\n ",[(0,g.c)()]),(0,f.cE)("button",'\n align-items: center; \n top: var(--n-offset);\n left: var(--n-offset);\n height: var(--n-button-height);\n width: var(--n-button-width-pressed);\n max-width: var(--n-button-width);\n border-radius: var(--n-button-border-radius);\n background-color: var(--n-button-color);\n box-shadow: var(--n-button-box-shadow);\n box-sizing: border-box;\n cursor: inherit;\n content: "";\n position: absolute;\n transition:\n background-color .3s var(--n-bezier),\n left .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n max-width .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ')]),(0,f.cM)("active",[(0,f.cE)("rail","background-color: var(--n-rail-color-active);")]),(0,f.cM)("loading",[(0,f.cE)("rail","\n cursor: wait;\n ")]),(0,f.cM)("disabled",[(0,f.cE)("rail","\n cursor: not-allowed;\n opacity: .5;\n ")])]),C=Object.assign(Object.assign({},i.Z.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let w;const D=(0,n.aZ)({name:"Switch",props:C,setup(e){void 0===w&&(w="undefined"==typeof CSS||void 0!==CSS.supports&&CSS.supports("width","max(1px)"));const{mergedClsPrefixRef:t,inlineThemeDisabled:a}=(0,d.Z)(e),u=(0,i.Z)("Switch","-switch",y,_,e,t),b=(0,r.Z)(e),{mergedSizeRef:m,mergedDisabledRef:k}=b,v=(0,s.iH)(e.defaultValue),g=(0,s.Vh)(e,"value"),f=(0,o.Z)(g,v),C=(0,n.Fl)((()=>f.value===e.checkedValue)),D=(0,s.iH)(!1),L=(0,s.iH)(!1),x=(0,n.Fl)((()=>{const{railStyle:t}=e;if(t)return t({focused:L.value,checked:C.value})}));function $(t){const{"onUpdate:value":a,onChange:n,onUpdateValue:s}=e,{nTriggerFormInput:l,nTriggerFormChange:o}=b;a&&(0,h.R)(a,t),s&&(0,h.R)(s,t),n&&(0,h.R)(n,t),v.value=t,l(),o()}const S=(0,n.Fl)((()=>{const{value:e}=m,{self:{opacityDisabled:t,railColor:a,railColorActive:n,buttonBoxShadow:s,buttonColor:o,boxShadowFocus:i,loadingColor:d,textColor:r,iconColor:c,[(0,p.T)("buttonHeight",e)]:b,[(0,p.T)("buttonWidth",e)]:h,[(0,p.T)("buttonWidthPressed",e)]:k,[(0,p.T)("railHeight",e)]:v,[(0,p.T)("railWidth",e)]:_,[(0,p.T)("railBorderRadius",e)]:g,[(0,p.T)("buttonBorderRadius",e)]:f},common:{cubicBezierEaseInOut:y}}=u.value;let C,D,L;return w?(C=`calc((${v} - ${b}) / 2)`,D=`max(${v}, ${b})`,L=`max(${_}, calc(${_} + ${b} - ${v}))`):(C=(0,l.BL)(((0,l.fQ)(v)-(0,l.fQ)(b))/2),D=(0,l.BL)(Math.max((0,l.fQ)(v),(0,l.fQ)(b))),L=(0,l.fQ)(v)>(0,l.fQ)(b)?_:(0,l.BL)((0,l.fQ)(_)+(0,l.fQ)(b)-(0,l.fQ)(v))),{"--n-bezier":y,"--n-button-border-radius":f,"--n-button-box-shadow":s,"--n-button-color":o,"--n-button-width":h,"--n-button-width-pressed":k,"--n-button-height":b,"--n-height":D,"--n-offset":C,"--n-opacity-disabled":t,"--n-rail-border-radius":g,"--n-rail-color":a,"--n-rail-color-active":n,"--n-rail-height":v,"--n-rail-width":_,"--n-width":L,"--n-box-shadow-focus":i,"--n-loading-color":d,"--n-text-color":r,"--n-icon-color":c}})),M=a?(0,c.F)("switch",(0,n.Fl)((()=>m.value[0])),S,e):void 0;return{handleClick:function(){e.loading||k.value||(f.value!==e.checkedValue?$(e.checkedValue):$(e.uncheckedValue))},handleBlur:function(){L.value=!1,function(){const{nTriggerFormBlur:e}=b;e()}(),D.value=!1},handleFocus:function(){L.value=!0,function(){const{nTriggerFormFocus:e}=b;e()}()},handleKeyup:function(t){e.loading||k.value||" "===t.key&&(f.value!==e.checkedValue?$(e.checkedValue):$(e.uncheckedValue),D.value=!1)},handleKeydown:function(t){e.loading||k.value||" "===t.key&&(t.preventDefault(),D.value=!0)},mergedRailStyle:x,pressed:D,mergedClsPrefix:t,mergedValue:f,checked:C,mergedDisabled:k,cssVars:a?void 0:S,themeClass:null==M?void 0:M.themeClass,onRender:null==M?void 0:M.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:t,checked:a,mergedRailStyle:s,onRender:l,$slots:o}=this;null==l||l();const{checked:i,unchecked:d,icon:r,"checked-icon":c,"unchecked-icon":h}=o,p=!((0,m.aD)(r)&&(0,m.aD)(c)&&(0,m.aD)(h));return(0,n.h)("div",{role:"switch","aria-checked":a,class:[`${e}-switch`,this.themeClass,p&&`${e}-switch--icon`,a&&`${e}-switch--active`,t&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},(0,n.h)("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:s},(0,m.K9)(i,(t=>(0,m.K9)(d,(a=>t||a?(0,n.h)("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},(0,n.h)("div",{class:`${e}-switch__rail-placeholder`},(0,n.h)("div",{class:`${e}-switch__button-placeholder`}),t),(0,n.h)("div",{class:`${e}-switch__rail-placeholder`},(0,n.h)("div",{class:`${e}-switch__button-placeholder`}),a)):null)))),(0,n.h)("div",{class:`${e}-switch__button`},(0,m.K9)(r,(t=>(0,m.K9)(c,(a=>(0,m.K9)(h,(s=>(0,n.h)(u.Z,null,{default:()=>this.loading?(0,n.h)(b.Z,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(a||t)?(0,n.h)("div",{class:`${e}-switch__button-icon`,key:a?"checked-icon":"icon"},a||t):this.checked||!s&&!t?null:(0,n.h)("div",{class:`${e}-switch__button-icon`,key:s?"unchecked-icon":"icon"},s||t)}))))))),(0,m.K9)(i,(t=>t&&(0,n.h)("div",{key:"checked",class:`${e}-switch__checked`},t))),(0,m.K9)(d,(t=>t&&(0,n.h)("div",{key:"unchecked",class:`${e}-switch__unchecked`},t))))))}})},6419:(e,t,a)=>{a.r(t),a.d(t,{default:()=>mn});var n=a(6252),s=a(3577);const l={class:"kanban-header"},o={class:"kanban-edit-text"},i=["href"],d={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r={class:"modal-dialog modal-lg"},c={class:"modal-content"},u={class:"modal-header"},b=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),h={class:"modal-body"},p={key:0,class:"row"},m=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Add Users"),(0,n._)("p",{class:"text-instructions"}," Use the following multiple select to select which users you want to add to this kanban card. "),(0,n._)("p",{class:"text-instructions"}," Please note: A user's group has to be added to the kanban card before the user can be added. ")],-1),k={class:"col-md-8"},v={key:1,class:"row"},_=(0,n._)("div",{class:"col-md-6"},[(0,n._)("strong",null,"Sorry - no results"),(0,n._)("p",{class:"text-instructions"}," This could be because "),(0,n._)("ul",{class:"text-instructions"},[(0,n._)("li",null,"There are no more users left to add"),(0,n._)("li",null," The user you are after is in a group not current added to this kanban card ")])],-1),g={class:"col-md-6 no-search"},f=["src"],y={class:"modal-footer"},C=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),w=["disabled"];var D=a(6542),L=a(2001),x=a(3138),$=a(989),S=a(3058),M=a(5808);const I={name:"AddUserToCard",components:{Icon:D.JO,NSelect:L.Z},mixins:[S.Z,M.Z],computed:{...(0,$.Se)({cardId:"getCardId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(e){void 0!==e&&(this.userFixList=e.map((e=>({value:e.id,label:`${e.username}: ${e.first_name} ${e.last_name}`}))))}},methods:{addUser(){const e=new FormData;this.userModel.forEach((t=>{e.append("user_list",t)})),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/add_user/`,e).then((e=>{document.getElementById("addUserCloseButton").click(),this.userModel=[],this.$store.commit("updateGroupsAndUsers",{objectGroupList:e.data.object_group_list,objectUserList:e.data.object_user_list,potentialGroupList:e.data.potential_group_list,potentialUserList:e.data.potential_user_list}),new x.u_(document.getElementById("cardInformationModal")).show()})).catch((e=>{this.showErrorModal(e,"kanban card")}))}}};var U=a(3744);const R=(0,U.Z)(I,[["render",function(e,t,a,s,l,o){const i=(0,n.up)("Icon"),D=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",r,[(0,n._)("div",c,[(0,n._)("div",u,[(0,n._)("h2",null,[(0,n.Wm)(i,{icon:e.icons.userIcon},null,8,["icon"]),(0,n.Uk)(" Add User To Card ")]),b]),(0,n._)("div",h,[l.userFixList.length>0?((0,n.wg)(),(0,n.iD)("div",p,[m,(0,n._)("div",k,[(0,n.Wm)(D,{options:l.userFixList,value:l.userModel,"onUpdate:value":t[0]||(t[0]=e=>l.userModel=e),multiple:""},null,8,["options","value"])])])):((0,n.wg)(),(0,n.iD)("div",v,[_,(0,n._)("div",g,[(0,n._)("img",{src:`${e.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,f)])]))]),(0,n._)("div",y,[C,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:0===l.userModel.length,onClick:t[1]||(t[1]=(...e)=>o.addUser&&o.addUser(...e))}," Add User(s) ",8,w)])])])])}]]),T={class:"modal fade",id:"archiveCardsModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},E={class:"modal-dialog"},B={class:"modal-content"},N={class:"modal-header"},A=(0,n._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Are you sure? ",-1),P=(0,n._)("div",{class:"modal-body"}," Are you sure you want to archive the cards? This can not be undone. ",-1),j={class:"modal-footer"},F={name:"ArchiveCards",data:()=>({archiveCardsModal:{}}),computed:{...(0,$.Se)({allCards:"getCards",archiveDestination:"getArchiveDestination",archiveDestinationString:"getArchiveDestinationString",rootUrl:"getRootUrl"})},watch:{archiveDestinationString(e){void 0!==e&&(this.archiveCardsModal=new x.u_("#archiveCardsModal"),this.archiveCardsModal.show())}},methods:{archiveCards(){let e=this.archiveDestination.column,t=this.archiveDestination.level;const a=new FormData;this.allCards.filter((a=>parseInt(a.fields.kanban_column)===e&&parseInt(a.fields.kanban_level)===t)).forEach((e=>{a.append("kanban_card_id",e.pk)})),this.$store.commit({type:"archiveCards",column:e,level:t}),this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""}),this.axios.post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,a).catch((e=>{}))},closeModal(){this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""})}}},q=(0,U.Z)(F,[["render",function(e,t,a,s,l,o){return(0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("div",E,[(0,n._)("div",B,[(0,n._)("div",N,[A,(0,n._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e))})]),P,(0,n._)("div",j,[(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," No "),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>o.archiveCards&&o.archiveCards(...e))}," Yes ")])])])])}]]),K={class:"modal fade",id:"blockedNotesModal",tabindex:"-1","aria-labelledby":"blockedNotesModal","aria-hidden":"true"},Z={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},W={class:"modal-content"},O=(0,n._)("div",{class:"modal-header"},[(0,n._)("h2",null,"Blocked Card Notes"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"blockedNotesModalButton"},[(0,n._)("span",{"aria-hidden":"true"})])],-1),V={class:"modal-body"},z={class:"row"},H=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Blocked Card Notes"),(0,n._)("p",{class:"text-instructions"}," Please write a reason why this particular card is blocked at the moment. ")],-1),Y={class:"col-md-8"},G={class:"modal-footer"},Q=["disabled"];var J=a(7267);const X={name:"BlockedNotesModal",components:{editor:J.Z},props:{},data:()=>({noteModal:""}),computed:{...(0,$.Se)({cardId:"getCardId",contentCss:"getContentCss",rootUrl:"getRootUrl",skin:"getSkin"})},methods:{addNote(){const e=new FormData;e.set("note",this.noteModal),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/add_notes/`,e).then((()=>{this.closeModal()}))},closeModal(){this.noteModal="",document.getElementById("blockedNotesModalButton").click()}}},ee=(0,U.Z)(X,[["render",function(e,t,a,s,l,o){const i=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",Z,[(0,n._)("div",W,[O,(0,n._)("div",V,[(0,n._)("div",z,[H,(0,n._)("div",Y,[(0,n.Wm)(i,{init:{file_picker_types:"image",height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:l.noteModal,"onUpdate:modelValue":t[0]||(t[0]=e=>l.noteModal=e)},null,8,["init","modelValue"])])])]),(0,n._)("div",G,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>o.addNote&&o.addNote(...e)),disabled:""===l.noteModal}," Add Note ",8,Q)])])])])}]]),te={class:"kanban-header-row"},ae={class:"kanban-header-row kanban-sticky-row",style:{display:"none"}},ne={class:"kanban-level-div"},se=["onClick"],le={name:"KanbanBoard",components:{KanbanRow:a(6115).Z},props:{kanbanBoardResults:{type:Array,default:()=>[]},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,$.Se)({columnResults:"getColumnResults",levelCardCount:"getLevelCardCount",levelResults:"getLevelResults"})},mixins:[M.Z],data:()=>({}),created(){window.addEventListener("resize",this.resizeProcedure),window.addEventListener("scroll",this.scrollProcedure)},unmounted(){window.removeEventListener("resize",this.resizeProcedure),window.removeEventListener("scroll",this.scrollProcedure)},methods:{doubleClickedCard(e){this.$emit("double_clicked_card",e)},expandLevel(e){this.$store.dispatch("updateLevelCollapse",{level_id:e})},getExpandClass(e){return this.$store.getters.getLevelCollapseStatus(e)?"kanban-expand collapsed":"kanban-expand expanded"},resizeProcedure(){const e=2*(this.columnResults.length-1),t=400*this.columnResults.length+e,a=document.getElementsByClassName("kanban-container")[0];if(void 0===a)return;const n=a.clientWidth;if(t<n){const e=document.getElementsByClassName("kanban-edit-text")[0],a=document.getElementsByClassName("kanban-level-div");Array.from(a).forEach((e=>{e.style=`max-width: ${t}px;`})),e.style=`max-width: ${t}px`}else{const e=a.scrollWidth,t=document.getElementsByClassName("kanban-edit-text")[0];let n=document.getElementsByClassName("kanban-level-div");Array.from(n).forEach((t=>{t.style=`width: ${e}px;`})),t.style=`max-width: ${e}px`}},scrollProcedure(){const e=document.getElementsByClassName("kanban-sticky-row")[0],t=document.getElementsByClassName("kanban-container")[0];e.scrollLeft=t.scrollLeft;const a=document.getElementById("kanban_container").scrollTop;e.style.display=a<90?"none":""}},mounted(){this.$nextTick((()=>{this.resizeProcedure()})),this.$store.commit({type:"updateKanbanStatus",kanbanStatus:this.kanbanBoardResults[0].fields.kanban_board_status})}},oe=(0,U.Z)(le,[["render",function(e,t,a,l,o,i){const d=(0,n.up)("kanban-row");return(0,n.wg)(),(0,n.iD)("div",{id:"kanban_container",class:"kanban-container",onScroll:t[1]||(t[1]=(...e)=>i.scrollProcedure&&i.scrollProcedure(...e))},[(0,n.kq)(" Render out the header "),(0,n._)("div",te,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"kanban-column-header",key:e.pk},(0,s.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,n.kq)(" Render out the STICKY header "),(0,n._)("div",ae,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"kanban-column-header",key:e.pk},(0,s.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,n.kq)(" Render each row "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.levelResults,(l=>((0,n.wg)(),(0,n.iD)("div",{key:l.pk},[(0,n.kq)(" CREATE THE LEVEL HEADER "),(0,n._)("div",ne,[(0,n._)("span",{class:(0,s.normalizeClass)(i.getExpandClass(l.pk)),onClick:e=>i.expandLevel(l.pk)},null,10,se),(0,n._)("span",null,(0,s.toDisplayString)(l.fields.kanban_level_name)+" - ["+(0,s.toDisplayString)(e.levelCardCount(l.pk))+"] ",1)]),(0,n.kq)(" RENDER THE CELLS "),(0,n.Wm)(d,{"level-id":l.pk,"new-card-info":a.newCardInfo,onDouble_clicked_card:t[0]||(t[0]=e=>i.doubleClickedCard(e))},null,8,["level-id","new-card-info"])])))),128))],32)}]]);var ie=a(9963);const de=["data-kanban-level","data-kanban-column"],re={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},ce={class:"modal-content"},ue={class:"modal-header"},be=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addKanbanCardCloseButton"},null,-1),he={class:"modal-body"},pe={class:"row"},me=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Please note"),(0,n._)("p",{class:"text-instructions"}," The card names can not be the same as something that already exists on the board. ")],-1),ke={class:"col-md-8"},ve=(0,n._)("label",null,"Kanban Card Text",-1),_e={class:"row"},ge=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Priority"),(0,n._)("p",{class:"text-instructions"}," Please select the apprioriate card priority. ")],-1),fe={class:"col-md-8"},ye=(0,n._)("label",null,"Card Priority",-1),Ce={class:"row"},we=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Description"),(0,n._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),De={class:"col-md-8"},Le={class:"modal-footer"},xe=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),$e=["disabled"];var Se=a(2299);const Me={name:"NewKanbanCard",components:{editor:J.Z,Icon:D.JO,NSelect:L.Z},props:{columnResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]}},mixins:[M.Z,Se.Z],data:()=>({disableAddButton:!0,kanbanCardDescriptionModel:"",kanbanCardTextModel:"",kanbanCardPriorityModal:2,listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}]}),computed:{...(0,$.Se)({contentCss:"getContentCss",rootUrl:"getRootUrl",skin:"getSkin"})},methods:{addKanbanCard(){const e=document.getElementById("addKanbanCardModal"),t=new FormData;t.set("kanban_card_text",this.kanbanCardTextModel),t.set("kanban_card_description",this.kanbanCardDescriptionModel),t.set("kanban_level",e.dataset.kanbanLevel),t.set("kanban_column",e.dataset.kanbanColumn),t.set("kanban_card_priority",this.kanbanCardPriorityModal),this.axios.post(`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/new_card/`,t).then((e=>{this.$emit("new_card",e.data),this.kanbanCardTextModel="",this.kanbanCardDescriptionModel="",document.getElementById("addKanbanCardCloseButton").click()})).catch((e=>{}))}},watch:{kanbanCardTextModel(){this.disableAddButton=!1,0===this.kanbanCardTextModel.length&&(this.disableAddButton=!0),this.kanbanCardResults.filter((e=>e.fields.kanban_card_text===this.kanbanCardTextModel)).length>0&&(this.disableAddButton=!0),0!==this.columnResults.length&&0!==this.levelResults.length||(this.disableAddButton=!0)}}},Ie=(0,U.Z)(Me,[["render",function(e,t,a,s,l,o){const i=(0,n.up)("Icon"),d=(0,n.up)("n-select"),r=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:"addKanbanCardModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addKanbanCardModalLabel","aria-hidden":"true","data-kanban-level":a.levelResults[0].pk,"data-kanban-column":a.columnResults[0].pk},[(0,n._)("div",re,[(0,n._)("div",ce,[(0,n._)("div",ue,[(0,n._)("h2",null,[(0,n.Wm)(i,{icon:e.icons.cardChecklist},null,8,["icon"]),(0,n.Uk)(" Add Kanban Card Wizard ")]),be]),(0,n._)("div",he,[(0,n._)("div",pe,[me,(0,n._)("div",ke,[ve,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.kanbanCardTextModel=e),onKeydown:t[1]||(t[1]=(0,ie.withKeys)(((...e)=>o.addKanbanCard&&o.addKanbanCard(...e)),["enter"])),class:"form-control"},null,544),[[ie.vModelText,l.kanbanCardTextModel]])])]),(0,n.kq)(" CARD PRIORITY "),(0,n._)("div",_e,[ge,(0,n._)("div",fe,[ye,(0,n.Wm)(d,{options:l.listPriority,value:l.kanbanCardPriorityModal,"onUpdate:value":t[2]||(t[2]=e=>l.kanbanCardPriorityModal=e)},null,8,["options","value"])])]),(0,n.kq)(" CARD DESCRIPTION "),(0,n._)("div",Ce,[we,(0,n._)("div",De,[(0,n.Wm)(r,{init:{file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:l.kanbanCardDescriptionModel,"onUpdate:modelValue":t[3]||(t[3]=e=>l.kanbanCardDescriptionModel=e)},null,8,["init","modelValue"])])])]),(0,n._)("div",Le,[xe,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>o.addKanbanCard&&o.addKanbanCard(...e)),disabled:l.disableAddButton}," Add Card ",8,$e)])])])],8,de)}]]),Ue={class:"modal fade",id:"cardInformationModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Re={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},Te={class:"modal-content"},Ee={class:"modal-header"},Be=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"cardInformationModalCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Ne=(0,n._)("br",null,null,-1),Ae={class:"modal-body"},Pe=(0,n._)("ul",{id:"card_information_tabs",class:"nav nav-tabs",role:"tablist"},[(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link active",id:"details-tab","data-bs-toggle":"tab","data-bs-target":"#card_details",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Details ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#card_description",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"}," Description ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#card_notes",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Notes ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"users-tab","data-bs-toggle":"tab","data-bs-target":"#user_permissions",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Users ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"downloads-tab","data-bs-toggle":"tab","data-bs-target":"#downloads",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Downloads ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"public-link-tab","data-bs-toggle":"tab","data-bs-target":"#public-links",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Public Links ")])],-1),je=(0,n._)("hr",null,null,-1),Fe={class:"tab-content",id:"myTabContent"},qe={class:"tab-pane fade show active",id:"card_details",role:"tabpanel","aria-labelledby":"details-tab"},Ke={class:"tab-pane fade",id:"card_description",role:"tabpanel","aria-labelledby":"description-tab"},Ze={class:"tab-pane fade",id:"card_notes",role:"tabpanel","aria-labelledby":"notes-tab"},We={class:"tab-pane fade",id:"user_permissions",role:"tabpanel","aria-labelledby":"user-tab"},Oe={class:"tab-pane fade",id:"downloads",role:"tabpanel","aria-labelledby":"user-tab"},Ve={class:"tab-pane fade",id:"public-links",role:"tabpanel","aria-labelledby":"user-tab"},ze={key:0,class:"row link-to-object"},He=(0,n._)("strong",null,"Object Link: ",-1),Ye=["href"],Ge={key:1},Qe={class:"row"},Je=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Title"),(0,n._)("p",{class:"text-instructions"},' Write an appropriate name for the kanban card. To update click on the "Update" button. ')],-1),Xe={class:"col-md-8"},et=(0,n._)("label",null,"Card Title",-1),tt=(0,n._)("hr",null,null,-1),at={class:"row"},nt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Priority"),(0,n._)("p",{class:"text-instructions"}," Define what the priority of the card is. ")],-1),st={class:"col-md-4"},lt=(0,n._)("label",null,"Card Priority",-1),ot=(0,n._)("hr",null,null,-1),it={class:"row"},dt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Location"),(0,n._)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1),rt={class:"col-md-8"},ct={class:"row"},ut={class:"col-md-6 mt-4"},bt=(0,n._)("label",null,"Card Column",-1),ht={class:"col-md-6 mt-4"},pt=(0,n._)("label",null,"Card Level",-1),mt={key:2},kt={key:3,class:"row"},vt={class:"col-md-12"},_t={name:"CardDetails",components:{NSelect:L.Z},data:()=>({listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}],tempModel:""}),computed:{...(0,$.Se)({cardId:"getCardId",cardLink:"getCardLink",kanbanStatus:"getKanbanStatus",listColumns:"getListColumns",listLevels:"getListLevels",userLevel:"getUserLevel"}),cardColumn:{get(){return this.$store.state.card.cardColumn},set(e){this.$store.commit({type:"updateValue",field:"cardColumn",value:e})}},cardLevel:{get(){return this.$store.state.card.cardLevel},set(e){this.$store.commit({type:"updateValue",field:"cardLevel",value:e})}},cardPriority:{get(){return this.$store.state.card.cardPriority},set(e){this.$store.commit({type:"updateValue",field:"cardPriority",value:e})}},cardTitle:{get(){return this.$store.state.card.cardTitle},set(e){this.$store.commit({type:"updateValue",field:"cardTitle",value:e})}}},methods:{archiveCard(){document.getElementById("cardInformationModalCloseButton").click(),new x.u_("#confirmCardArchiveModal").show()},closeModal(){document.getElementById("cardInformationModalCloseButton").click()},async differentDestination(e,t){const a=this.$store.getters.getCardsOrder(this.cardColumn,this.cardLevel).length,n={to:{dataset:{column:this.cardColumn,level:this.cardLevel}},from:{dataset:{column:t.fields.kanban_column,level:t.fields.kanban_level}},item:{dataset:{cardId:this.cardId,cardPriority:this.cardPriority}},newIndex:a};await this.$store.dispatch("kanbanCardMoved",{event:n});const s=this.$store.getters.getCardsOrder(this.cardColumn,this.cardLevel),l=this.$store.getters.getCardsOrder(t.fields.kanban_column,t.fields.kanban_level).filter((e=>parseInt(e.pk)!==parseInt(this.cardId)));this.$emit("update_card",{close_modal:e,new_destination:s,old_destination:l})},sameDestination(e){this.$store.commit({type:"updateKanbanCard",card_id:this.cardId,kanban_card_text:this.cardTitle,kanban_card_priority:this.cardPriority}),this.$emit("update_card",{close_modal:e})},updateCard(e){const t=this.$store.getters.getCard(this.cardId),a=parseInt(this.cardColumn)===parseInt(t.fields.kanban_column),n=parseInt(this.cardLevel)===parseInt(t.fields.kanban_level);a&&n?this.sameDestination(e):this.differentDestination(e,t)}}},gt=(0,U.Z)(_t,[["render",function(e,t,a,l,o,i){const d=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",null,[void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,n.wg)(),(0,n.iD)("div",ze,[He,(0,n._)("a",{href:e.cardLink.hyperlink,target:"_blank",rel:"noopener noreferrer"},(0,s.toDisplayString)(e.cardLink.type)+" - "+(0,s.toDisplayString)(e.cardLink.id),9,Ye)])):(0,n.kq)("v-if",!0),void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,n.wg)(),(0,n.iD)("hr",Ge)):(0,n.kq)("v-if",!0),(0,n.kq)(" Card Text "),(0,n._)("div",Qe,[Je,(0,n._)("div",Xe,[et,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.cardTitle=e),class:"form-control"},null,512),[[ie.vModelText,i.cardTitle]])])]),tt,(0,n._)("div",at,[nt,(0,n._)("div",st,[lt,(0,n.Wm)(d,{options:o.listPriority,value:i.cardPriority,"onUpdate:value":t[1]||(t[1]=e=>i.cardPriority=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])])]),ot,(0,n.kq)(" CARD LOCATION "),(0,n._)("div",it,[dt,(0,n._)("div",rt,[(0,n._)("div",ct,[(0,n._)("div",ut,[bt,(0,n.Wm)(d,{options:e.listColumns,label:"column",value:i.cardColumn,"onUpdate:value":t[2]||(t[2]=e=>i.cardColumn=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])]),(0,n._)("div",ht,[pt,(0,n.Wm)(d,{options:e.listLevels,label:"level",value:i.cardLevel,"onUpdate:value":t[3]||(t[3]=e=>i.cardLevel=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])])])])]),e.userLevel>1?((0,n.wg)(),(0,n.iD)("hr",mt)):(0,n.kq)("v-if",!0),e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",kt,[(0,n._)("div",vt,[(0,n._)("button",{class:"btn btn-warning",onClick:t[4]||(t[4]=(...e)=>i.closeModal&&i.closeModal(...e))}," Close & Discard Changes "),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-danger archive-card",onClick:t[5]||(t[5]=(...e)=>i.archiveCard&&i.archiveCard(...e))}," Archive Card ")):(0,n.kq)("v-if",!0),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-primary save-changes",onClick:t[6]||(t[6]=e=>i.updateCard(!0))}," Save & Close ")):(0,n.kq)("v-if",!0),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"btn btn-success save-changes",onClick:t[7]||(t[7]=e=>i.updateCard(!1))}," Save & Continue ")):(0,n.kq)("v-if",!0)])])):(0,n.kq)("v-if",!0)])}]]),ft={key:0,class:"row"},yt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Notes"),(0,n._)("p",{class:"text-instructions"},' To add a note - type your note in the Note Box and hit the "Submit Note" button. ')],-1),Ct={class:"col-md-8"},wt=(0,n._)("label",null,"Note Box",-1),Dt={key:1},Lt={key:2,class:"row"},xt={class:"col-md-12"},$t=["disabled"],St=(0,n._)("hr",null,null,-1);var Mt=a(2857);const It={name:"CardNotes",components:{editor:J.Z,ListNotes:Mt.Z},props:{},data:()=>({cardNoteModel:""}),computed:{...(0,$.Se)({cardNotes:"getCardNotes",contentCss:"getContentCss",kanbanStatus:"getKanbanStatus",rootUrl:"getRootUrl",skin:"getSkin",userLevel:"getUserLevel"})},methods:{addNote(){const e=new FormData;e.set("note",this.cardNoteModel),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.$store.state.card.cardId}/add_notes/`,e).then((e=>{this.$store.commit({type:"appendNote",newNote:e.data[0]}),this.cardNoteModel=""})).catch((e=>{}))},closeModal(){document.getElementById("cardInformationModalCloseButton").click()}}},Ut=(0,U.Z)(It,[["render",function(e,t,a,s,l,o){const i=(0,n.up)("editor"),d=(0,n.up)("list-notes");return(0,n.wg)(),(0,n.iD)("div",null,[e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",ft,[yt,(0,n._)("div",Ct,[wt,(0,n.Wm)(i,{init:{height:250,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:l.cardNoteModel,"onUpdate:modelValue":t[0]||(t[0]=e=>l.cardNoteModel=e),disabled:"Closed"===e.kanbanStatus},null,8,["init","modelValue","disabled"])])])):(0,n.kq)("v-if",!0),e.userLevel>1?((0,n.wg)(),(0,n.iD)("hr",Dt)):(0,n.kq)("v-if",!0),e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",Lt,[(0,n._)("div",xt,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>o.addNote&&o.addNote(...e)),disabled:""===l.cardNoteModel}," Add Note ",8,$t)])])):(0,n.kq)("v-if",!0),St,(0,n.kq)(" NOTE HISTORY "),(0,n.Wm)(d,{"note-history-results":e.cardNotes,destination:"card"},null,8,["note-history-results"])])}]]),Rt={class:"row"},Tt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Description"),(0,n._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),Et={class:"col-md-8"},Bt=(0,n._)("hr",null,null,-1),Nt={key:0,class:"row"},At={class:"col-md-12"},Pt={name:"CardDescription",components:{editor:J.Z},props:{},data:()=>({}),computed:{...(0,$.Se)({contentCss:"getContentCss",kanbanStatus:"getKanbanStatus",skin:"getSkin",userLevel:"getUserLevel"}),cardDescription:{get(){return this.$store.state.card.cardDescription},set(e){this.$store.commit("updateValue",{field:"cardDescription",value:e})}}},mixins:[Se.Z],methods:{closeModal(){document.getElementById("cardInformationModalCloseButton").click()},updateCard(e){this.$emit("update_card",{close_modal:e})}}},jt=(0,U.Z)(Pt,[["render",function(e,t,a,s,l,o){const i=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Rt,[Tt,(0,n._)("div",Et,[(0,n.Wm)(i,{init:{file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:o.cardDescription,"onUpdate:modelValue":t[0]||(t[0]=e=>o.cardDescription=e),disabled:"Closed"===e.kanbanStatus},null,8,["init","modelValue","disabled"])])]),Bt,e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",Nt,[(0,n._)("div",At,[(0,n._)("button",{class:"btn btn-warning",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close & Discard Changes "),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=e=>o.updateCard(!0))}," Save & Close ")):(0,n.kq)("v-if",!0),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-success save-changes",onClick:t[3]||(t[3]=e=>o.updateCard(!1))}," Save & Continue ")):(0,n.kq)("v-if",!0)])])):(0,n.kq)("v-if",!0)])}]]),Ft={key:0,class:"alert alert-secondary"},qt={key:1},Kt={class:"table"},Zt=(0,n._)("td",{scope:"col"},"Username",-1),Wt=(0,n._)("td",{scope:"col"},"Name",-1),Ot={key:0,scope:"col"},Vt={key:0},zt={key:2,class:"row"},Ht={class:"col-md-12"},Yt={name:"CardUsers",components:{Icon:D.JO},computed:{...(0,$.Se)({cardId:"getCardId",kanbanBoardStatus:"getKanbanStatus",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel",objectUserList:"getObjectUserList"})},mixins:[M.Z],methods:{addUser(){document.getElementById("cardInformationModalCloseButton").click(),new x.u_("#addUserModal").show()},removeUser(e){const t=new FormData;t.set("username",e),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.locationId}/remove_user/`,t).then((e=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:e.data.object_group_list,objectUserList:e.data.object_user_list,potentialGroupList:e.data.potential_group_list,potentialUserList:e.data.potential_user_list})}))}}},Gt=(0,U.Z)(Yt,[["render",function(e,t,a,l,o,i){const d=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[0===e.objectUserList.length?((0,n.wg)(),(0,n.iD)("div",Ft," Sorry, there are no users currently assigned to this card. ")):((0,n.wg)(),(0,n.iD)("div",qt,[(0,n._)("table",Kt,[(0,n._)("thead",null,[(0,n._)("tr",null,[Zt,Wt,4===e.userLevel?((0,n.wg)(),(0,n.iD)("td",Ot," Delete ")):(0,n.kq)("v-if",!0)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.objectUserList,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,(0,s.toDisplayString)(t.id)+" - "+(0,s.toDisplayString)(t.username),1),(0,n._)("td",null,(0,s.toDisplayString)(t.first_name)+" "+(0,s.toDisplayString)(t.last_name),1),e.userLevel>=2?((0,n.wg)(),(0,n.iD)("td",Vt,[(0,n.Wm)(d,{icon:e.icons.trashCan,onClick:e=>i.removeUser(t.username)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128))])])])),e.userLevel>1&&"Closed"!==e.kanbanBoardStatus?((0,n.wg)(),(0,n.iD)("div",zt,[(0,n._)("div",Ht,[(0,n._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>i.addUser&&i.addUser(...e))}," Add User ")])])):(0,n.kq)("v-if",!0)],64)}]]);var Qt=a(8737),Jt=a(4442),Xt=a(9586);const ea={name:"CardInformation",components:{CardDescription:jt,CardDetails:gt,CardNotes:Ut,CardUsers:Gt,DocumentsModule:Qt.Z,Icon:D.JO,ListPublicLinks:Jt.Z,UploadDocumentWizard:Xt.Z},mixins:[M.Z],data:()=>({cardDescriptionModel:"",cardNoteModel:"",cardTitleModel:"",noteHistoryResults:[]}),computed:{...(0,$.Se)({cardId:"getCardId",kanbanStatus:"getKanbanStatus",rootUrl:"getRootUrl"})},methods:{updateCard(e){this.$store.dispatch("newToast",{header:"Updating Current Card",message:"Please wait - we are updating the card's information",extra_classes:"bg-warning",unique_type:"update-card",delay:0});const t=this.$store.getters.getAllCardData,a=new FormData;a.set("kanban_card_text",t.cardTitle),a.set("kanban_card_description",t.cardDescription),a.set("kanban_level",t.cardLevel),a.set("kanban_column",t.cardColumn),a.set("kanban_card_id",t.cardId),a.set("kanban_card_priority",t.cardPriority),void 0!==e.new_destination&&e.new_destination.forEach((e=>{a.append("new_destination",e.pk)})),void 0!==e.old_destination&&e.old_destination.forEach((e=>{a.append("old_destination",e.pk)})),this.axios.post(`${this.rootUrl}kanban_information/update_card/`,a).then((()=>{this.$emit("update_card",{kanban_card_id:t.cardId,kanban_card_text:t.cardTitle,kanban_card_description:t.cardDescriptionModel}),this.$store.dispatch("newToast",{header:"Card successfully updated",message:"Your card has successfully update",extra_classes:"bg-success",unique_type:"update-card"}),e.close_modal&&document.getElementById("cardInformationModalCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Card failed to updated",message:`Sorry your card failed to update - error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update-card"})}))}}},ta=(0,U.Z)(ea,[["render",function(e,t,a,l,o,i){const d=(0,n.up)("Icon"),r=(0,n.up)("card-details"),c=(0,n.up)("card-description"),u=(0,n.up)("card-notes"),b=(0,n.up)("card-users"),h=(0,n.up)("documents-module"),p=(0,n.up)("list-public-links");return(0,n.wg)(),(0,n.iD)("div",Ue,[(0,n._)("div",Re,[(0,n._)("div",Te,[(0,n._)("div",Ee,[(0,n._)("h2",null,[(0,n.Wm)(d,{icon:e.icons.usersIcon},null,8,["icon"]),(0,n.Uk)(" Card Information - "+(0,s.toDisplayString)(e.cardId),1)]),Be,Ne]),(0,n._)("div",Ae,[(0,n.kq)(" TAB MENU "),Pe,je,(0,n.kq)(" CONTENT OF TABS "),(0,n._)("div",Fe,[(0,n._)("div",qe,[(0,n.Wm)(r,{onUpdate_card:t[0]||(t[0]=e=>i.updateCard(e))})]),(0,n._)("div",Ke,[(0,n.Wm)(c,{onUpdate_card:t[1]||(t[1]=e=>i.updateCard(e))})]),(0,n._)("div",Ze,[(0,n.Wm)(u)]),(0,n._)("div",We,[(0,n.Wm)(b)]),(0,n._)("div",Oe,[(0,n.Wm)(h,{"override-destination":"kanban_card","override-location-id":e.cardId,"read-only":"Closed"===e.kanbanStatus},null,8,["override-location-id","read-only"])]),(0,n._)("div",Ve,[(0,n.Wm)(p,{"override-destination":"kanban_card","override-location-id":e.cardId,"is-read-only":"Closed"===e.kanbanStatus},null,8,["override-location-id","is-read-only"])])])])])])])}]]),aa=["data-kanban-level","data-kanban-column"],na={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},sa={class:"modal-content"},la={class:"modal-header"},oa=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),ia={class:"modal-body"},da={class:"row"},ra=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Object Selector"),(0,n._)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),ca={class:"col-md-8"},ua={key:1,class:"alert alert-success"},ba=(0,n._)("hr",null,null,-1),ha={class:"row"},pa=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Select Links"),(0,n._)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),ma={class:"col-md-8"},ka={key:0,id:"link_wizard_results"},va=["src"],_a={key:1,class:"alert alert-warning"},ga={key:2,class:"form-group"},fa=(0,n._)("label",null,"Search Terms",-1),ya=(0,n._)("br",null,null,-1),Ca={key:3,class:"table"},wa=(0,n._)("td",null,"Status",-1),Da={key:0},La={class:"form-check"},xa=["value","id"],$a=["for"],Sa=(0,n._)("div",{class:"spacer"},null,-1),Ma={class:"small-text"},Ia={key:1},Ua={class:"form-check"},Ra=["value","id"],Ta=["for"],Ea=(0,n._)("div",{class:"spacer"},null,-1),Ba={class:"small-text"},Na={key:2},Aa={class:"form-check"},Pa=["value","id"],ja=["for"],Fa=(0,n._)("div",{class:"spacer"},null,-1),qa={class:"small-text"},Ka={class:"modal-footer"},Za=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Wa=["disabled"],Oa={name:"NewKanbanLinkWizard",components:{Icon:D.JO,NSelect:L.Z},props:{columnResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},computed:{...(0,$.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[S.Z,M.Z],data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData,t=document.getElementById("newLinkModal");e.set(`${this.objectModel.toLowerCase()}`,this.linkModel),e.set("kanban_level",t.dataset.kanbanLevel),e.set("kanban_column",t.dataset.kanbanColumn),this.axios.post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel.toLowerCase()}/add_link/`,e).then((e=>{this.$emit("new_card",e.data),this.objectModel=null,document.getElementById("requirementLinkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.showErrorModal(e,"kanban")}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let t="";return t=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),t.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},Va=(0,U.Z)(Oa,[["render",function(e,t,a,l,o,i){const d=(0,n.up)("Icon"),r=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"kanbanLinkModal","aria-hidden":"true","data-kanban-level":a.levelResults[0].pk,"data-kanban-column":a.columnResults[0].pk},[(0,n._)("div",na,[(0,n._)("div",sa,[(0,n._)("div",la,[(0,n._)("h2",null,[(0,n.Wm)(d,{icon:e.icons.linkOut},null,8,["icon"]),(0,n.Uk)(" New Kanban Link Wizard ")]),oa]),(0,n._)("div",ia,[(0,n.kq)(" CHOOSING A OBJECT TYPE "),(0,n._)("div",da,[ra,(0,n._)("div",ca,[o.isSearching?((0,n.wg)(),(0,n.iD)("div",ua," Searching for "+(0,s.toDisplayString)(o.objectModel)+"s ",1)):((0,n.wg)(),(0,n.j4)(r,{key:0,options:o.objectSelection,value:o.objectModel,"onUpdate:value":t[0]||(t[0]=e=>o.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),ba,(0,n.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,n._)("div",ha,[pa,(0,n._)("div",ma,[(0,n.kq)(" LOADING PLACEHOLDER "),o.isSearching||null==o.objectModel?((0,n.wg)(),(0,n.iD)("div",ka,[(0,n._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,va)])):(0,n.kq)("v-if",!0),0==o.objectResults.length&&null!=o.objectModel?((0,n.wg)(),(0,n.iD)("div",_a," Sorry - there are no results. ")):(0,n.kq)("v-if",!0),(0,n.kq)(" SEARCH RESULTS "),!o.isSearching&&o.objectResults.length>0&&null!=o.objectModel?((0,n.wg)(),(0,n.iD)("div",ga,[fa,(0,n.wy)((0,n._)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>o.searchTermModel=e),type:"text"},null,512),[[ie.vModelText,o.searchTermModel]])])):(0,n.kq)("v-if",!0),ya,(0,n.kq)(" TABLE CONTAINING RESULTS "),!o.isSearching&&o.objectFilteredResults.length>0&&null!=o.objectModel?((0,n.wg)(),(0,n.iD)("table",Ca,[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,(0,s.toDisplayString)(o.objectModel)+" Description",1),wa])]),(0,n.kq)(" PROJECTS "),"Project"==o.objectModel?((0,n.wg)(),(0,n.iD)("tbody",Da,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.objectFilteredResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",La,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_project_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>o.linkModel=e)},null,8,xa),[[ie.vModelRadio,o.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_project_${e.pk}`},(0,s.toDisplayString)(e.fields.project_name),9,$a)]),Sa,(0,n._)("p",Ma," Project "+(0,s.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,s.toDisplayString)(e.fields.project_status),1)])))),128))])):(0,n.kq)("v-if",!0),(0,n.kq)(" REQUIREMENTS "),"Requirement"==o.objectModel?((0,n.wg)(),(0,n.iD)("tbody",Ia,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.objectFilteredResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",Ua,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_requirement_${e.pk}`,"onUpdate:modelValue":t[3]||(t[3]=e=>o.linkModel=e)},null,8,Ra),[[ie.vModelRadio,o.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,s.toDisplayString)(e.fields.requirement_title),9,Ta)]),Ea,(0,n._)("p",Ba," Requirement "+(0,s.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,s.toDisplayString)(e.fields.requirement_status),1)])))),128))])):(0,n.kq)("v-if",!0),(0,n.kq)(" TASKS "),"Task"==o.objectModel?((0,n.wg)(),(0,n.iD)("tbody",Na,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.objectFilteredResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",Aa,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",value:e.pk,id:`radio_task_${e.pk}`,"onUpdate:modelValue":t[4]||(t[4]=e=>o.linkModel=e)},null,8,Pa),[[ie.vModelRadio,o.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,s.toDisplayString)(e.fields.task_short_description),9,ja)]),Fa,(0,n._)("p",qa," Task "+(0,s.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,s.toDisplayString)(e.fields.task_status),1)])))),128))])):(0,n.kq)("v-if",!0)])):(0,n.kq)("v-if",!0)])])]),(0,n._)("div",Ka,[Za,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:0==o.linkModel.length,onClick:t[5]||(t[5]=(...e)=>i.saveLinks&&i.saveLinks(...e))}," Save changes ",8,Wa)])])])],8,aa)}]]),za={class:"modal fade",id:"confirmCardArchiveModal",tabindex:"-1","aria-labelledby":"confirmCardArchiveModalLabel","aria-hidden":"true"},Ha={class:"modal-dialog modal-lg"},Ya={class:"modal-content"},Ga=(0,n._)("div",{class:"modal-header"},[(0,n._)("h2",null,"Card Information"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmCardArchiveModalCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})])],-1),Qa={class:"modal-body"},Ja=(0,n._)("div",{class:"alert alert-danger"}," Please note - archiving the card can not be undone. ",-1),Xa=(0,n._)("h3",null," Are you sure you want to archive the following card? ",-1),en={class:"row"},tn={class:"col"},an=(0,n._)("br",null,null,-1),nn={class:"row"},sn={class:"col"},ln={class:"modal-footer"},on={name:"ConfirmCardArchive",computed:{...(0,$.Se)({cardId:"getCardId",cardTitle:"getCardTitle",rootUrl:"getRootUrl"})},methods:{archiveCard(){const e=new FormData;e.append("kanban_card_id",this.cardId),this.$store.commit({type:"archiveCard",cardId:this.cardId}),document.getElementById("confirmCardArchiveModalCloseButton").click(),this.axios.post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,e).catch((e=>{}))},goBack(){document.getElementById("confirmCardArchiveModalCloseButton").click(),new x.u_("#cardInformationModal").show()}}},dn=(0,U.Z)(on,[["render",function(e,t,a,l,o,i){return(0,n.wg)(),(0,n.iD)("div",za,[(0,n._)("div",Ha,[(0,n._)("div",Ya,[Ga,(0,n._)("div",Qa,[Ja,Xa,(0,n._)("div",en,[(0,n._)("div",tn,"Card No. - "+(0,s.toDisplayString)(e.cardId),1)]),an,(0,n._)("div",nn,[(0,n._)("div",sn,"Card Title - "+(0,s.toDisplayString)(e.cardTitle),1)])]),(0,n._)("div",ln,[(0,n._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>i.archiveCard&&i.archiveCard(...e))}," Yes Archive Card "),(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>i.goBack&&i.goBack(...e))}," No go back ")])])])])}]]);var rn=a(6916),cn=a(624),un=a(1713),bn=a(6200),hn=a(2551);const pn={name:"KanbanInformation",components:{ConfirmFolderDelete:a(9930).Z,ConfirmFileDeleteVue:hn.Z,AddLinkWizard:bn.Z,AddFolderWizard:un.Z,UploadDocumentWizard:Xt.Z,AddUserToCard:R,ArchiveCards:q,BlockedNotesModal:ee,CardInformation:ta,ConfirmCardArchive:dn,KanbanBoard:oe,NewKanbanCard:Ie,NewKanbanLinkWizard:Va,NSwitch:rn.Z},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},kanbanSettings:{type:Object,default:()=>({setting_data:{canDragCards:!0,levels:[]}})},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0},openCardOnLoad:{type:Number,default:0},potentialUserList:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userLevel:{type:Number,default:0}},computed:{...(0,$.Se)({cardId:"getCardId"})},watch:{cardId(){this.refreshUserList=!0}},mixins:[cn.Z],data(){return{canDragCards:!0,cardInformation:{},localKanbanCardResults:this.kanbanCardResults,refreshUserList:!1,newCardInfo:[]}},methods:{doubleClickedCard(e){this.cardInformation=e},newCard(e){this.$store.commit({type:"addCard",newCard:e})},resetRefreshUserList(){this.refreshUserList=!1},updateCanDragCards(e){this.$store.dispatch({type:"updateCanDragCards",canDragCards:e})},updateCard(e){this.localKanbanCardResults.forEach(((t,a)=>{t.pk===e.kanban_card_id&&(this.localKanbanCardResults[a].fields.kanban_card_text=e.kanban_card_text,this.localKanbanCardResults[a].fields.kanban_card_description=e.kanban_card_description)}))},updateKanbanSettings(){if(void 0===this.kanbanSettings.setting_data)return;let e=this.kanbanSettings.setting_data.canDragCards;void 0===e&&(e=!0),this.canDragCards=e;let t=this.kanbanSettings.setting_data.levels;void 0===t&&(t=[]);const a=t.map((e=>e.level_id));this.levelResults.filter((e=>-1===a.indexOf(e.pk))).forEach((e=>{t.push({level_id:e.pk,is_collapsed:!1})}));const n=this.levelResults.map((e=>e.pk));t=t.filter((e=>n.indexOf(e.level_id)>=0)),this.$store.commit({type:"initKanbanSettings",canDragCards:e,levels:t})}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.updateKanbanSettings(),this.$store.commit({type:"initPayload",kanbanCardResults:this.kanbanCardResults,levelResults:this.levelResults,columnResults:this.columnResults,openCardOnLoad:this.openCardOnLoad}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateDestination",destination:"kanban_board",locationId:this.locationId}),this.$store.commit({type:"updateLists",columnResults:this.columnResults,levelResults:this.levelResults}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel}),this.$store.commit({type:"updateGroupsAndUsers",potentialUserList:this.potentialUserList})}},mn=(0,U.Z)(pn,[["render",function(e,t,a,d,r,c){const u=(0,n.up)("n-switch"),b=(0,n.up)("kanban-board"),h=(0,n.up)("add-user-to-card"),p=(0,n.up)("archive-cards"),m=(0,n.up)("blocked-notes-modal"),k=(0,n.up)("confirm-card-archive"),v=(0,n.up)("new-kanban-card"),_=(0,n.up)("card-information"),g=(0,n.up)("upload-document-wizard"),f=(0,n.up)("add-folder-wizard"),y=(0,n.up)("add-link-wizard"),C=(0,n.up)("confirm-file-delete-vue"),w=(0,n.up)("confirm-folder-delete"),D=(0,n.up)("new-kanban-link-wizard"),L=(0,n.up)("n-config-provider");return(0,n.wg)(),(0,n.j4)(L,{theme:e.getTheme(a.theme)},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("h1",l,(0,s.toDisplayString)(a.kanbanBoardResults[0].fields.kanban_board_name),1),(0,n._)("div",o,[a.userLevel>=3?((0,n.wg)(),(0,n.iD)("a",{key:0,href:`${a.rootUrl}kanban_information/${a.kanbanBoardResults[0].pk}/edit_board/`}," Edit Kanban ",8,i)):(0,n.kq)("v-if",!0),"Closed"!==a.kanbanBoardResults[0].fields.kanban_board_status&&a.userLevel>=2?((0,n.wg)(),(0,n.j4)(u,{key:1,value:r.canDragCards,"onUpdate:value":[t[0]||(t[0]=e=>r.canDragCards=e),c.updateCanDragCards]},{checked:(0,n.w5)((()=>[(0,n.Uk)(" Can Drag Cards ")])),unchecked:(0,n.w5)((()=>[(0,n.Uk)(" Card Position Locked ")])),_:1},8,["value","onUpdate:value"])):(0,n.kq)("v-if",!0)]),(0,n.kq)(" Rendering the Kanban Container "),(0,n.Wm)(b,{"kanban-board-results":a.kanbanBoardResults,"new-card-info":r.newCardInfo,onDouble_clicked_card:t[1]||(t[1]=e=>c.doubleClickedCard(e))},null,8,["kanban-board-results","new-card-info"]),(0,n.kq)(" MODALS "),(0,n.Wm)(h,{destination:"kanban_card","location-id":e.cardId,"refresh-user-list":r.refreshUserList,onReset_refresh_user_list:c.resetRefreshUserList},null,8,["location-id","refresh-user-list","onReset_refresh_user_list"]),(0,n.Wm)(p),(0,n.Wm)(m),(0,n.Wm)(k,{"card-information":r.cardInformation},null,8,["card-information"]),(0,n.Wm)(v,{"kanban-card-results":a.kanbanCardResults,"column-results":a.columnResults,"level-results":a.levelResults,"kanban-board-results":a.kanbanBoardResults,onNew_card:t[2]||(t[2]=e=>c.newCard(e))},null,8,["kanban-card-results","column-results","level-results","kanban-board-results"]),(0,n.Wm)(_,{"card-information":r.cardInformation,onUpdate_card:t[3]||(t[3]=e=>c.updateCard(e))},null,8,["card-information"]),(0,n.Wm)(g,{"override-destination":"kanban_card","override-location-id":e.cardId},null,8,["override-location-id"]),(0,n.Wm)(f,{destination:"kanban_card","location-id":a.locationId},null,8,["location-id"]),(0,n.Wm)(y,{destination:"kanban_card","location-id":a.locationId},null,8,["location-id"]),(0,n.kq)(" CONFIRM DOCUMENT DELETE "),(0,n.Wm)(C),(0,n.Wm)(w),(0,n.Wm)(D,{"location-id":a.locationId,"column-results":a.columnResults,"level-results":a.levelResults,onNew_card:t[4]||(t[4]=e=>c.newCard(e))},null,8,["location-id","column-results","level-results"])])])),_:1},8,["theme"])}]])},4442:(e,t,a)=>{a.d(t,{Z:()=>D});var n=a(6252),s=a(3577);const l=(0,n._)("h2",null,"Public Links",-1),o=(0,n._)("p",{class:"text-instructions"}," The following will be public links you can send to clients. The links will contain certain information of the current object. i.e. it's status and description. Becareful who you send the links too! ",-1),i={key:0,class:"alert alert-info"},d={key:1,class:"alert alert-info"},r={key:2,class:"table table-striped"},c=(0,n._)("td",null,"Public Link",-1),u=(0,n._)("td",{style:{"text-align":"center",width:"100px"}},"Is Active",-1),b={key:0,style:{width:"10px"}},h=["onClick"],p={style:{"text-align":"center"}},m=["checked","data-public-link-id"],k={key:0},v={class:"remove-link"},_={key:3,class:"row submit-row"},g={class:"col-md-12"};var f=a(989),y=a(6542),C=a(5808);const w={name:"ListPublicLinks",props:{isReadOnly:{type:Boolean,default:!1},overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},data:()=>({isFetchingData:!0,publicLinkResults:[]}),watch:{overrideLocationId(){this.getPublicLinks()}},components:{Icon:y.JO},computed:{...(0,f.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mixins:[C.Z],methods:{async copyPublicLink(e){const t=`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${e}/`;try{await navigator.clipboard.writeText(t),this.$store.dispatch("newToast",{header:"Public Link Copied",message:"Public Link has successfully copied to the clipboard",extra_classes:"bg-success"})}catch(e){this.$store.dispatch("newToast",{header:"Can not copy public link",message:"Sorry, we failed to copy the public link",extra_classes:"bg-danger",delay:0})}},createPublicLink(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait whilst we create the toast",extra_classes:"bg-warning",delay:0,unique_type:"create_public_link"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/create/`).then((e=>{this.$store.dispatch("newToast",{header:"Successful new Public Link",message:"We have been able to create a new public link",extra_classes:"bg-success",unique_type:"create_public_link"}),this.publicLinkResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new public link",message:`Sorry, we failed to create the new public link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_public_link"})}))},deletePublicLink(e){const t=new FormData;t.set("public_link_id",e),this.$store.dispatch("newToast",{header:"Deleting Public Link",message:"Deleting Public Link",extra_classes:"bg-warning",delay:0,unique_type:"public_link_delete"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/delete/`,t).then((()=>{this.publicLinkResults=this.publicLinkResults.filter((t=>t.public_link_id!==e)),this.$store.dispatch("newToast",{header:"Successfully Deleted Public Link",message:"Successfully Deleted Public Link",extra_classes:"bg-success",unique_type:"public_link_delete"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Public Link",message:`Error - could not delete link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"public_link_delete"})}))},formatUrl(e){if(""===e||void 0===e)return"Data error!";const t=e.slice(0,7);return`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${t}...`},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},getPublicLinks(){this.axios(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/get_links/`).then((e=>{this.publicLinkResults=e.data,this.isFetchingData=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Public Links",message:`We had an issue fetching the public links for this object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateIsActive(e){const t=e.target.dataset.publicLinkId;this.$store.dispatch("newToast",{header:"Updating Active Status for Private Link",message:"Please wait - we are updating the status",extra_classes:"bg-warning",delay:0,unique_type:`is_active-${t}`});let a="False";e.target.checked&&(a="True");const n=new FormData;n.set("public_link_id",t),n.set("public_link_is_active",a),this.axios.post(`${this.rootUrl}public_data/update_link/`,n).then((()=>{this.$store.dispatch("newToast",{header:"Successfully Updated",message:"We have updated the is active status for the link",extra_classes:"bg-success",unique_type:`is_active-${t}`})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Active Status for Private Link",message:`We are sorry, something went wrong. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:`is_active-${t}`})}))}},mounted(){this.$nextTick((()=>{this.getPublicLinks()}))}},D=(0,a(3744).Z)(w,[["render",function(e,t,a,f,y,C){const w=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[l,o,y.isFetchingData?((0,n.wg)(),(0,n.iD)("div",i,"Currently loading data...")):(0,n.kq)("v-if",!0),!1===y.isFetchingData&&0===y.publicLinkResults.length?((0,n.wg)(),(0,n.iD)("div",d," Sorry. There are no public links setup for this object. ")):((0,n.wg)(),(0,n.iD)("table",r,[(0,n._)("thead",null,[(0,n._)("tr",null,[c,u,e.userLevel>1?((0,n.wg)(),(0,n.iD)("td",b)):(0,n.kq)("v-if",!0)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(y.publicLinkResults,(a=>((0,n.wg)(),(0,n.iD)("tr",{key:a.public_link_id},[(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-link",onClick:e=>C.copyPublicLink(a.public_link_id)},(0,s.toDisplayString)(C.formatUrl(a.public_link_id)),9,h)]),(0,n._)("td",p,[(0,n._)("input",{class:"form-check-input",type:"checkbox",checked:a.public_link_is_active,"data-public-link-id":a.public_link_id,onChange:t[0]||(t[0]=(...e)=>C.updateIsActive&&C.updateIsActive(...e))},null,40,m)]),e.userLevel>1?((0,n.wg)(),(0,n.iD)("td",k,[(0,n._)("span",v,[(0,n.Wm)(w,{icon:e.icons.trashCan,onClick:e=>C.deletePublicLink(a.public_link_id)},null,8,["icon","onClick"])])])):(0,n.kq)("v-if",!0)])))),128))])])),!1===a.isReadOnly&&e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("div",g,[(0,n._)("button",{class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>C.createPublicLink&&C.createPublicLink(...e))}," Create Public Link ")])])):(0,n.kq)("v-if",!0)],64)}]])},9930:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(6252);const s={class:"modal fade",id:"confirmFolderDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFolderDelete","aria-hidden":"true"},l={class:"modal-dialog"},o={class:"modal-content"},i=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"confirmFolderDelete"}," Please confirm Folder Deletion "),(0,n.kq)(" TASK INFORMATION "),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFolderDeleteButton"})],-1),d=(0,n._)("div",{class:"modal-body"}," Are you sure you want to delete the folder? All files under this folder will be deleted also. ",-1),r={class:"modal-footer"};var c=a(989),u=a(3138);const b={name:"ConfirmFolderDelete",computed:{...(0,c.Se)({destination:"getDestination",folderRemoveId:"getFolderRemoveId",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFolder(){if(""===this.folderRemoveId)return;const e=this.folderRemoveId,t=new FormData;t.set("folder_id",this.folderRemoveId),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove_folder/`,t).then((()=>{this.$store.dispatch("removeFolder",{folder_id:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing folder",message:`We could not remove your folder. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateFolderRemoveId",documentRemoveKey:""}),document.getElementById("confirmFolderDeleteButton").click();let e=document.getElementById("cardInformationModal");null!==e&&(e=new u.u_(e),e.show()),setTimeout((()=>{const e=document.getElementsByClassName("modal-backdrop fade show");e.length>1&&e[0].remove()}),200)}}},h=(0,a(3744).Z)(b,[["render",function(e,t,a,c,u,b){return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",l,[(0,n._)("div",o,[i,d,(0,n._)("div",r,[(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>b.closeModal&&b.closeModal(...e))}," No "),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>b.deleteFolder&&b.deleteFolder(...e))}," Yes ")])])])])}]])},2299:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(1257),s=a(989),l=a(3058);const o={computed:{...(0,s.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},mixins:[l.Z],methods:{uploadImage(e,t){const a=new FormData;a.set("document",e.blob(),e.filename()),a.set("document_description",e.filename());const n={onUploadProgress:e=>{parseFloat(e.loaded),parseFloat(e.total)}};return this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,a,n).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>{this.showErrorModal(e,"Upload Image","")}))},newObjectUploadImage(e,t){const a=new FormData;a.set("document",e.blob(),e.filename()),a.set("document_description",e.filename()),a.set("uuid",this.uuid);const s={onUploadProgress:e=>{parseFloat(e.loaded),parseFloat(e.total)}};return n.Z.post(`${this.rootUrl}documentation/new_object_upload/`,a,s).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>{this.showErrorModal(e,"Upload Image","")}))}}}}}]);