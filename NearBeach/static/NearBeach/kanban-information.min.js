"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[971],{6377:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Ft});var l=t(641),n=t(33);const s={class:"kanban-header"},o={key:0,class:"btn-group kanban-menu"},i={class:"dropdown-menu"},d={class:"dropdown-item",href:"#"},r={key:0,class:"dropdown-divider"},c={key:0,class:"dropdown-divider"},u=["href"],b={key:1,style:{height:"31px",width:"100%"}},h={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},k={class:"modal-dialog modal-lg"},m={class:"modal-content"},p={class:"modal-header"},v={class:"modal-body"},g={key:0,class:"row"},C={class:"col-md-8"},L={key:1,class:"row"},f={class:"col-md-6 no-search"},y=["src"],_={class:"modal-footer"},w=["disabled"];var I=t(2321),E=t(1080),S=t(9336),U=t(2124),M=t(2243);const x={name:"AddUserToCard",components:{Icon:I.In,NSelect:E.A},mixins:[M.A],computed:{...(0,U.L8)({cardId:"getCardId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(e){void 0!==e&&(this.userFixList=e.map((e=>({value:e.id,label:`${e.username}: ${e.first_name} ${e.last_name}`}))))}},methods:{addUser(){const e=new FormData;this.userModel.forEach((a=>{e.append("user_list",a)})),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/add_user/`,e).then((e=>{document.getElementById("addUserCloseButton").click(),this.userModel=[],this.$store.commit("updateGroupsAndUsers",{objectGroupList:e.data.object_group_list,objectUserList:e.data.object_user_list,potentialGroupList:e.data.potential_group_list,potentialUserList:e.data.potential_user_list}),new S.aF(document.getElementById("cardInformationModal")).show()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error adding user to kanban card",message:`Sorry, we could not add the user to the kanban card. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var $=t(6262);const A=(0,$.A)(x,[["render",function(e,a,t,n,s,o){const i=(0,l.g2)("Icon"),d=(0,l.g2)("n-select");return(0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",k,[(0,l.Lk)("div",m,[(0,l.Lk)("div",p,[(0,l.Lk)("h2",null,[(0,l.bF)(i,{icon:e.icons.userIcon},null,8,["icon"]),a[2]||(a[2]=(0,l.eW)(" Add User To Card "))]),a[3]||(a[3]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,l.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,l.Lk)("div",v,[s.userFixList.length>0?((0,l.uX)(),(0,l.CE)("div",g,[a[4]||(a[4]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Add Users"),(0,l.Lk)("p",{class:"text-instructions"}," Use the following multiple select to select which users you want to add to this kanban card. "),(0,l.Lk)("p",{class:"text-instructions"}," Please note: A user's group has to be added to the kanban card before the user can be added. ")],-1)),(0,l.Lk)("div",C,[(0,l.bF)(d,{options:s.userFixList,value:s.userModel,"onUpdate:value":a[0]||(a[0]=e=>s.userModel=e),multiple:""},null,8,["options","value"])])])):((0,l.uX)(),(0,l.CE)("div",L,[a[5]||(a[5]=(0,l.Lk)("div",{class:"col-md-6"},[(0,l.Lk)("strong",null,"Sorry - no results"),(0,l.Lk)("p",{class:"text-instructions"}," This could be because "),(0,l.Lk)("ul",{class:"text-instructions"},[(0,l.Lk)("li",null,"There are no more users left to add"),(0,l.Lk)("li",null," The user you are after is in a group not current added to this kanban card ")])],-1)),(0,l.Lk)("div",f,[(0,l.Lk)("img",{src:`${e.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,y)])]))]),(0,l.Lk)("div",_,[a[6]||(a[6]=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===s.userModel.length,onClick:a[1]||(a[1]=(...e)=>o.addUser&&o.addUser(...e))}," Add User(s) ",8,w)])])])])}]]),R={class:"modal fade",id:"archiveCardsModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},D={class:"modal-dialog"},F={class:"modal-content"},B={class:"modal-header"},T={class:"modal-footer"},N={name:"ArchiveCards",data:()=>({archiveCardsModal:{}}),computed:{...(0,U.L8)({allCards:"getCards",archiveDestination:"getArchiveDestination",archiveDestinationString:"getArchiveDestinationString",rootUrl:"getRootUrl"})},watch:{archiveDestinationString(e){void 0!==e&&(this.archiveCardsModal=new S.aF("#archiveCardsModal"),this.archiveCardsModal.show())}},methods:{archiveCards(){let e=this.archiveDestination.column,a=this.archiveDestination.level;const t=new FormData;this.allCards.filter((t=>parseInt(t.fields.kanban_column)===e&&parseInt(t.fields.kanban_level)===a)).forEach((e=>{t.append("kanban_card_id",e.pk)})),this.$store.commit({type:"archiveCards",column:e,level:a}),this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""}),this.axios.post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,t).catch((e=>{}))},closeModal(){this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""})}}},j=(0,$.A)(N,[["render",function(e,a,t,n,s,o){return(0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("div",D,[(0,l.Lk)("div",F,[(0,l.Lk)("div",B,[a[3]||(a[3]=(0,l.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"}," Are you sure? ",-1)),(0,l.Lk)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:a[0]||(a[0]=(...e)=>o.closeModal&&o.closeModal(...e))})]),a[4]||(a[4]=(0,l.Lk)("div",{class:"modal-body"}," Are you sure you want to archive the cards? This can not be undone. ",-1)),(0,l.Lk)("div",T,[(0,l.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," No "),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...e)=>o.archiveCards&&o.archiveCards(...e))}," Yes ")])])])])}]]),X={class:"modal fade",id:"blockedNotesModal",tabindex:"-1","aria-labelledby":"blockedNotesModal","aria-hidden":"true"},Q={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},P={class:"modal-content"},K={class:"modal-body"},V={class:"row"},O={class:"col-md-8"},z={class:"modal-footer"},W=["disabled"];var q=t(8838);const H={name:"BlockedNotesModal",components:{editor:q.A},props:{},data:()=>({noteModal:""}),computed:{...(0,U.L8)({cardId:"getCardId",contentCss:"getContentCss",rootUrl:"getRootUrl",skin:"getSkin"})},methods:{addNote(){const e=new FormData;e.set("note",this.noteModal),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/add_notes/`,e).then((()=>{this.closeModal()}))},closeModal(){this.noteModal="",document.getElementById("blockedNotesModalButton").click()}}},G=(0,$.A)(H,[["render",function(e,a,t,n,s,o){const i=(0,l.g2)("editor");return(0,l.uX)(),(0,l.CE)("div",X,[(0,l.Lk)("div",Q,[(0,l.Lk)("div",P,[a[4]||(a[4]=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h2",null,"Blocked Card Notes"),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"blockedNotesModalButton"},[(0,l.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,l.Lk)("div",K,[(0,l.Lk)("div",V,[a[3]||(a[3]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Blocked Card Notes"),(0,l.Lk)("p",{class:"text-instructions"}," Please write a reason why this particular card is blocked at the moment. ")],-1)),(0,l.Lk)("div",O,[(0,l.bF)(i,{init:{license_key:"gpl",file_picker_types:"image",height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:s.noteModal,"onUpdate:modelValue":a[0]||(a[0]=e=>s.noteModal=e)},null,8,["init","modelValue"])])])]),(0,l.Lk)("div",z,[(0,l.Lk)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),(0,l.Lk)("button",{class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>o.addNote&&o.addNote(...e)),disabled:""===s.noteModal}," Add Note ",8,W)])])])])}]]),Y={class:"kanban-header-row"},J={class:"kanban-header-row kanban-sticky-row",style:{display:"none"}},Z={class:"kanban-level-div"},ee=["onClick"],ae={name:"KanbanBoard",components:{KanbanRow:t(9586).A},props:{kanbanBoardResults:{type:Array,default:()=>[]},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,U.L8)({columnResults:"getColumnResults",levelCardCount:"getLevelCardCount",levelResults:"getLevelResults"})},mixins:[M.A],data:()=>({}),created(){window.addEventListener("resize",this.resizeProcedure),window.addEventListener("scroll",this.scrollProcedure)},unmounted(){window.removeEventListener("resize",this.resizeProcedure),window.removeEventListener("scroll",this.scrollProcedure)},methods:{doubleClickedCard(e){this.$emit("double_clicked_card",e)},expandLevel(e){this.$store.dispatch("updateLevelCollapse",{level_id:e})},getExpandClass(e){return this.$store.getters.getLevelCollapseStatus(e)?"kanban-expand collapsed":"kanban-expand expanded"},resizeProcedure(){const e=2*(this.columnResults.length-1),a=400*this.columnResults.length+e,t=document.getElementsByClassName("kanban-container")[0];if(void 0===t)return;const l=t.clientWidth;if(a<l){const e=document.getElementsByClassName("kanban-level-div");Array.from(e).forEach((e=>{e.style=`max-width: ${a}px;`}))}else{const e=t.scrollWidth;let a=document.getElementsByClassName("kanban-level-div");Array.from(a).forEach((a=>{a.style=`width: ${e}px;`}))}},scrollProcedure(){const e=document.getElementsByClassName("kanban-sticky-row")[0],a=document.getElementsByClassName("kanban-container")[0];e.scrollLeft=a.scrollLeft;const t=document.getElementById("kanban_container").scrollTop;e.style.display=t<90?"none":""}},mounted(){this.$nextTick((()=>{this.resizeProcedure()})),this.$store.commit({type:"updateKanbanStatus",kanbanStatus:this.kanbanBoardResults[0].fields.kanban_board_status})}},te=(0,$.A)(ae,[["render",function(e,a,t,s,o,i){const d=(0,l.g2)("kanban-row");return(0,l.uX)(),(0,l.CE)("div",{id:"kanban_container",class:"kanban-container",onScroll:a[1]||(a[1]=(...e)=>i.scrollProcedure&&i.scrollProcedure(...e))},[(0,l.Q3)(" Render out the header "),(0,l.Lk)("div",Y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.columnResults,(e=>((0,l.uX)(),(0,l.CE)("div",{class:"kanban-column-header",key:e.pk},(0,n.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,l.Q3)(" Render out the STICKY header "),(0,l.Lk)("div",J,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.columnResults,(e=>((0,l.uX)(),(0,l.CE)("div",{class:"kanban-column-header",key:e.pk},(0,n.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,l.Q3)(" Render each row "),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.levelResults,(s=>((0,l.uX)(),(0,l.CE)("div",{key:s.pk},[(0,l.Q3)(" CREATE THE LEVEL HEADER "),(0,l.Lk)("div",Z,[(0,l.Lk)("span",{class:(0,n.normalizeClass)(i.getExpandClass(s.pk)),onClick:e=>i.expandLevel(s.pk)},null,10,ee),(0,l.Lk)("span",null,(0,n.toDisplayString)(s.fields.kanban_level_name)+" - ["+(0,n.toDisplayString)(e.levelCardCount(s.pk))+"] ",1)]),(0,l.Q3)(" RENDER THE CELLS "),(0,l.bF)(d,{"level-id":s.pk,"new-card-info":t.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>i.doubleClickedCard(e))},null,8,["level-id","new-card-info"])])))),128))],32)}]]);var le=t(3751);const ne={class:"modal fade",id:"addKanbanCardModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addKanbanCardModalLabel","aria-hidden":"true"},se={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},oe={class:"modal-content"},ie={class:"modal-header"},de={class:"modal-body"},re={class:"row"},ce={class:"col-md-8"},ue={key:0,class:"error"},be={class:"row"},he={class:"col-md-8"},ke={class:"row"},me={class:"col-md-8"},pe={key:0},ve={key:1,class:"row"},ge={class:"col-md-8"},Ce={class:"row"},Le={class:"col-md-6 mt-4"},fe={class:"col-md-6 mt-4"},ye={class:"modal-footer"},_e=["disabled"];var we=t(379);const Ie={name:"NewKanbanCard",components:{editor:q.A,Icon:I.In,NSelect:E.A},props:{columnResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]}},mixins:[M.A,we.A],data:()=>({disableAddButton:!0,kanbanCardDescriptionModel:"",kanbanCardTextModel:"",kanbanCardPriorityModal:2,listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}],localColumnId:0,localLevelId:0}),computed:{...(0,U.L8)({contentCss:"getContentCss",listColumns:"getListColumns",listLevels:"getListLevels",newCardLocation:"getNewCardLocation",rootUrl:"getRootUrl",skin:"getSkin"})},methods:{addKanbanCard(){this.disableAddButton=!0,this.$store.dispatch("newToast",{header:"Creating new card",message:"Please wait as we create the new card",extra_classes:"bg-warning",delay:0,unique_type:"new_card"});const e=new FormData;e.set("kanban_card_text",this.kanbanCardTextModel),e.set("kanban_card_description",this.kanbanCardDescriptionModel),e.set("kanban_level",this.localLevelId),e.set("kanban_column",this.localColumnId),e.set("kanban_card_priority",this.kanbanCardPriorityModal),this.axios.post(`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/new_card/`,e).then((e=>{this.$emit("new_card",e.data),this.kanbanCardTextModel="",this.kanbanCardDescriptionModel="",document.getElementById("addKanbanCardCloseButton").click(),this.$store.dispatch("newToast",{header:"Card created successfully",message:"Card created successfully",extra_classes:"bg-success",unique_type:"new_card"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error creating card",message:`Error creating card: Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"new_card"})}))}},watch:{kanbanCardTextModel(){this.disableAddButton=!1,0===this.kanbanCardTextModel.length&&(this.disableAddButton=!0),this.kanbanCardResults.filter((e=>e.fields.kanban_card_text===this.kanbanCardTextModel)).length>0&&(this.disableAddButton=!0),0!==this.columnResults.length&&0!==this.levelResults.length||(this.disableAddButton=!0)},newCardLocation:{handler(e){this.localColumnId=e.columnId,this.localLevelId=e.levelId},deep:!0,immediate:!0}}},Ee=(0,$.A)(Ie,[["render",function(e,a,t,n,s,o){const i=(0,l.g2)("Icon"),d=(0,l.g2)("n-select"),r=(0,l.g2)("editor");return(0,l.uX)(),(0,l.CE)("div",ne,[(0,l.Lk)("div",se,[(0,l.Lk)("div",oe,[(0,l.Lk)("div",ie,[(0,l.Lk)("h2",null,[(0,l.bF)(i,{icon:e.icons.cardChecklist},null,8,["icon"]),a[7]||(a[7]=(0,l.eW)(" Add Kanban Card Wizard "))]),a[8]||(a[8]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addKanbanCardCloseButton"},null,-1))]),(0,l.Lk)("div",de,[(0,l.Lk)("div",re,[a[10]||(a[10]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Please note"),(0,l.Lk)("p",{class:"text-instructions"}," The card names can not be the same as something that already exists on the board. ")],-1)),(0,l.Lk)("div",ce,[(0,l.Lk)("label",null,[a[9]||(a[9]=(0,l.eW)(" Kanban Card Text ")),s.disableAddButton?((0,l.uX)(),(0,l.CE)("span",ue," Please supply a unique card name ")):(0,l.Q3)("v-if",!0)]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.kanbanCardTextModel=e),onKeydown:a[1]||(a[1]=(0,le.withKeys)(((...e)=>o.addKanbanCard&&o.addKanbanCard(...e)),["enter"])),class:"form-control"},null,544),[[le.vModelText,s.kanbanCardTextModel]])])]),a[17]||(a[17]=(0,l.Lk)("hr",null,null,-1)),(0,l.Q3)(" CARD PRIORITY "),(0,l.Lk)("div",be,[a[12]||(a[12]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Priority"),(0,l.Lk)("p",{class:"text-instructions"}," Please select the apprioriate card priority. ")],-1)),(0,l.Lk)("div",he,[a[11]||(a[11]=(0,l.Lk)("label",null,"Card Priority",-1)),(0,l.bF)(d,{options:s.listPriority,value:s.kanbanCardPriorityModal,"onUpdate:value":a[2]||(a[2]=e=>s.kanbanCardPriorityModal=e)},null,8,["options","value"])])]),a[18]||(a[18]=(0,l.Lk)("hr",null,null,-1)),(0,l.Q3)(" CARD DESCRIPTION "),(0,l.Lk)("div",ke,[a[13]||(a[13]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Description"),(0,l.Lk)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1)),(0,l.Lk)("div",me,[(0,l.bF)(r,{init:{license_key:"gpl",file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:s.kanbanCardDescriptionModel,"onUpdate:modelValue":a[3]||(a[3]=e=>s.kanbanCardDescriptionModel=e)},null,8,["init","modelValue"])])]),(0,l.Q3)(" CARD LOCATION "),e.newCardLocation.userCanSelectLocation?((0,l.uX)(),(0,l.CE)("hr",pe)):(0,l.Q3)("v-if",!0),e.newCardLocation.userCanSelectLocation?((0,l.uX)(),(0,l.CE)("div",ve,[a[16]||(a[16]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Location"),(0,l.Lk)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1)),(0,l.Lk)("div",ge,[(0,l.Lk)("div",Ce,[(0,l.Lk)("div",Le,[a[14]||(a[14]=(0,l.Lk)("label",null,"Card Column",-1)),(0,l.bF)(d,{options:e.listColumns,label:"column",value:s.localColumnId,"onUpdate:value":a[4]||(a[4]=e=>s.localColumnId=e)},null,8,["options","value"])]),(0,l.Lk)("div",fe,[a[15]||(a[15]=(0,l.Lk)("label",null,"Card Level",-1)),(0,l.bF)(d,{options:e.listLevels,label:"level",value:s.localLevelId,"onUpdate:value":a[5]||(a[5]=e=>s.localLevelId=e)},null,8,["options","value"])])])])])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",ye,[a[19]||(a[19]=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",onClick:a[6]||(a[6]=(...e)=>o.addKanbanCard&&o.addKanbanCard(...e)),disabled:s.disableAddButton}," Add Card ",8,_e)])])])])}]]),Se={class:"modal fade",id:"cardInformationModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ue={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},Me={class:"modal-content"},xe={class:"modal-header"},$e={class:"modal-body mt-4"},Ae={class:"tab-content",id:"myTabContent"},Re={class:"tab-pane fade show active",id:"card_details",role:"tabpanel","aria-labelledby":"details-tab"},De={class:"tab-pane fade",id:"card_description",role:"tabpanel","aria-labelledby":"description-tab"},Fe={class:"tab-pane fade",id:"card_notes",role:"tabpanel","aria-labelledby":"notes-tab"},Be={class:"tab-pane fade",id:"user_permissions",role:"tabpanel","aria-labelledby":"user-tab"},Te={class:"tab-pane fade",id:"downloads",role:"tabpanel","aria-labelledby":"user-tab"},Ne={class:"tab-pane fade",id:"public-links",role:"tabpanel","aria-labelledby":"user-tab"},je={key:0,class:"row link-to-object"},Xe=["href"],Qe={key:1},Pe={class:"row"},Ke={class:"col-md-8"},Ve=["disabled"],Oe={class:"row"},ze={class:"col-md-4"},We={class:"row"},qe={class:"col-md-8"},He={class:"row"},Ge={class:"col-md-6 mt-4"},Ye={class:"col-md-6 mt-4"},Je={key:2},Ze={key:3,class:"row"},ea={class:"col-md-12 card-detail--buttons"},aa={name:"CardDetails",components:{NSelect:E.A},data:()=>({listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}],tempModel:""}),computed:{...(0,U.L8)({cardId:"getCardId",cardLink:"getCardLink",kanbanStatus:"getKanbanStatus",listColumns:"getListColumns",listLevels:"getListLevels",userLevel:"getUserLevel"}),cardColumn:{get(){return this.$store.state.card.cardColumn},set(e){this.$store.commit({type:"updateValue",field:"cardColumn",value:e})}},cardLevel:{get(){return this.$store.state.card.cardLevel},set(e){this.$store.commit({type:"updateValue",field:"cardLevel",value:e})}},cardPriority:{get(){return this.$store.state.card.cardPriority},set(e){this.$store.commit({type:"updateValue",field:"cardPriority",value:e})}},cardTitle:{get(){return this.$store.state.card.cardTitle},set(e){this.$store.commit({type:"updateValue",field:"cardTitle",value:e})}}},methods:{archiveCard(){document.getElementById("cardInformationModalCloseButton").click(),new S.aF("#confirmCardArchiveModal").show()},closeModal(){document.getElementById("cardInformationModalCloseButton").click()},async differentDestination(e,a){const t=this.$store.getters.getCardsOrder(this.cardColumn,this.cardLevel).length,l={to:{dataset:{column:this.cardColumn,level:this.cardLevel}},from:{dataset:{column:a.fields.kanban_column,level:a.fields.kanban_level}},item:{dataset:{cardId:this.cardId,cardPriority:this.cardPriority}},newIndex:t};await this.$store.dispatch("kanbanCardMoved",{event:l});const n=this.$store.getters.getCardsOrder(this.cardColumn,this.cardLevel),s=this.$store.getters.getCardsOrder(a.fields.kanban_column,a.fields.kanban_level).filter((e=>parseInt(e.pk)!==parseInt(this.cardId)));this.$emit("update_card",{close_modal:e,new_destination:n,old_destination:s})},sameDestination(e){this.$store.commit({type:"updateKanbanCard",card_id:this.cardId,kanban_card_text:this.cardTitle,kanban_card_priority:this.cardPriority}),this.$emit("update_card",{close_modal:e})},updateCard(e){const a=this.$store.getters.getCard(this.cardId),t=parseInt(this.cardColumn)===parseInt(a.fields.kanban_column),l=parseInt(this.cardLevel)===parseInt(a.fields.kanban_level);t&&l?this.sameDestination(e):this.differentDestination(e,a)}}},ta=(0,$.A)(aa,[["render",function(e,a,t,s,o,i){const d=(0,l.g2)("n-select");return(0,l.uX)(),(0,l.CE)("div",null,[void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,l.uX)(),(0,l.CE)("div",je,[a[8]||(a[8]=(0,l.Lk)("strong",null,"Object Link: ",-1)),(0,l.Lk)("a",{href:e.cardLink.hyperlink,target:"_blank",rel:"noopener noreferrer"},(0,n.toDisplayString)(e.cardLink.type)+" - "+(0,n.toDisplayString)(e.cardLink.id),9,Xe)])):(0,l.Q3)("v-if",!0),void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,l.uX)(),(0,l.CE)("hr",Qe)):(0,l.Q3)("v-if",!0),(0,l.Q3)(" Card Text "),(0,l.Lk)("div",Pe,[a[10]||(a[10]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Title"),(0,l.Lk)("p",{class:"text-instructions"},' Write an appropriate name for the kanban card. To update click on the "Update" button. ')],-1)),(0,l.Lk)("div",Ke,[a[9]||(a[9]=(0,l.Lk)("label",null,"Card Title",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.cardTitle=e),class:"form-control",disabled:e.userLevel<=1},null,8,Ve),[[le.vModelText,i.cardTitle]])])]),a[16]||(a[16]=(0,l.Lk)("hr",null,null,-1)),(0,l.Lk)("div",Oe,[a[12]||(a[12]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Priority"),(0,l.Lk)("p",{class:"text-instructions"}," Define what the priority of the card is. ")],-1)),(0,l.Lk)("div",ze,[a[11]||(a[11]=(0,l.Lk)("label",null,"Card Priority",-1)),(0,l.bF)(d,{options:o.listPriority,value:i.cardPriority,"onUpdate:value":a[1]||(a[1]=e=>i.cardPriority=e),disabled:"Closed"===e.kanbanStatus||e.userLevel<=1},null,8,["options","value","disabled"])])]),a[17]||(a[17]=(0,l.Lk)("hr",null,null,-1)),(0,l.Q3)(" CARD LOCATION "),(0,l.Lk)("div",We,[a[15]||(a[15]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Location"),(0,l.Lk)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1)),(0,l.Lk)("div",qe,[(0,l.Lk)("div",He,[(0,l.Lk)("div",Ge,[a[13]||(a[13]=(0,l.Lk)("label",null,"Card Column",-1)),(0,l.bF)(d,{options:e.listColumns,label:"column",value:i.cardColumn,"onUpdate:value":a[2]||(a[2]=e=>i.cardColumn=e),disabled:"Closed"===e.kanbanStatus||e.userLevel<=1},null,8,["options","value","disabled"])]),(0,l.Lk)("div",Ye,[a[14]||(a[14]=(0,l.Lk)("label",null,"Card Level",-1)),(0,l.bF)(d,{options:e.listLevels,label:"level",value:i.cardLevel,"onUpdate:value":a[3]||(a[3]=e=>i.cardLevel=e),disabled:"Closed"===e.kanbanStatus||e.userLevel<=1},null,8,["options","value","disabled"])])])])]),e.userLevel>1?((0,l.uX)(),(0,l.CE)("hr",Je)):(0,l.Q3)("v-if",!0),e.userLevel>1?((0,l.uX)(),(0,l.CE)("div",Ze,[(0,l.Lk)("div",ea,[(0,l.Lk)("button",{class:"btn btn-warning",onClick:a[4]||(a[4]=(...e)=>i.closeModal&&i.closeModal(...e))}," Close & Discard Changes "),"Closed"!==e.kanbanStatus?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn btn-danger archive-card",onClick:a[5]||(a[5]=(...e)=>i.archiveCard&&i.archiveCard(...e))}," Archive Card ")):(0,l.Q3)("v-if",!0),"Closed"!==e.kanbanStatus?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"btn btn-primary save-changes",onClick:a[6]||(a[6]=e=>i.updateCard(!0))}," Save & Close ")):(0,l.Q3)("v-if",!0),"Closed"!==e.kanbanStatus?((0,l.uX)(),(0,l.CE)("button",{key:2,class:"btn btn-success save-changes",onClick:a[7]||(a[7]=e=>i.updateCard(!1))}," Save & Continue ")):(0,l.Q3)("v-if",!0)])])):(0,l.Q3)("v-if",!0)])}]]),la={key:0,class:"row"},na={class:"col-md-8"},sa={key:1},oa={key:2,class:"row"},ia={class:"col-md-12"},da=["disabled"],ra={key:3};var ca=t(531);const ua={name:"CardNotes",components:{editor:q.A,ListNotes:ca.A},props:{},data:()=>({cardNoteModel:""}),computed:{...(0,U.L8)({cardNotes:"getCardNotes",contentCss:"getContentCss",kanbanStatus:"getKanbanStatus",rootUrl:"getRootUrl",skin:"getSkin",userLevel:"getUserLevel"})},methods:{addNote(){const e=new FormData;e.set("note",this.cardNoteModel),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.$store.state.card.cardId}/add_notes/`,e).then((e=>{this.$store.commit({type:"addNote",newNote:e.data[0]}),this.cardNoteModel=""})).catch((e=>{}))},closeModal(){document.getElementById("cardInformationModalCloseButton").click()}}},ba=(0,$.A)(ua,[["render",function(e,a,t,n,s,o){const i=(0,l.g2)("editor"),d=(0,l.g2)("list-notes");return(0,l.uX)(),(0,l.CE)("div",null,[e.userLevel>1?((0,l.uX)(),(0,l.CE)("div",la,[a[4]||(a[4]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Notes"),(0,l.Lk)("p",{class:"text-instructions"},' To add a note - type your note in the Note Box and hit the "Submit Note" button. ')],-1)),(0,l.Lk)("div",na,[a[3]||(a[3]=(0,l.Lk)("label",null,"Note Box",-1)),(0,l.bF)(i,{init:{license_key:"gpl",height:250,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:s.cardNoteModel,"onUpdate:modelValue":a[0]||(a[0]=e=>s.cardNoteModel=e),disabled:"Closed"===e.kanbanStatus},null,8,["init","modelValue","disabled"])])])):(0,l.Q3)("v-if",!0),e.userLevel>1?((0,l.uX)(),(0,l.CE)("hr",sa)):(0,l.Q3)("v-if",!0),e.userLevel>1?((0,l.uX)(),(0,l.CE)("div",oa,[(0,l.Lk)("div",ia,[(0,l.Lk)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),(0,l.Lk)("button",{class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>o.addNote&&o.addNote(...e)),disabled:""===s.cardNoteModel}," Add Note ",8,da)])])):(0,l.Q3)("v-if",!0),e.userLevel>1?((0,l.uX)(),(0,l.CE)("hr",ra)):(0,l.Q3)("v-if",!0),(0,l.Q3)(" NOTE HISTORY "),(0,l.bF)(d,{"note-history-results":e.cardNotes,destination:"card"},null,8,["note-history-results"])])}]]),ha={class:"row"},ka={class:"col-md-8"},ma={key:0,class:"row"},pa={class:"col-md-12"},va={name:"CardDescription",components:{editor:q.A},props:{},data:()=>({editorIsDisabled:!1}),computed:{...(0,U.L8)({contentCss:"getContentCss",kanbanStatus:"getKanbanStatus",skin:"getSkin",userLevel:"getUserLevel"}),cardDescription:{get(){return this.$store.state.card.cardDescription},set(e){this.$store.commit("updateValue",{field:"cardDescription",value:e})}}},mixins:[we.A],methods:{closeModal(){document.getElementById("cardInformationModalCloseButton").click()},updateCard(e){this.$emit("update_card",{close_modal:e})}},mounted(){setTimeout((()=>{this.editorIsDisabled="Closed"===this.kanbanStatus||this.userLevel<=1}),500)}},ga=(0,$.A)(va,[["render",function(e,a,t,n,s,o){const i=(0,l.g2)("editor");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",ha,[a[4]||(a[4]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Description"),(0,l.Lk)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1)),(0,l.Lk)("div",ka,[(0,l.bF)(i,{init:{license_key:"gpl",file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:o.cardDescription,"onUpdate:modelValue":a[0]||(a[0]=e=>o.cardDescription=e),disabled:s.editorIsDisabled},null,8,["init","modelValue","disabled"])])]),a[5]||(a[5]=(0,l.Lk)("hr",null,null,-1)),e.userLevel>1?((0,l.uX)(),(0,l.CE)("div",ma,[(0,l.Lk)("div",pa,[(0,l.Lk)("button",{class:"btn btn-warning",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close & Discard Changes "),"Closed"!==e.kanbanStatus?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=e=>o.updateCard(!0))}," Save & Close ")):(0,l.Q3)("v-if",!0),"Closed"!==e.kanbanStatus?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"btn btn-success save-changes",onClick:a[3]||(a[3]=e=>o.updateCard(!1))}," Save & Continue ")):(0,l.Q3)("v-if",!0)])])):(0,l.Q3)("v-if",!0)])}]]),Ca={key:0,class:"row"},La={class:"col-md-12"};var fa=t(8072);const ya={name:"CardUsers",components:{Icon:I.In,RenderUserCardList:fa.A},computed:{...(0,U.L8)({cardId:"getCardId",kanbanBoardStatus:"getKanbanStatus",locationId:"getLocationId",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel",objectUserList:"getObjectUserList"})},mixins:[M.A],methods:{addUser(){document.getElementById("cardInformationModalCloseButton").click(),new S.aF("#addUserModal").show()},profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},removeUser(e){const a=new FormData;a.set("username",e),this.axios.post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/remove_user/`,a).then((e=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:e.data.object_group_list,objectUserList:e.data.object_user_list,potentialGroupList:e.data.potential_group_list,potentialUserList:e.data.potential_user_list})}))}}},_a=(0,$.A)(ya,[["render",function(e,a,t,n,s,o){const i=(0,l.g2)("render-user-card-list");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(i,{"object-user-list":e.objectUserList,onRemove_user:o.removeUser},null,8,["object-user-list","onRemove_user"]),e.userLevel>1&&"Closed"!==e.kanbanBoardStatus?((0,l.uX)(),(0,l.CE)("div",Ca,[(0,l.Lk)("div",La,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>o.addUser&&o.addUser(...e))}," Add User ")])])):(0,l.Q3)("v-if",!0)],64)}]]);var wa=t(4926),Ia=t(4711),Ea=t(7545);const Sa={name:"CardInformation",components:{CardDescription:ga,CardDetails:ta,CardNotes:ba,CardUsers:_a,DocumentsModule:wa.A,Icon:I.In,ListPublicLinks:Ia.A,UploadDocumentWizard:Ea.A},mixins:[M.A],data:()=>({cardDescriptionModel:"",cardNoteModel:"",cardTitleModel:"",noteHistoryResults:[]}),computed:{...(0,U.L8)({cardId:"getCardId",kanbanStatus:"getKanbanStatus",rootUrl:"getRootUrl"})},methods:{updateCard(e){this.$store.dispatch("newToast",{header:"Updating Current Card",message:"Please wait - we are updating the card's information",extra_classes:"bg-warning text-dark",unique_type:"update-card",delay:0});const a=this.$store.getters.getAllCardData,t=new FormData;t.set("kanban_card_text",a.cardTitle),t.set("kanban_card_description",a.cardDescription),t.set("kanban_level",a.cardLevel),t.set("kanban_column",a.cardColumn),t.set("kanban_card_id",a.cardId),t.set("kanban_card_priority",a.cardPriority),void 0!==e.new_destination&&e.new_destination.forEach((e=>{t.append("new_destination",e.pk)})),void 0!==e.old_destination&&e.old_destination.forEach((e=>{t.append("old_destination",e.pk)})),this.axios.post(`${this.rootUrl}kanban_information/update_card/`,t).then((()=>{this.$emit("update_card",{kanban_card_id:a.cardId,kanban_card_text:a.cardTitle,kanban_card_description:a.cardDescription}),this.$store.dispatch("newToast",{header:"Card successfully updated",message:"Your card has successfully update",extra_classes:"bg-success",unique_type:"update-card"}),e.close_modal&&document.getElementById("cardInformationModalCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Card failed to updated",message:`Sorry your card failed to update - error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update-card"})}))}}},Ua=(0,$.A)(Sa,[["render",function(e,a,t,s,o,i){const d=(0,l.g2)("Icon"),r=(0,l.g2)("card-details"),c=(0,l.g2)("card-description"),u=(0,l.g2)("card-notes"),b=(0,l.g2)("card-users"),h=(0,l.g2)("documents-module"),k=(0,l.g2)("list-public-links");return(0,l.uX)(),(0,l.CE)("div",Se,[(0,l.Lk)("div",Ue,[(0,l.Lk)("div",Me,[(0,l.Lk)("div",xe,[(0,l.Lk)("h2",null,[(0,l.bF)(d,{icon:e.icons.usersIcon},null,8,["icon"]),(0,l.eW)(" Card Information - "+(0,n.toDisplayString)(e.cardId),1)]),a[2]||(a[2]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"cardInformationModalCloseButton"},[(0,l.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,l.Lk)("div",$e,[(0,l.Q3)(" TAB MENU "),a[3]||(a[3]=(0,l.Lk)("ul",{id:"card_information_tabs",class:"nav nav-tabs",role:"tablist"},[(0,l.Lk)("li",{class:"nav-item",role:"presentation"},[(0,l.Lk)("button",{class:"nav-link active",id:"details-tab","data-bs-toggle":"tab","data-bs-target":"#card_details",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Details ")]),(0,l.Lk)("li",{class:"nav-item",role:"presentation"},[(0,l.Lk)("button",{class:"nav-link",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#card_description",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"}," Description ")]),(0,l.Lk)("li",{class:"nav-item",role:"presentation"},[(0,l.Lk)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#card_notes",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Notes ")]),(0,l.Lk)("li",{class:"nav-item",role:"presentation"},[(0,l.Lk)("button",{class:"nav-link",id:"users-tab","data-bs-toggle":"tab","data-bs-target":"#user_permissions",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Users ")]),(0,l.Lk)("li",{class:"nav-item",role:"presentation"},[(0,l.Lk)("button",{class:"nav-link",id:"downloads-tab","data-bs-toggle":"tab","data-bs-target":"#downloads",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Downloads ")]),(0,l.Lk)("li",{class:"nav-item",role:"presentation"},[(0,l.Lk)("button",{class:"nav-link",id:"public-link-tab","data-bs-toggle":"tab","data-bs-target":"#public-links",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Public Links ")])],-1)),a[4]||(a[4]=(0,l.Lk)("hr",null,null,-1)),(0,l.Q3)(" CONTENT OF TABS "),(0,l.Lk)("div",Ae,[(0,l.Lk)("div",Re,[(0,l.bF)(r,{onUpdate_card:a[0]||(a[0]=e=>i.updateCard(e))})]),(0,l.Lk)("div",De,[(0,l.bF)(c,{onUpdate_card:a[1]||(a[1]=e=>i.updateCard(e))})]),(0,l.Lk)("div",Fe,[(0,l.bF)(u)]),(0,l.Lk)("div",Be,[(0,l.bF)(b)]),(0,l.Lk)("div",Te,[(0,l.bF)(h,{"override-destination":"kanban_card","override-location-id":e.cardId,"read-only":"Closed"===e.kanbanStatus},null,8,["override-location-id","read-only"])]),(0,l.Lk)("div",Ne,[(0,l.bF)(k,{"override-destination":"kanban_card","override-location-id":e.cardId,"is-read-only":"Closed"===e.kanbanStatus},null,8,["override-location-id","is-read-only"])])])])])])])}]]),Ma={class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"kanbanLinkModal","aria-hidden":"true"},xa={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},$a={class:"modal-content"},Aa={class:"modal-header"},Ra={class:"modal-body"},Da={class:"row"},Fa={class:"col-md-8"},Ba={key:1,class:"alert alert-success"},Ta={key:0},Na={key:1,class:"row"},ja={class:"col-md-8"},Xa={class:"row"},Qa={class:"col-md-6 mt-4"},Pa={class:"col-md-6 mt-4"},Ka={class:"row"},Va={class:"col-md-8"},Oa={key:0,id:"link_wizard_results"},za=["src"],Wa={key:1,class:"alert alert-warning"},qa={key:2,class:"form-group"},Ha={key:3,class:"table"},Ga={key:0},Ya={class:"form-check"},Ja=["value","id"],Za=["for"],et={class:"small-text"},at={key:1},tt={class:"form-check"},lt=["value","id"],nt=["for"],st={class:"small-text"},ot={key:2},it={class:"form-check"},dt=["value","id"],rt=["for"],ct={class:"small-text"},ut={class:"modal-footer"},bt=["disabled"],ht={name:"NewKanbanLinkWizard",components:{Icon:I.In,NSelect:E.A},props:{columnResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},computed:{...(0,U.L8)({listColumns:"getListColumns",listLevels:"getListLevels",newCardLocation:"getNewCardLocation",rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[M.A],data:()=>({isSearching:!1,linkModel:[],localColumnId:0,localLevelId:0,objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;e.set(`${this.objectModel.toLowerCase()}`,this.linkModel),e.set("kanban_level",this.localLevelId),e.set("kanban_column",this.localColumnId),this.axios.post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel.toLowerCase()}/add_link/`,e).then((e=>{this.$emit("new_card",e.data),this.objectModel=null,document.getElementById("requirementLinkCloseButton").click()}))}},watch:{newCardLocation:{handler(e){this.localColumnId=e.columnId,this.localLevelId=e.levelId},deep:!0,immediate:!0},objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Link List",message:`We had an issue getting Link List. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let a="";return a=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),a.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},kt=(0,$.A)(ht,[["render",function(e,a,t,s,o,i){const d=(0,l.g2)("Icon"),r=(0,l.g2)("n-select");return(0,l.uX)(),(0,l.CE)("div",Ma,[(0,l.Lk)("div",xa,[(0,l.Lk)("div",$a,[(0,l.Lk)("div",Aa,[(0,l.Lk)("h2",null,[(0,l.bF)(d,{icon:e.icons.linkOut},null,8,["icon"]),a[8]||(a[8]=(0,l.eW)(" New Kanban Link Wizard "))]),a[9]||(a[9]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,l.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,l.Lk)("div",Ra,[(0,l.Q3)(" CHOOSING A OBJECT TYPE "),(0,l.Lk)("div",Da,[a[10]||(a[10]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Object Selector"),(0,l.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1)),(0,l.Lk)("div",Fa,[o.isSearching?((0,l.uX)(),(0,l.CE)("div",Ba," Searching for "+(0,n.toDisplayString)(o.objectModel)+"s ",1)):((0,l.uX)(),(0,l.Wv)(r,{key:0,options:o.objectSelection,value:o.objectModel,"onUpdate:value":a[0]||(a[0]=e=>o.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),(0,l.Q3)(" CARD LOCATION "),e.newCardLocation.userCanSelectLocation?((0,l.uX)(),(0,l.CE)("hr",Ta)):(0,l.Q3)("v-if",!0),e.newCardLocation.userCanSelectLocation?((0,l.uX)(),(0,l.CE)("div",Na,[a[13]||(a[13]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Card Location"),(0,l.Lk)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1)),(0,l.Lk)("div",ja,[(0,l.Lk)("div",Xa,[(0,l.Lk)("div",Qa,[a[11]||(a[11]=(0,l.Lk)("label",null,"Card Column",-1)),(0,l.bF)(r,{options:e.listColumns,label:"column",value:o.localColumnId,"onUpdate:value":a[1]||(a[1]=e=>o.localColumnId=e)},null,8,["options","value"])]),(0,l.Lk)("div",Pa,[a[12]||(a[12]=(0,l.Lk)("label",null,"Card Level",-1)),(0,l.bF)(r,{options:e.listLevels,label:"level",value:o.localLevelId,"onUpdate:value":a[2]||(a[2]=e=>o.localLevelId=e)},null,8,["options","value"])])])])])):(0,l.Q3)("v-if",!0),(0,l.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),a[21]||(a[21]=(0,l.Lk)("hr",null,null,-1)),(0,l.Lk)("div",Ka,[a[20]||(a[20]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Select Links"),(0,l.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1)),(0,l.Lk)("div",Va,[(0,l.Q3)(" LOADING PLACEHOLDER "),o.isSearching||null==o.objectModel?((0,l.uX)(),(0,l.CE)("div",Oa,[(0,l.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,za)])):(0,l.Q3)("v-if",!0),0===o.objectResults.length&&null!=o.objectModel?((0,l.uX)(),(0,l.CE)("div",Wa," Sorry - there are no results. ")):(0,l.Q3)("v-if",!0),(0,l.Q3)(" SEARCH RESULTS "),!o.isSearching&&o.objectResults.length>0&&null!=o.objectModel?((0,l.uX)(),(0,l.CE)("div",qa,[a[14]||(a[14]=(0,l.Lk)("label",null,"Search Terms",-1)),(0,l.bo)((0,l.Lk)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>o.searchTermModel=e),type:"text"},null,512),[[le.vModelText,o.searchTermModel]])])):(0,l.Q3)("v-if",!0),a[19]||(a[19]=(0,l.Lk)("br",null,null,-1)),(0,l.Q3)(" TABLE CONTAINING RESULTS "),!o.isSearching&&o.objectFilteredResults.length>0&&null!=o.objectModel?((0,l.uX)(),(0,l.CE)("table",Ha,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,n.toDisplayString)(o.objectModel)+" Description",1),a[15]||(a[15]=(0,l.Lk)("td",null,"Status",-1))])]),(0,l.Q3)(" PROJECTS "),"Project"==o.objectModel?((0,l.uX)(),(0,l.CE)("tbody",Ga,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.objectFilteredResults,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.pk},[(0,l.Lk)("td",null,[(0,l.Lk)("div",Ya,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_project_${e.pk}`,"onUpdate:modelValue":a[4]||(a[4]=e=>o.linkModel=e)},null,8,Ja),[[le.vModelRadio,o.linkModel]]),(0,l.Lk)("label",{class:"form-check-label",for:`radio_project_${e.pk}`},(0,n.toDisplayString)(e.fields.project_name),9,Za)]),a[16]||(a[16]=(0,l.Lk)("div",{class:"spacer"},null,-1)),(0,l.Lk)("p",et," Project "+(0,n.toDisplayString)(e.pk),1)]),(0,l.Lk)("td",null,(0,n.toDisplayString)(e.fields.project_status),1)])))),128))])):(0,l.Q3)("v-if",!0),(0,l.Q3)(" REQUIREMENTS "),"Requirement"==o.objectModel?((0,l.uX)(),(0,l.CE)("tbody",at,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.objectFilteredResults,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.pk},[(0,l.Lk)("td",null,[(0,l.Lk)("div",tt,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_requirement_${e.pk}`,"onUpdate:modelValue":a[5]||(a[5]=e=>o.linkModel=e)},null,8,lt),[[le.vModelRadio,o.linkModel]]),(0,l.Lk)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,n.toDisplayString)(e.fields.requirement_title),9,nt)]),a[17]||(a[17]=(0,l.Lk)("div",{class:"spacer"},null,-1)),(0,l.Lk)("p",st," Requirement "+(0,n.toDisplayString)(e.pk),1)]),(0,l.Lk)("td",null,(0,n.toDisplayString)(e.fields.requirement_status),1)])))),128))])):(0,l.Q3)("v-if",!0),(0,l.Q3)(" TASKS "),"Task"===o.objectModel?((0,l.uX)(),(0,l.CE)("tbody",ot,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.objectFilteredResults,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.pk},[(0,l.Lk)("td",null,[(0,l.Lk)("div",it,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"radio",value:e.pk,id:`radio_task_${e.pk}`,"onUpdate:modelValue":a[6]||(a[6]=e=>o.linkModel=e)},null,8,dt),[[le.vModelRadio,o.linkModel]]),(0,l.Lk)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,n.toDisplayString)(e.fields.task_short_description),9,rt)]),a[18]||(a[18]=(0,l.Lk)("div",{class:"spacer"},null,-1)),(0,l.Lk)("p",ct," Task "+(0,n.toDisplayString)(e.pk),1)]),(0,l.Lk)("td",null,(0,n.toDisplayString)(e.fields.task_status),1)])))),128))])):(0,l.Q3)("v-if",!0)])):(0,l.Q3)("v-if",!0)])])]),(0,l.Lk)("div",ut,[a[22]||(a[22]=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,l.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===o.linkModel.length,onClick:a[7]||(a[7]=(...e)=>i.saveLinks&&i.saveLinks(...e))}," Save changes ",8,bt)])])])])}]]),mt={class:"modal fade",id:"confirmCardArchiveModal",tabindex:"-1","aria-labelledby":"confirmCardArchiveModalLabel","aria-hidden":"true"},pt={class:"modal-dialog modal-lg"},vt={class:"modal-content"},gt={class:"modal-body"},Ct={class:"row"},Lt={class:"col"},ft={class:"row"},yt={class:"col"},_t={class:"modal-footer"},wt={name:"ConfirmCardArchive",computed:{...(0,U.L8)({cardId:"getCardId",cardTitle:"getCardTitle",rootUrl:"getRootUrl"})},methods:{archiveCard(){const e=new FormData;e.append("kanban_card_id",this.cardId),this.$store.commit({type:"archiveCard",cardId:this.cardId}),document.getElementById("confirmCardArchiveModalCloseButton").click(),this.axios.post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,e).catch((e=>{}))},goBack(){document.getElementById("confirmCardArchiveModalCloseButton").click(),new S.aF("#cardInformationModal").show()}}},It=(0,$.A)(wt,[["render",function(e,a,t,s,o,i){return(0,l.uX)(),(0,l.CE)("div",mt,[(0,l.Lk)("div",pt,[(0,l.Lk)("div",vt,[a[5]||(a[5]=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h2",null,"Card Information"),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmCardArchiveModalCloseButton"},[(0,l.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,l.Lk)("div",gt,[a[2]||(a[2]=(0,l.Lk)("div",{class:"alert alert-danger"}," Please note - archiving the card can not be undone. ",-1)),a[3]||(a[3]=(0,l.Lk)("h3",null," Are you sure you want to archive the following card? ",-1)),(0,l.Lk)("div",Ct,[(0,l.Lk)("div",Lt,"Card No. - "+(0,n.toDisplayString)(e.cardId),1)]),a[4]||(a[4]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("div",ft,[(0,l.Lk)("div",yt,"Card Title - "+(0,n.toDisplayString)(e.cardTitle),1)])]),(0,l.Lk)("div",_t,[(0,l.Lk)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...e)=>i.archiveCard&&i.archiveCard(...e))}," Yes Archive Card "),(0,l.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>i.goBack&&i.goBack(...e))}," No go back ")])])])])}]]);var Et=t(4991),St=t(9827),Ut=t(3762),Mt=t(3046),xt=t(8875),$t=t(2998),At=t(39),Rt=t(4371);const Dt={name:"KanbanInformation",components:{ConfirmNoteDelete:t(5141).A,NewHistoryNoteWizard:Rt.A,EditHistoryNoteWizard:At.A,ConfirmFolderDelete:$t.A,ConfirmFileDeleteVue:xt.A,AddLinkWizard:Mt.A,AddFolderWizard:Ut.A,UploadDocumentWizard:Ea.A,AddUserToCard:A,ArchiveCards:j,BlockedNotesModal:G,CardInformation:Ua,ConfirmCardArchive:It,KanbanBoard:te,NewKanbanCard:Ee,NewKanbanLinkWizard:kt,NSwitch:Et.A},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},kanbanSettings:{type:Object,default:()=>({setting_data:{canDragCards:!0,levels:[]}})},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0},openCardOnLoad:{type:Number,default:0},potentialUserList:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userLevel:{type:Number,default:0}},computed:{...(0,U.L8)({cardId:"getCardId"})},watch:{cardId(){this.refreshUserList=!0}},mixins:[St.A],data(){return{canDragCards:!0,cardInformation:{},localKanbanCardResults:this.kanbanCardResults,refreshUserList:!1,newCardInfo:[]}},methods:{addNewKanbanCard(){this.$store.commit({type:"updateNewCardLocation",columnId:this.columnResults[0].pk,levelId:this.levelResults[0].pk,userCanSelectLocation:!0}),new S.aF(document.getElementById("addKanbanCardModal")).show()},addNewLink(){this.$store.commit({type:"updateNewCardLocation",columnId:this.columnResults[0].pk,levelId:this.levelResults[0].pk,userCanSelectLocation:!0}),new S.aF(document.getElementById("newLinkModal")).show()},doubleClickedCard(e){this.cardInformation=e},newCard(e){this.$store.commit({type:"addCard",newCard:e})},resetRefreshUserList(){this.refreshUserList=!1},updateCanDragCards(e){this.$store.dispatch({type:"updateCanDragCards",canDragCards:e})},updateCard(e){this.localKanbanCardResults.forEach(((a,t)=>{a.pk===e.kanban_card_id&&(this.localKanbanCardResults[t].fields.kanban_card_text=e.kanban_card_text,this.localKanbanCardResults[t].fields.kanban_card_description=e.kanban_card_description)}))},updateKanbanSettings(){if(void 0===this.kanbanSettings.setting_data)return void this.$store.commit({type:"initKanbanSettings",canDragCards:!0,levels:this.levelResults.map((e=>({level_id:e.pk,is_collapsed:!1})))});let e=this.kanbanSettings.setting_data.canDragCards;void 0===e&&(e=!0),this.canDragCards=e;let a=this.kanbanSettings.setting_data.levels;void 0===a&&(a=[]);const t=a.map((e=>e.level_id));this.levelResults.filter((e=>-1===t.indexOf(e.pk))).forEach((e=>{a.push({level_id:e.pk,is_collapsed:!1})}));const l=this.levelResults.map((e=>e.pk));a=a.filter((e=>l.indexOf(e.level_id)>=0)),this.$store.commit({type:"initKanbanSettings",canDragCards:e,levels:a})}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.updateKanbanSettings(),this.$store.commit({type:"initPayload",kanbanCardResults:this.kanbanCardResults,levelResults:this.levelResults,columnResults:this.columnResults,openCardOnLoad:this.openCardOnLoad}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateDestination",destination:"kanban_board",locationId:this.locationId}),this.$store.commit({type:"updateLists",columnResults:this.columnResults,levelResults:this.levelResults}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel}),this.$store.commit({type:"updateGroupsAndUsers",potentialUserList:this.potentialUserList})}},Ft=(0,$.A)(Dt,[["render",function(e,a,t,h,k,m){const p=(0,l.g2)("n-switch"),v=(0,l.g2)("kanban-board"),g=(0,l.g2)("add-user-to-card"),C=(0,l.g2)("archive-cards"),L=(0,l.g2)("blocked-notes-modal"),f=(0,l.g2)("confirm-card-archive"),y=(0,l.g2)("new-kanban-card"),_=(0,l.g2)("card-information"),w=(0,l.g2)("upload-document-wizard"),I=(0,l.g2)("edit-history-note-wizard"),E=(0,l.g2)("new-history-note-wizard"),S=(0,l.g2)("confirm-note-delete"),U=(0,l.g2)("add-folder-wizard"),M=(0,l.g2)("add-link-wizard"),x=(0,l.g2)("confirm-file-delete-vue"),$=(0,l.g2)("confirm-folder-delete"),A=(0,l.g2)("new-kanban-link-wizard"),R=(0,l.g2)("n-config-provider");return(0,l.uX)(),(0,l.Wv)(R,{theme:e.getTheme(t.theme)},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("h1",s,(0,n.toDisplayString)(t.kanbanBoardResults[0].fields.kanban_board_name),1),t.userLevel>=2?((0,l.uX)(),(0,l.CE)("div",o,[a[9]||(a[9]=(0,l.Lk)("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Kanban Menu ",-1)),(0,l.Lk)("ul",i,[(0,l.Lk)("li",null,[(0,l.Lk)("a",d,["Closed"!==t.kanbanBoardResults[0].fields.kanban_board_status&&t.userLevel>=2?((0,l.uX)(),(0,l.Wv)(p,{key:0,value:k.canDragCards,"onUpdate:value":[a[0]||(a[0]=e=>k.canDragCards=e),m.updateCanDragCards]},{checked:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)(" Can Drag Cards ")]))),unchecked:(0,l.k6)((()=>a[8]||(a[8]=[(0,l.eW)(" Card Position Locked ")]))),_:1},8,["value","onUpdate:value"])):(0,l.Q3)("v-if",!0)])]),(0,l.Lk)("li",null,[t.userLevel>=3?((0,l.uX)(),(0,l.CE)("hr",r)):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("li",null,[(0,l.Lk)("a",{class:"dropdown-item",href:"#",onClick:a[1]||(a[1]=e=>m.addNewKanbanCard())}," Add New Card ")]),(0,l.Lk)("li",null,[(0,l.Lk)("a",{class:"dropdown-item",href:"#",onClick:a[2]||(a[2]=e=>m.addNewLink())}," Add New Link to Object ")]),(0,l.Lk)("li",null,[t.userLevel>=3?((0,l.uX)(),(0,l.CE)("hr",c)):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("li",null,[t.userLevel>=3?((0,l.uX)(),(0,l.CE)("a",{key:0,class:"dropdown-item",href:`${t.rootUrl}kanban_information/${t.kanbanBoardResults[0].pk}/edit_board/`}," Edit Kanban ",8,u)):(0,l.Q3)("v-if",!0)])])])):(0,l.Q3)("v-if",!0),t.userLevel<=1?((0,l.uX)(),(0,l.CE)("div",b)):(0,l.Q3)("v-if",!0),(0,l.Q3)(" Rendering the Kanban Container "),(0,l.bF)(v,{"kanban-board-results":t.kanbanBoardResults,"new-card-info":k.newCardInfo,onDouble_clicked_card:a[3]||(a[3]=e=>m.doubleClickedCard(e))},null,8,["kanban-board-results","new-card-info"]),(0,l.Q3)(" MODALS "),(0,l.bF)(g,{destination:"kanban_card","location-id":e.cardId,"refresh-user-list":k.refreshUserList,onReset_refresh_user_list:m.resetRefreshUserList},null,8,["location-id","refresh-user-list","onReset_refresh_user_list"]),(0,l.bF)(C),(0,l.bF)(L),(0,l.bF)(f,{"card-information":k.cardInformation},null,8,["card-information"]),(0,l.bF)(y,{"kanban-card-results":t.kanbanCardResults,"column-results":t.columnResults,"level-results":t.levelResults,"kanban-board-results":t.kanbanBoardResults,onNew_card:a[4]||(a[4]=e=>m.newCard(e))},null,8,["kanban-card-results","column-results","level-results","kanban-board-results"]),(0,l.bF)(_,{"card-information":k.cardInformation,onUpdate_card:a[5]||(a[5]=e=>m.updateCard(e))},null,8,["card-information"]),(0,l.bF)(w,{"override-destination":"kanban_card","override-location-id":e.cardId},null,8,["override-location-id"]),(0,l.bF)(I),(0,l.bF)(E,{"location-id":e.cardId,destination:"kanban_card"},null,8,["location-id"]),(0,l.bF)(S),(0,l.bF)(U,{destination:"kanban_card","location-id":t.locationId},null,8,["location-id"]),(0,l.bF)(M,{destination:"kanban_card","location-id":t.locationId},null,8,["location-id"]),(0,l.Q3)(" CONFIRM DOCUMENT DELETE "),(0,l.bF)(x),(0,l.bF)($),(0,l.bF)(A,{"location-id":t.locationId,"column-results":t.columnResults,"level-results":t.levelResults,onNew_card:a[6]||(a[6]=e=>m.newCard(e))},null,8,["location-id","column-results","level-results"])])])),_:1},8,["theme"])}]])},8072:(e,a,t)=>{t.d(a,{A:()=>g});var l=t(641),n=t(33);const s={key:0,class:"alert alert-info"},o={key:1,class:"alert alert-dark"},i={key:2,class:"user-card-list"},d=["src"],r={class:"user-card--details"},c={class:"user-card--name"},u={class:"user-card--email"},b={key:0,class:"user-card--remove"},h={key:0,class:"user-card"};var k=t(2124),m=t(2321),p=t(2243);const v={name:"RenderUserCardList",components:{Icon:m.In},props:{addingUserStatus:{type:Boolean,default:!1},loadingData:{type:Boolean,default:!1},objectUserList:{type:Array,default:()=>[]}},mixins:[p.A],computed:{...(0,k.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},methods:{profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},removeUser(e){this.$emit("remove_user",e)}}},g=(0,t(6262).A)(v,[["render",function(e,a,t,k,m,p){const v=(0,l.g2)("Icon");return t.loadingData?((0,l.uX)(),(0,l.CE)("div",s," Currently loading User Data. ")):0!==t.objectUserList.length||t.addingUserStatus?((0,l.uX)(),(0,l.CE)("div",i,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.objectUserList,(a=>((0,l.uX)(),(0,l.CE)("div",{key:a.username,class:"user-card"},[(0,l.Lk)("img",{src:p.profilePicture(a.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,d),(0,l.Lk)("div",r,[(0,l.Lk)("div",c,(0,n.toDisplayString)(a.first_name)+" "+(0,n.toDisplayString)(a.last_name),1),(0,l.Lk)("div",u,(0,n.toDisplayString)(a.email),1)]),e.userLevel>=3?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(v,{icon:e.icons.trashCan,onClick:e=>p.removeUser(a.username)},null,8,["icon","onClick"])])):(0,l.Q3)("v-if",!0)])))),128)),t.addingUserStatus?((0,l.uX)(),(0,l.CE)("div",h,a[0]||(a[0]=[(0,l.Lk)("div",{class:"user-card--details"},"++ Adding User(s) ++",-1)]))):(0,l.Q3)("v-if",!0)])):((0,l.uX)(),(0,l.CE)("div",o," Sorry, there are no users currently assigned to this object. "))}]])},379:(e,a,t)=>{t.d(a,{A:()=>n});var l=t(1083);const n={computed:{...(0,t(2124).L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{uploadImage(e,a){const t=new FormData;t.set("document",e.blob(),e.filename()),t.set("document_description",e.filename());const l={onUploadProgress:e=>{parseFloat(e.loaded),parseFloat(e.total)}};return this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,t,l).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to upload image",message:`Sorry, could not upload image. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},newObjectUploadImage(e,a){const t=new FormData;t.set("document",e.blob(),e.filename()),t.set("document_description",e.filename()),t.set("uuid",this.uuid);const n={onUploadProgress:e=>{parseFloat(e.loaded),parseFloat(e.total)}};return l.A.post(`${this.rootUrl}documentation/new_object_upload/`,t,n).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to upload image",message:`Sorry, could not upload image. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}}},4991:(e,a,t)=>{t.d(a,{A:()=>w});var l=t(641),n=t(953),s=t(4041),o=t(5562),i=t(9359),d=t(922),r=t(3370),c=t(4019),u=t(9819),b=t(2778),h=t(6680),k=t(7872),m=t(9521),p=t(4484),v=t(8880),g=t(8090);const C={name:"Switch",common:v.A,self:function(e){const{primaryColor:a,opacityDisabled:t,borderRadius:l,textColor3:n}=e;return Object.assign(Object.assign({},g.A),{iconColor:n,textColor:"white",loadingColor:a,opacityDisabled:t,railColor:"rgba(0, 0, 0, .14)",railColorActive:a,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:l,railBorderRadiusMedium:l,railBorderRadiusLarge:l,buttonBorderRadiusSmall:l,buttonBorderRadiusMedium:l,buttonBorderRadiusLarge:l,boxShadowFocus:`0 0 0 2px ${(0,p.QX)(a,{alpha:.2})}`})}};var L=t(8454);const f=(0,k.cB)("switch","\n height: var(--n-height);\n min-width: var(--n-width);\n vertical-align: middle;\n user-select: none;\n -webkit-user-select: none;\n display: inline-flex;\n outline: none;\n justify-content: center;\n align-items: center;\n",[(0,k.cE)("children-placeholder","\n height: var(--n-rail-height);\n display: flex;\n flex-direction: column;\n overflow: hidden;\n pointer-events: none;\n visibility: hidden;\n "),(0,k.cE)("rail-placeholder","\n display: flex;\n flex-wrap: none;\n "),(0,k.cE)("button-placeholder","\n width: calc(1.75 * var(--n-rail-height));\n height: var(--n-rail-height);\n "),(0,k.cB)("base-loading","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n font-size: calc(var(--n-button-width) - 4px);\n color: var(--n-loading-color);\n transition: color .3s var(--n-bezier);\n ",[(0,L.N)({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),(0,k.cE)("checked, unchecked","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n box-sizing: border-box;\n position: absolute;\n white-space: nowrap;\n top: 0;\n bottom: 0;\n display: flex;\n align-items: center;\n line-height: 1;\n "),(0,k.cE)("checked","\n right: 0;\n padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),(0,k.cE)("unchecked","\n left: 0;\n justify-content: flex-end;\n padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),(0,k.c)("&:focus",[(0,k.cE)("rail","\n box-shadow: var(--n-box-shadow-focus);\n ")]),(0,k.cM)("round",[(0,k.cE)("rail","border-radius: calc(var(--n-rail-height) / 2);",[(0,k.cE)("button","border-radius: calc(var(--n-button-height) / 2);")])]),(0,k.C5)("disabled",[(0,k.C5)("icon",[(0,k.cM)("rubber-band",[(0,k.cM)("pressed",[(0,k.cE)("rail",[(0,k.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,k.cE)("rail",[(0,k.c)("&:active",[(0,k.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,k.cM)("active",[(0,k.cM)("pressed",[(0,k.cE)("rail",[(0,k.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),(0,k.cE)("rail",[(0,k.c)("&:active",[(0,k.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),(0,k.cM)("active",[(0,k.cE)("rail",[(0,k.cE)("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),(0,k.cE)("rail","\n overflow: hidden;\n height: var(--n-rail-height);\n min-width: var(--n-rail-width);\n border-radius: var(--n-rail-border-radius);\n cursor: pointer;\n position: relative;\n transition:\n opacity .3s var(--n-bezier),\n background .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-rail-color);\n ",[(0,k.cE)("button-icon","\n color: var(--n-icon-color);\n transition: color .3s var(--n-bezier);\n font-size: calc(var(--n-button-height) - 4px);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n display: flex;\n justify-content: center;\n align-items: center;\n line-height: 1;\n ",[(0,L.N)()]),(0,k.cE)("button",'\n align-items: center; \n top: var(--n-offset);\n left: var(--n-offset);\n height: var(--n-button-height);\n width: var(--n-button-width-pressed);\n max-width: var(--n-button-width);\n border-radius: var(--n-button-border-radius);\n background-color: var(--n-button-color);\n box-shadow: var(--n-button-box-shadow);\n box-sizing: border-box;\n cursor: inherit;\n content: "";\n position: absolute;\n transition:\n background-color .3s var(--n-bezier),\n left .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n max-width .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ')]),(0,k.cM)("active",[(0,k.cE)("rail","background-color: var(--n-rail-color-active);")]),(0,k.cM)("loading",[(0,k.cE)("rail","\n cursor: wait;\n ")]),(0,k.cM)("disabled",[(0,k.cE)("rail","\n cursor: not-allowed;\n opacity: .5;\n ")])]),y=Object.assign(Object.assign({},i.A.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let _;const w=(0,l.pM)({name:"Switch",props:y,setup(e){void 0===_&&(_="undefined"==typeof CSS||void 0!==CSS.supports&&CSS.supports("width","max(1px)"));const{mergedClsPrefixRef:a,inlineThemeDisabled:t}=(0,d.Ay)(e),u=(0,i.A)("Switch","-switch",f,C,e,a),b=(0,r.A)(e),{mergedSizeRef:m,mergedDisabledRef:p}=b,v=(0,n.KR)(e.defaultValue),g=(0,n.lW)(e,"value"),L=(0,o.A)(g,v),y=(0,l.EW)((()=>L.value===e.checkedValue)),w=(0,n.KR)(!1),I=(0,n.KR)(!1),E=(0,l.EW)((()=>{const{railStyle:a}=e;if(a)return a({focused:I.value,checked:y.value})}));function S(a){const{"onUpdate:value":t,onChange:l,onUpdateValue:n}=e,{nTriggerFormInput:s,nTriggerFormChange:o}=b;t&&(0,h.T)(t,a),n&&(0,h.T)(n,a),l&&(0,h.T)(l,a),v.value=a,s(),o()}const U=(0,l.EW)((()=>{const{value:e}=m,{self:{opacityDisabled:a,railColor:t,railColorActive:l,buttonBoxShadow:n,buttonColor:o,boxShadowFocus:i,loadingColor:d,textColor:r,iconColor:c,[(0,k.cF)("buttonHeight",e)]:b,[(0,k.cF)("buttonWidth",e)]:h,[(0,k.cF)("buttonWidthPressed",e)]:p,[(0,k.cF)("railHeight",e)]:v,[(0,k.cF)("railWidth",e)]:g,[(0,k.cF)("railBorderRadius",e)]:C,[(0,k.cF)("buttonBorderRadius",e)]:L},common:{cubicBezierEaseInOut:f}}=u.value;let y,w,I;return _?(y=`calc((${v} - ${b}) / 2)`,w=`max(${v}, ${b})`,I=`max(${g}, calc(${g} + ${b} - ${v}))`):(y=(0,s.Cw)(((0,s.eV)(v)-(0,s.eV)(b))/2),w=(0,s.Cw)(Math.max((0,s.eV)(v),(0,s.eV)(b))),I=(0,s.eV)(v)>(0,s.eV)(b)?g:(0,s.Cw)((0,s.eV)(g)+(0,s.eV)(b)-(0,s.eV)(v))),{"--n-bezier":f,"--n-button-border-radius":L,"--n-button-box-shadow":n,"--n-button-color":o,"--n-button-width":h,"--n-button-width-pressed":p,"--n-button-height":b,"--n-height":w,"--n-offset":y,"--n-opacity-disabled":a,"--n-rail-border-radius":C,"--n-rail-color":t,"--n-rail-color-active":l,"--n-rail-height":v,"--n-rail-width":g,"--n-width":I,"--n-box-shadow-focus":i,"--n-loading-color":d,"--n-text-color":r,"--n-icon-color":c}})),M=t?(0,c.R)("switch",(0,l.EW)((()=>m.value[0])),U,e):void 0;return{handleClick:function(){e.loading||p.value||(L.value!==e.checkedValue?S(e.checkedValue):S(e.uncheckedValue))},handleBlur:function(){I.value=!1,function(){const{nTriggerFormBlur:e}=b;e()}(),w.value=!1},handleFocus:function(){I.value=!0,function(){const{nTriggerFormFocus:e}=b;e()}()},handleKeyup:function(a){e.loading||p.value||" "===a.key&&(L.value!==e.checkedValue?S(e.checkedValue):S(e.uncheckedValue),w.value=!1)},handleKeydown:function(a){e.loading||p.value||" "===a.key&&(a.preventDefault(),w.value=!0)},mergedRailStyle:E,pressed:w,mergedClsPrefix:a,mergedValue:L,checked:y,mergedDisabled:p,cssVars:t?void 0:U,themeClass:null==M?void 0:M.themeClass,onRender:null==M?void 0:M.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:a,checked:t,mergedRailStyle:n,onRender:s,$slots:o}=this;null==s||s();const{checked:i,unchecked:d,icon:r,"checked-icon":c,"unchecked-icon":h}=o,k=!((0,m.yr)(r)&&(0,m.yr)(c)&&(0,m.yr)(h));return(0,l.h)("div",{role:"switch","aria-checked":t,class:[`${e}-switch`,this.themeClass,k&&`${e}-switch--icon`,t&&`${e}-switch--active`,a&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},(0,l.h)("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:n},(0,m.iQ)(i,(a=>(0,m.iQ)(d,(t=>a||t?(0,l.h)("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},(0,l.h)("div",{class:`${e}-switch__rail-placeholder`},(0,l.h)("div",{class:`${e}-switch__button-placeholder`}),a),(0,l.h)("div",{class:`${e}-switch__rail-placeholder`},(0,l.h)("div",{class:`${e}-switch__button-placeholder`}),t)):null)))),(0,l.h)("div",{class:`${e}-switch__button`},(0,m.iQ)(r,(a=>(0,m.iQ)(c,(t=>(0,m.iQ)(h,(n=>(0,l.h)(u.A,null,{default:()=>this.loading?(0,l.h)(b.A,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(t||a)?(0,l.h)("div",{class:`${e}-switch__button-icon`,key:t?"checked-icon":"icon"},t||a):this.checked||!n&&!a?null:(0,l.h)("div",{class:`${e}-switch__button-icon`,key:n?"unchecked-icon":"icon"},n||a)}))))))),(0,m.iQ)(i,(a=>a&&(0,l.h)("div",{key:"checked",class:`${e}-switch__checked`},a))),(0,m.iQ)(d,(a=>a&&(0,l.h)("div",{key:"unchecked",class:`${e}-switch__unchecked`},a))))))}})}}]);